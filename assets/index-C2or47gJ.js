(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function a(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(c){if(c.ep)return;c.ep=!0;const f=a(c);fetch(c.href,f)}})();function qb(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Uu={exports:{}},Ba={};var dp;function Gb(){if(dp)return Ba;dp=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(s,c,f){var d=null;if(f!==void 0&&(d=""+f),c.key!==void 0&&(d=""+c.key),"key"in c){f={};for(var m in c)m!=="key"&&(f[m]=c[m])}else f=c;return c=f.ref,{$$typeof:l,type:s,key:d,ref:c!==void 0?c:null,props:f}}return Ba.Fragment=n,Ba.jsx=a,Ba.jsxs=a,Ba}var hp;function Yb(){return hp||(hp=1,Uu.exports=Gb()),Uu.exports}var _=Yb(),Hu={exports:{}},F={};var mp;function Vb(){if(mp)return F;mp=1;var l=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function M(C){return C===null||typeof C!="object"?null:(C=b&&C[b]||C["@@iterator"],typeof C=="function"?C:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,Q={};function ce(C,I,k){this.props=C,this.context=I,this.refs=Q,this.updater=k||L}ce.prototype.isReactComponent={},ce.prototype.setState=function(C,I){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,I,"setState")},ce.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function oe(){}oe.prototype=ce.prototype;function fe(C,I,k){this.props=C,this.context=I,this.refs=Q,this.updater=k||L}var ye=fe.prototype=new oe;ye.constructor=fe,H(ye,ce.prototype),ye.isPureReactComponent=!0;var Pe=Array.isArray;function be(){}var P={H:null,A:null,T:null,S:null},Se=Object.prototype.hasOwnProperty;function de(C,I,k){var G=k.ref;return{$$typeof:l,type:C,key:I,ref:G!==void 0?G:null,props:k}}function ht(C,I){return de(C.type,I,C.props)}function it(C){return typeof C=="object"&&C!==null&&C.$$typeof===l}function he(C){var I={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(k){return I[k]})}var ft=/\/+/g;function _t(C,I){return typeof C=="object"&&C!==null&&C.key!=null?he(""+C.key):I.toString(36)}function wt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(be,be):(C.status="pending",C.then(function(I){C.status==="pending"&&(C.status="fulfilled",C.value=I)},function(I){C.status==="pending"&&(C.status="rejected",C.reason=I)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function O(C,I,k,G,J){var ne=typeof C;(ne==="undefined"||ne==="boolean")&&(C=null);var ve=!1;if(C===null)ve=!0;else switch(ne){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(C.$$typeof){case l:case n:ve=!0;break;case S:return ve=C._init,O(ve(C._payload),I,k,G,J)}}if(ve)return J=J(C),ve=G===""?"."+_t(C,0):G,Pe(J)?(k="",ve!=null&&(k=ve.replace(ft,"$&/")+"/"),O(J,I,k,"",function(Xl){return Xl})):J!=null&&(it(J)&&(J=ht(J,k+(J.key==null||C&&C.key===J.key?"":(""+J.key).replace(ft,"$&/")+"/")+ve)),I.push(J)),1;ve=0;var mt=G===""?".":G+":";if(Pe(C))for(var Ge=0;Ge<C.length;Ge++)G=C[Ge],ne=mt+_t(G,Ge),ve+=O(G,I,k,ne,J);else if(Ge=M(C),typeof Ge=="function")for(C=Ge.call(C),Ge=0;!(G=C.next()).done;)G=G.value,ne=mt+_t(G,Ge++),ve+=O(G,I,k,ne,J);else if(ne==="object"){if(typeof C.then=="function")return O(wt(C),I,k,G,J);throw I=String(C),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return ve}function B(C,I,k){if(C==null)return C;var G=[],J=0;return O(C,G,"","",function(ne){return I.call(k,ne,J++)}),G}function K(C){if(C._status===-1){var I=C._result;I=I(),I.then(function(k){(C._status===0||C._status===-1)&&(C._status=1,C._result=k)},function(k){(C._status===0||C._status===-1)&&(C._status=2,C._result=k)}),C._status===-1&&(C._status=0,C._result=I)}if(C._status===1)return C._result.default;throw C._result}var Ce=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Re={map:B,forEach:function(C,I,k){B(C,function(){I.apply(this,arguments)},k)},count:function(C){var I=0;return B(C,function(){I++}),I},toArray:function(C){return B(C,function(I){return I})||[]},only:function(C){if(!it(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return F.Activity=v,F.Children=Re,F.Component=ce,F.Fragment=a,F.Profiler=c,F.PureComponent=fe,F.StrictMode=s,F.Suspense=p,F.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,F.__COMPILER_RUNTIME={__proto__:null,c:function(C){return P.H.useMemoCache(C)}},F.cache=function(C){return function(){return C.apply(null,arguments)}},F.cacheSignal=function(){return null},F.cloneElement=function(C,I,k){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var G=H({},C.props),J=C.key;if(I!=null)for(ne in I.key!==void 0&&(J=""+I.key),I)!Se.call(I,ne)||ne==="key"||ne==="__self"||ne==="__source"||ne==="ref"&&I.ref===void 0||(G[ne]=I[ne]);var ne=arguments.length-2;if(ne===1)G.children=k;else if(1<ne){for(var ve=Array(ne),mt=0;mt<ne;mt++)ve[mt]=arguments[mt+2];G.children=ve}return de(C.type,J,G)},F.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:f,_context:C},C},F.createElement=function(C,I,k){var G,J={},ne=null;if(I!=null)for(G in I.key!==void 0&&(ne=""+I.key),I)Se.call(I,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(J[G]=I[G]);var ve=arguments.length-2;if(ve===1)J.children=k;else if(1<ve){for(var mt=Array(ve),Ge=0;Ge<ve;Ge++)mt[Ge]=arguments[Ge+2];J.children=mt}if(C&&C.defaultProps)for(G in ve=C.defaultProps,ve)J[G]===void 0&&(J[G]=ve[G]);return de(C,ne,J)},F.createRef=function(){return{current:null}},F.forwardRef=function(C){return{$$typeof:m,render:C}},F.isValidElement=it,F.lazy=function(C){return{$$typeof:S,_payload:{_status:-1,_result:C},_init:K}},F.memo=function(C,I){return{$$typeof:g,type:C,compare:I===void 0?null:I}},F.startTransition=function(C){var I=P.T,k={};P.T=k;try{var G=C(),J=P.S;J!==null&&J(k,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(be,Ce)}catch(ne){Ce(ne)}finally{I!==null&&k.types!==null&&(I.types=k.types),P.T=I}},F.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},F.use=function(C){return P.H.use(C)},F.useActionState=function(C,I,k){return P.H.useActionState(C,I,k)},F.useCallback=function(C,I){return P.H.useCallback(C,I)},F.useContext=function(C){return P.H.useContext(C)},F.useDebugValue=function(){},F.useDeferredValue=function(C,I){return P.H.useDeferredValue(C,I)},F.useEffect=function(C,I){return P.H.useEffect(C,I)},F.useEffectEvent=function(C){return P.H.useEffectEvent(C)},F.useId=function(){return P.H.useId()},F.useImperativeHandle=function(C,I,k){return P.H.useImperativeHandle(C,I,k)},F.useInsertionEffect=function(C,I){return P.H.useInsertionEffect(C,I)},F.useLayoutEffect=function(C,I){return P.H.useLayoutEffect(C,I)},F.useMemo=function(C,I){return P.H.useMemo(C,I)},F.useOptimistic=function(C,I){return P.H.useOptimistic(C,I)},F.useReducer=function(C,I,k){return P.H.useReducer(C,I,k)},F.useRef=function(C){return P.H.useRef(C)},F.useState=function(C){return P.H.useState(C)},F.useSyncExternalStore=function(C,I,k){return P.H.useSyncExternalStore(C,I,k)},F.useTransition=function(){return P.H.useTransition()},F.version="19.2.4",F}var gp;function Nf(){return gp||(gp=1,Hu.exports=Vb()),Hu.exports}var De=Nf();const Lr=qb(De);var Bu={exports:{}},ka={},ku={exports:{}},qu={};var pp;function Qb(){return pp||(pp=1,(function(l){function n(O,B){var K=O.length;O.push(B);e:for(;0<K;){var Ce=K-1>>>1,Re=O[Ce];if(0<c(Re,B))O[Ce]=B,O[K]=Re,K=Ce;else break e}}function a(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var B=O[0],K=O.pop();if(K!==B){O[0]=K;e:for(var Ce=0,Re=O.length,C=Re>>>1;Ce<C;){var I=2*(Ce+1)-1,k=O[I],G=I+1,J=O[G];if(0>c(k,K))G<Re&&0>c(J,k)?(O[Ce]=J,O[G]=K,Ce=G):(O[Ce]=k,O[I]=K,Ce=I);else if(G<Re&&0>c(J,K))O[Ce]=J,O[G]=K,Ce=G;else break e}}return B}function c(O,B){var K=O.sortIndex-B.sortIndex;return K!==0?K:O.id-B.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;l.unstable_now=function(){return f.now()}}else{var d=Date,m=d.now();l.unstable_now=function(){return d.now()-m}}var p=[],g=[],S=1,v=null,b=3,M=!1,L=!1,H=!1,Q=!1,ce=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function ye(O){for(var B=a(g);B!==null;){if(B.callback===null)s(g);else if(B.startTime<=O)s(g),B.sortIndex=B.expirationTime,n(p,B);else break;B=a(g)}}function Pe(O){if(H=!1,ye(O),!L)if(a(p)!==null)L=!0,be||(be=!0,he());else{var B=a(g);B!==null&&wt(Pe,B.startTime-O)}}var be=!1,P=-1,Se=5,de=-1;function ht(){return Q?!0:!(l.unstable_now()-de<Se)}function it(){if(Q=!1,be){var O=l.unstable_now();de=O;var B=!0;try{e:{L=!1,H&&(H=!1,oe(P),P=-1),M=!0;var K=b;try{t:{for(ye(O),v=a(p);v!==null&&!(v.expirationTime>O&&ht());){var Ce=v.callback;if(typeof Ce=="function"){v.callback=null,b=v.priorityLevel;var Re=Ce(v.expirationTime<=O);if(O=l.unstable_now(),typeof Re=="function"){v.callback=Re,ye(O),B=!0;break t}v===a(p)&&s(p),ye(O)}else s(p);v=a(p)}if(v!==null)B=!0;else{var C=a(g);C!==null&&wt(Pe,C.startTime-O),B=!1}}break e}finally{v=null,b=K,M=!1}B=void 0}}finally{B?he():be=!1}}}var he;if(typeof fe=="function")he=function(){fe(it)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,_t=ft.port2;ft.port1.onmessage=it,he=function(){_t.postMessage(null)}}else he=function(){ce(it,0)};function wt(O,B){P=ce(function(){O(l.unstable_now())},B)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(O){O.callback=null},l.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<O?Math.floor(1e3/O):5},l.unstable_getCurrentPriorityLevel=function(){return b},l.unstable_next=function(O){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var K=b;b=B;try{return O()}finally{b=K}},l.unstable_requestPaint=function(){Q=!0},l.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=b;b=O;try{return B()}finally{b=K}},l.unstable_scheduleCallback=function(O,B,K){var Ce=l.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?Ce+K:Ce):K=Ce,O){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=K+Re,O={id:S++,callback:B,priorityLevel:O,startTime:K,expirationTime:Re,sortIndex:-1},K>Ce?(O.sortIndex=K,n(g,O),a(p)===null&&O===a(g)&&(H?(oe(P),P=-1):H=!0,wt(Pe,K-Ce))):(O.sortIndex=Re,n(p,O),L||M||(L=!0,be||(be=!0,he()))),O},l.unstable_shouldYield=ht,l.unstable_wrapCallback=function(O){var B=b;return function(){var K=b;b=B;try{return O.apply(this,arguments)}finally{b=K}}}})(qu)),qu}var yp;function Xb(){return yp||(yp=1,ku.exports=Qb()),ku.exports}var Gu={exports:{}},dt={};var _p;function Zb(){if(_p)return dt;_p=1;var l=Nf();function n(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(p,g,S){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:v==null?null:""+v,children:p,containerInfo:g,implementation:S}}var d=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return dt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,dt.createPortal=function(p,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return f(p,g,null,S)},dt.flushSync=function(p){var g=d.T,S=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=g,s.p=S,s.d.f()}},dt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},dt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},dt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var S=g.as,v=m(S,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,M=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;S==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:M}):S==="script"&&s.d.X(p,{crossOrigin:v,integrity:b,fetchPriority:M,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},dt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var S=m(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},dt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var S=g.as,v=m(S,g.crossOrigin);s.d.L(p,S,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},dt.preloadModule=function(p,g){if(typeof p=="string")if(g){var S=m(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},dt.requestFormReset=function(p){s.d.r(p)},dt.unstable_batchedUpdates=function(p,g){return p(g)},dt.useFormState=function(p,g,S){return d.H.useFormState(p,g,S)},dt.useFormStatus=function(){return d.H.useHostTransitionStatus()},dt.version="19.2.4",dt}var vp;function Kb(){if(vp)return Gu.exports;vp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Gu.exports=Zb(),Gu.exports}var bp;function Pb(){if(bp)return ka;bp=1;var l=Xb(),n=Nf(),a=Kb();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(s(188))}function g(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(s(188));return t!==e?null:e}for(var i=e,r=t;;){var o=i.return;if(o===null)break;var u=o.alternate;if(u===null){if(r=o.return,r!==null){i=r;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===i)return p(o),e;if(u===r)return p(o),t;u=u.sibling}throw Error(s(188))}if(i.return!==r.return)i=o,r=u;else{for(var h=!1,y=o.child;y;){if(y===i){h=!0,i=o,r=u;break}if(y===r){h=!0,r=o,i=u;break}y=y.sibling}if(!h){for(y=u.child;y;){if(y===i){h=!0,i=u,r=o;break}if(y===r){h=!0,r=u,i=o;break}y=y.sibling}if(!h)throw Error(s(189))}}if(i.alternate!==r)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),oe=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),Pe=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),ht=Symbol.for("react.memo_cache_sentinel"),it=Symbol.iterator;function he(e){return e===null||typeof e!="object"?null:(e=it&&e[it]||e["@@iterator"],typeof e=="function"?e:null)}var ft=Symbol.for("react.client.reference");function _t(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ft?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case ce:return"Profiler";case Q:return"StrictMode";case Pe:return"Suspense";case be:return"SuspenseList";case de:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case fe:return e.displayName||"Context";case oe:return(e._context.displayName||"Context")+".Consumer";case ye:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P:return t=e.displayName||null,t!==null?t:_t(e.type)||"Memo";case Se:t=e._payload,e=e._init;try{return _t(e(t))}catch{}}return null}var wt=Array.isArray,O=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},Ce=[],Re=-1;function C(e){return{current:e}}function I(e){0>Re||(e.current=Ce[Re],Ce[Re]=null,Re--)}function k(e,t){Re++,Ce[Re]=e.current,e.current=t}var G=C(null),J=C(null),ne=C(null),ve=C(null);function mt(e,t){switch(k(ne,t),k(J,e),k(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ig(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ig(t),e=Lg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(G),k(G,e)}function Ge(){I(G),I(J),I(ne)}function Xl(e){e.memoizedState!==null&&k(ve,e);var t=G.current,i=Lg(t,e.type);t!==i&&(k(J,e),k(G,i))}function _s(e){J.current===e&&(I(G),I(J)),ve.current===e&&(I(ve),Ia._currentValue=K)}var _c,fd;function yi(e){if(_c===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);_c=t&&t[1]||"",fd=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_c+e+fd}var vc=!1;function bc(e,t){if(!e||vc)return"";vc=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var z=function(){throw Error()};if(Object.defineProperty(z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(z,[])}catch(R){var A=R}Reflect.construct(e,[],z)}else{try{z.call()}catch(R){A=R}e.call(z.prototype)}}else{try{throw Error()}catch(R){A=R}(z=e())&&typeof z.catch=="function"&&z.catch(function(){})}}catch(R){if(R&&A&&typeof R.stack=="string")return[R.stack,A.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=r.DetermineComponentFrameRoot(),h=u[0],y=u[1];if(h&&y){var x=h.split(`
`),w=y.split(`
`);for(o=r=0;r<x.length&&!x[r].includes("DetermineComponentFrameRoot");)r++;for(;o<w.length&&!w[o].includes("DetermineComponentFrameRoot");)o++;if(r===x.length||o===w.length)for(r=x.length-1,o=w.length-1;1<=r&&0<=o&&x[r]!==w[o];)o--;for(;1<=r&&0<=o;r--,o--)if(x[r]!==w[o]){if(r!==1||o!==1)do if(r--,o--,0>o||x[r]!==w[o]){var D=`
`+x[r].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=r&&0<=o);break}}}finally{vc=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?yi(i):""}function _v(e,t){switch(e.tag){case 26:case 27:case 5:return yi(e.type);case 16:return yi("Lazy");case 13:return e.child!==t&&t!==null?yi("Suspense Fallback"):yi("Suspense");case 19:return yi("SuspenseList");case 0:case 15:return bc(e.type,!1);case 11:return bc(e.type.render,!1);case 1:return bc(e.type,!0);case 31:return yi("Activity");default:return""}}function dd(e){try{var t="",i=null;do t+=_v(e,i),i=e,e=e.return;while(e);return t}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Sc=Object.prototype.hasOwnProperty,xc=l.unstable_scheduleCallback,Ec=l.unstable_cancelCallback,vv=l.unstable_shouldYield,bv=l.unstable_requestPaint,At=l.unstable_now,Sv=l.unstable_getCurrentPriorityLevel,hd=l.unstable_ImmediatePriority,md=l.unstable_UserBlockingPriority,vs=l.unstable_NormalPriority,xv=l.unstable_LowPriority,gd=l.unstable_IdlePriority,Ev=l.log,Cv=l.unstable_setDisableYieldValue,Zl=null,Rt=null;function Ln(e){if(typeof Ev=="function"&&Cv(e),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(Zl,e)}catch{}}var Mt=Math.clz32?Math.clz32:wv,Tv=Math.log,Nv=Math.LN2;function wv(e){return e>>>=0,e===0?32:31-(Tv(e)/Nv|0)|0}var bs=256,Ss=262144,xs=4194304;function _i(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Es(e,t,i){var r=e.pendingLanes;if(r===0)return 0;var o=0,u=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var y=r&134217727;return y!==0?(r=y&~u,r!==0?o=_i(r):(h&=y,h!==0?o=_i(h):i||(i=y&~e,i!==0&&(o=_i(i))))):(y=r&~u,y!==0?o=_i(y):h!==0?o=_i(h):i||(i=r&~e,i!==0&&(o=_i(i)))),o===0?0:t!==0&&t!==o&&(t&u)===0&&(u=o&-o,i=t&-t,u>=i||u===32&&(i&4194048)!==0)?t:o}function Kl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Av(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pd(){var e=xs;return xs<<=1,(xs&62914560)===0&&(xs=4194304),e}function Cc(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Pl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Rv(e,t,i,r,o,u){var h=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var y=e.entanglements,x=e.expirationTimes,w=e.hiddenUpdates;for(i=h&~i;0<i;){var D=31-Mt(i),z=1<<D;y[D]=0,x[D]=-1;var A=w[D];if(A!==null)for(w[D]=null,D=0;D<A.length;D++){var R=A[D];R!==null&&(R.lane&=-536870913)}i&=~z}r!==0&&yd(e,r,0),u!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=u&~(h&~t))}function yd(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-Mt(t);e.entangledLanes|=t,e.entanglements[r]=e.entanglements[r]|1073741824|i&261930}function _d(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-Mt(i),o=1<<r;o&t|e[r]&t&&(e[r]|=t),i&=~o}}function vd(e,t){var i=t&-t;return i=(i&42)!==0?1:Tc(i),(i&(e.suspendedLanes|t))!==0?0:i}function Tc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Nc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function bd(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:ap(e.type))}function Sd(e,t){var i=B.p;try{return B.p=e,t()}finally{B.p=i}}var Un=Math.random().toString(36).slice(2),lt="__reactFiber$"+Un,vt="__reactProps$"+Un,Qi="__reactContainer$"+Un,wc="__reactEvents$"+Un,Mv="__reactListeners$"+Un,Dv="__reactHandles$"+Un,xd="__reactResources$"+Un,Fl="__reactMarker$"+Un;function Ac(e){delete e[lt],delete e[vt],delete e[wc],delete e[Mv],delete e[Dv]}function Xi(e){var t=e[lt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Qi]||i[lt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Yg(e);e!==null;){if(i=e[lt])return i;e=Yg(e)}return t}e=i,i=e.parentNode}return null}function Zi(e){if(e=e[lt]||e[Qi]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Jl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Ki(e){var t=e[xd];return t||(t=e[xd]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Fl]=!0}var Ed=new Set,Cd={};function vi(e,t){Pi(e,t),Pi(e+"Capture",t)}function Pi(e,t){for(Cd[e]=t,e=0;e<t.length;e++)Ed.add(t[e])}var Ov=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Td={},Nd={};function jv(e){return Sc.call(Nd,e)?!0:Sc.call(Td,e)?!1:Ov.test(e)?Nd[e]=!0:(Td[e]=!0,!1)}function Cs(e,t,i){if(jv(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var r=t.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function Ts(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function hn(e,t,i,r){if(r===null)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+r)}}function qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function wd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zv(e,t,i){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){i=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(h){i=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rc(e){if(!e._valueTracker){var t=wd(e)?"checked":"value";e._valueTracker=zv(e,t,""+e[t])}}function Ad(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=wd(e)?e.checked?"true":"false":e.value),e=r,e!==i?(t.setValue(e),!0):!1}function Ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Iv=/[\n"\\]/g;function Gt(e){return e.replace(Iv,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Mc(e,t,i,r,o,u,h,y){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+qt(t)):e.value!==""+qt(t)&&(e.value=""+qt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?Dc(e,h,qt(t)):i!=null?Dc(e,h,qt(i)):r!=null&&e.removeAttribute("value"),o==null&&u!=null&&(e.defaultChecked=!!u),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+qt(y):e.removeAttribute("name")}function Rd(e,t,i,r,o,u,h,y){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||i!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Rc(e);return}i=i!=null?""+qt(i):"",t=t!=null?""+qt(t):i,y||t===e.value||(e.value=t),e.defaultValue=t}r=r??o,r=typeof r!="function"&&typeof r!="symbol"&&!!r,e.checked=y?e.checked:!!r,e.defaultChecked=!!r,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h),Rc(e)}function Dc(e,t,i){t==="number"&&Ns(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Fi(e,t,i,r){if(e=e.options,t){t={};for(var o=0;o<i.length;o++)t["$"+i[o]]=!0;for(i=0;i<e.length;i++)o=t.hasOwnProperty("$"+e[i].value),e[i].selected!==o&&(e[i].selected=o),o&&r&&(e[i].defaultSelected=!0)}else{for(i=""+qt(i),t=null,o=0;o<e.length;o++){if(e[o].value===i){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Md(e,t,i){if(t!=null&&(t=""+qt(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+qt(i):""}function Dd(e,t,i,r){if(t==null){if(r!=null){if(i!=null)throw Error(s(92));if(wt(r)){if(1<r.length)throw Error(s(93));r=r[0]}i=r}i==null&&(i=""),t=i}i=qt(t),e.defaultValue=i,r=e.textContent,r===i&&r!==""&&r!==null&&(e.value=r),Rc(e)}function Ji(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Lv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Od(e,t,i){var r=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?r?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":r?e.setProperty(t,i):typeof i!="number"||i===0||Lv.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function jd(e,t,i){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,i!=null){for(var r in i)!i.hasOwnProperty(r)||t!=null&&t.hasOwnProperty(r)||(r.indexOf("--")===0?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&i[o]!==r&&Od(e,o,r)}else for(var u in t)t.hasOwnProperty(u)&&Od(e,u,t[u])}function Oc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ws(e){return Hv.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function mn(){}var jc=null;function zc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $i=null,Wi=null;function zd(e){var t=Zi(e);if(t&&(e=t.stateNode)){var i=e[vt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Mc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Gt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var o=r[vt]||null;if(!o)throw Error(s(90));Mc(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<i.length;t++)r=i[t],r.form===e.form&&Ad(r)}break e;case"textarea":Md(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Fi(e,!!i.multiple,t,!1)}}}var Ic=!1;function Id(e,t,i){if(Ic)return e(t,i);Ic=!0;try{var r=e(t);return r}finally{if(Ic=!1,($i!==null||Wi!==null)&&(mr(),$i&&(t=$i,e=Wi,Wi=$i=null,zd(t),e)))for(t=0;t<e.length;t++)zd(e[t])}}function $l(e,t){var i=e.stateNode;if(i===null)return null;var r=i[vt]||null;if(r===null)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,t,typeof i));return i}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lc=!1;if(gn)try{var Wl={};Object.defineProperty(Wl,"passive",{get:function(){Lc=!0}}),window.addEventListener("test",Wl,Wl),window.removeEventListener("test",Wl,Wl)}catch{Lc=!1}var Hn=null,Uc=null,As=null;function Ld(){if(As)return As;var e,t=Uc,i=t.length,r,o="value"in Hn?Hn.value:Hn.textContent,u=o.length;for(e=0;e<i&&t[e]===o[e];e++);var h=i-e;for(r=1;r<=h&&t[i-r]===o[u-r];r++);return As=o.slice(e,1<r?1-r:void 0)}function Rs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ms(){return!0}function Ud(){return!1}function bt(e){function t(i,r,o,u,h){this._reactName=i,this._targetInst=o,this.type=r,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(i=e[y],this[y]=i?i(u):u[y]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Ms:Ud,this.isPropagationStopped=Ud,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),t}var bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ds=bt(bi),ea=v({},bi,{view:0,detail:0}),Bv=bt(ea),Hc,Bc,ta,Os=v({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ta&&(ta&&e.type==="mousemove"?(Hc=e.screenX-ta.screenX,Bc=e.screenY-ta.screenY):Bc=Hc=0,ta=e),Hc)},movementY:function(e){return"movementY"in e?e.movementY:Bc}}),Hd=bt(Os),kv=v({},Os,{dataTransfer:0}),qv=bt(kv),Gv=v({},ea,{relatedTarget:0}),kc=bt(Gv),Yv=v({},bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Vv=bt(Yv),Qv=v({},bi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xv=bt(Qv),Zv=v({},bi,{data:0}),Bd=bt(Zv),Kv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fv[e])?!!t[e]:!1}function qc(){return Jv}var $v=v({},ea,{key:function(e){if(e.key){var t=Kv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Pv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qc,charCode:function(e){return e.type==="keypress"?Rs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wv=bt($v),e0=v({},Os,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kd=bt(e0),t0=v({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qc}),n0=bt(t0),i0=v({},bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),l0=bt(i0),a0=v({},Os,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),s0=bt(a0),r0=v({},bi,{newState:0,oldState:0}),c0=bt(r0),o0=[9,13,27,32],Gc=gn&&"CompositionEvent"in window,na=null;gn&&"documentMode"in document&&(na=document.documentMode);var u0=gn&&"TextEvent"in window&&!na,qd=gn&&(!Gc||na&&8<na&&11>=na),Gd=" ",Yd=!1;function Vd(e,t){switch(e){case"keyup":return o0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var el=!1;function f0(e,t){switch(e){case"compositionend":return Qd(t);case"keypress":return t.which!==32?null:(Yd=!0,Gd);case"textInput":return e=t.data,e===Gd&&Yd?null:e;default:return null}}function d0(e,t){if(el)return e==="compositionend"||!Gc&&Vd(e,t)?(e=Ld(),As=Uc=Hn=null,el=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qd&&t.locale!=="ko"?null:t.data;default:return null}}var h0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!h0[e.type]:t==="textarea"}function Zd(e,t,i,r){$i?Wi?Wi.push(r):Wi=[r]:$i=r,t=Sr(t,"onChange"),0<t.length&&(i=new Ds("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var ia=null,la=null;function m0(e){Rg(e,0)}function js(e){var t=Jl(e);if(Ad(t))return e}function Kd(e,t){if(e==="change")return t}var Pd=!1;if(gn){var Yc;if(gn){var Vc="oninput"in document;if(!Vc){var Fd=document.createElement("div");Fd.setAttribute("oninput","return;"),Vc=typeof Fd.oninput=="function"}Yc=Vc}else Yc=!1;Pd=Yc&&(!document.documentMode||9<document.documentMode)}function Jd(){ia&&(ia.detachEvent("onpropertychange",$d),la=ia=null)}function $d(e){if(e.propertyName==="value"&&js(la)){var t=[];Zd(t,la,e,zc(e)),Id(m0,t)}}function g0(e,t,i){e==="focusin"?(Jd(),ia=t,la=i,ia.attachEvent("onpropertychange",$d)):e==="focusout"&&Jd()}function p0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return js(la)}function y0(e,t){if(e==="click")return js(t)}function _0(e,t){if(e==="input"||e==="change")return js(t)}function v0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dt=typeof Object.is=="function"?Object.is:v0;function aa(e,t){if(Dt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var o=i[r];if(!Sc.call(t,o)||!Dt(e[o],t[o]))return!1}return!0}function Wd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eh(e,t){var i=Wd(e);e=0;for(var r;i;){if(i.nodeType===3){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Wd(i)}}function th(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?th(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ns(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Ns(e.document)}return t}function Qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var b0=gn&&"documentMode"in document&&11>=document.documentMode,tl=null,Xc=null,sa=null,Zc=!1;function ih(e,t,i){var r=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Zc||tl==null||tl!==Ns(r)||(r=tl,"selectionStart"in r&&Qc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sa&&aa(sa,r)||(sa=r,r=Sr(Xc,"onSelect"),0<r.length&&(t=new Ds("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=tl)))}function Si(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var nl={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionrun:Si("Transition","TransitionRun"),transitionstart:Si("Transition","TransitionStart"),transitioncancel:Si("Transition","TransitionCancel"),transitionend:Si("Transition","TransitionEnd")},Kc={},lh={};gn&&(lh=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function xi(e){if(Kc[e])return Kc[e];if(!nl[e])return e;var t=nl[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in lh)return Kc[e]=t[i];return e}var ah=xi("animationend"),sh=xi("animationiteration"),rh=xi("animationstart"),S0=xi("transitionrun"),x0=xi("transitionstart"),E0=xi("transitioncancel"),ch=xi("transitionend"),oh=new Map,Pc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pc.push("scrollEnd");function en(e,t){oh.set(e,t),vi(t,[e])}var zs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Yt=[],il=0,Fc=0;function Is(){for(var e=il,t=Fc=il=0;t<e;){var i=Yt[t];Yt[t++]=null;var r=Yt[t];Yt[t++]=null;var o=Yt[t];Yt[t++]=null;var u=Yt[t];if(Yt[t++]=null,r!==null&&o!==null){var h=r.pending;h===null?o.next=o:(o.next=h.next,h.next=o),r.pending=o}u!==0&&uh(i,o,u)}}function Ls(e,t,i,r){Yt[il++]=e,Yt[il++]=t,Yt[il++]=i,Yt[il++]=r,Fc|=r,e.lanes|=r,e=e.alternate,e!==null&&(e.lanes|=r)}function Jc(e,t,i,r){return Ls(e,t,i,r),Us(e)}function Ei(e,t){return Ls(e,null,null,t),Us(e)}function uh(e,t,i){e.lanes|=i;var r=e.alternate;r!==null&&(r.lanes|=i);for(var o=!1,u=e.return;u!==null;)u.childLanes|=i,r=u.alternate,r!==null&&(r.childLanes|=i),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(o=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,o&&t!==null&&(o=31-Mt(i),e=u.hiddenUpdates,r=e[o],r===null?e[o]=[t]:r.push(t),t.lane=i|536870912),u):null}function Us(e){if(50<Aa)throw Aa=0,ru=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ll={};function C0(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(e,t,i,r){return new C0(e,t,i,r)}function $c(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pn(e,t){var i=e.alternate;return i===null?(i=Ot(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function fh(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hs(e,t,i,r,o,u){var h=0;if(r=e,typeof e=="function")$c(e)&&(h=1);else if(typeof e=="string")h=Rb(e,i,G.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case de:return e=Ot(31,i,t,o),e.elementType=de,e.lanes=u,e;case H:return Ci(i.children,o,u,t);case Q:h=8,o|=24;break;case ce:return e=Ot(12,i,t,o|2),e.elementType=ce,e.lanes=u,e;case Pe:return e=Ot(13,i,t,o),e.elementType=Pe,e.lanes=u,e;case be:return e=Ot(19,i,t,o),e.elementType=be,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fe:h=10;break e;case oe:h=9;break e;case ye:h=11;break e;case P:h=14;break e;case Se:h=16,r=null;break e}h=29,i=Error(s(130,e===null?"null":typeof e,"")),r=null}return t=Ot(h,i,t,o),t.elementType=e,t.type=r,t.lanes=u,t}function Ci(e,t,i,r){return e=Ot(7,e,r,t),e.lanes=i,e}function Wc(e,t,i){return e=Ot(6,e,null,t),e.lanes=i,e}function dh(e){var t=Ot(18,null,null,0);return t.stateNode=e,t}function eo(e,t,i){return t=Ot(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var hh=new WeakMap;function Vt(e,t){if(typeof e=="object"&&e!==null){var i=hh.get(e);return i!==void 0?i:(t={value:e,source:t,stack:dd(t)},hh.set(e,t),t)}return{value:e,source:t,stack:dd(t)}}var al=[],sl=0,Bs=null,ra=0,Qt=[],Xt=0,Bn=null,rn=1,cn="";function yn(e,t){al[sl++]=ra,al[sl++]=Bs,Bs=e,ra=t}function mh(e,t,i){Qt[Xt++]=rn,Qt[Xt++]=cn,Qt[Xt++]=Bn,Bn=e;var r=rn;e=cn;var o=32-Mt(r)-1;r&=~(1<<o),i+=1;var u=32-Mt(t)+o;if(30<u){var h=o-o%5;u=(r&(1<<h)-1).toString(32),r>>=h,o-=h,rn=1<<32-Mt(t)+o|i<<o|r,cn=u+e}else rn=1<<u|i<<o|r,cn=e}function to(e){e.return!==null&&(yn(e,1),mh(e,1,0))}function no(e){for(;e===Bs;)Bs=al[--sl],al[sl]=null,ra=al[--sl],al[sl]=null;for(;e===Bn;)Bn=Qt[--Xt],Qt[Xt]=null,cn=Qt[--Xt],Qt[Xt]=null,rn=Qt[--Xt],Qt[Xt]=null}function gh(e,t){Qt[Xt++]=rn,Qt[Xt++]=cn,Qt[Xt++]=Bn,rn=t.id,cn=t.overflow,Bn=e}var at=null,Ie=null,ue=!1,kn=null,Zt=!1,io=Error(s(519));function qn(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ca(Vt(t,e)),io}function ph(e){var t=e.stateNode,i=e.type,r=e.memoizedProps;switch(t[lt]=e,t[vt]=r,i){case"dialog":le("cancel",t),le("close",t);break;case"iframe":case"object":case"embed":le("load",t);break;case"video":case"audio":for(i=0;i<Ma.length;i++)le(Ma[i],t);break;case"source":le("error",t);break;case"img":case"image":case"link":le("error",t),le("load",t);break;case"details":le("toggle",t);break;case"input":le("invalid",t),Rd(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":le("invalid",t);break;case"textarea":le("invalid",t),Dd(t,r.value,r.defaultValue,r.children)}i=r.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||r.suppressHydrationWarning===!0||jg(t.textContent,i)?(r.popover!=null&&(le("beforetoggle",t),le("toggle",t)),r.onScroll!=null&&le("scroll",t),r.onScrollEnd!=null&&le("scrollend",t),r.onClick!=null&&(t.onclick=mn),t=!0):t=!1,t||qn(e,!0)}function yh(e){for(at=e.return;at;)switch(at.tag){case 5:case 31:case 13:Zt=!1;return;case 27:case 3:Zt=!0;return;default:at=at.return}}function rl(e){if(e!==at)return!1;if(!ue)return yh(e),ue=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||xu(e.type,e.memoizedProps)),i=!i),i&&Ie&&qn(e),yh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ie=Gg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ie=Gg(e)}else t===27?(t=Ie,ti(e.type)?(e=wu,wu=null,Ie=e):Ie=t):Ie=at?Pt(e.stateNode.nextSibling):null;return!0}function Ti(){Ie=at=null,ue=!1}function lo(){var e=kn;return e!==null&&(Ct===null?Ct=e:Ct.push.apply(Ct,e),kn=null),e}function ca(e){kn===null?kn=[e]:kn.push(e)}var ao=C(null),Ni=null,_n=null;function Gn(e,t,i){k(ao,t._currentValue),t._currentValue=i}function vn(e){e._currentValue=ao.current,I(ao)}function so(e,t,i){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function ro(e,t,i,r){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){var h=o.child;u=u.firstContext;e:for(;u!==null;){var y=u;u=o;for(var x=0;x<t.length;x++)if(y.context===t[x]){u.lanes|=i,y=u.alternate,y!==null&&(y.lanes|=i),so(u.return,i,e),r||(h=null);break e}u=y.next}}else if(o.tag===18){if(h=o.return,h===null)throw Error(s(341));h.lanes|=i,u=h.alternate,u!==null&&(u.lanes|=i),so(h,i,e),h=null}else h=o.child;if(h!==null)h.return=o;else for(h=o;h!==null;){if(h===e){h=null;break}if(o=h.sibling,o!==null){o.return=h.return,h=o;break}h=h.return}o=h}}function cl(e,t,i,r){e=null;for(var o=t,u=!1;o!==null;){if(!u){if((o.flags&524288)!==0)u=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var h=o.alternate;if(h===null)throw Error(s(387));if(h=h.memoizedProps,h!==null){var y=o.type;Dt(o.pendingProps.value,h.value)||(e!==null?e.push(y):e=[y])}}else if(o===ve.current){if(h=o.alternate,h===null)throw Error(s(387));h.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Ia):e=[Ia])}o=o.return}e!==null&&ro(t,e,i,r),t.flags|=262144}function ks(e){for(e=e.firstContext;e!==null;){if(!Dt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function wi(e){Ni=e,_n=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function st(e){return _h(Ni,e)}function qs(e,t){return Ni===null&&wi(e),_h(e,t)}function _h(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},_n===null){if(e===null)throw Error(s(308));_n=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else _n=_n.next=t;return i}var T0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},N0=l.unstable_scheduleCallback,w0=l.unstable_NormalPriority,Qe={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function co(){return{controller:new T0,data:new Map,refCount:0}}function oa(e){e.refCount--,e.refCount===0&&N0(w0,function(){e.controller.abort()})}var ua=null,oo=0,ol=0,ul=null;function A0(e,t){if(ua===null){var i=ua=[];oo=0,ol=hu(),ul={status:"pending",value:void 0,then:function(r){i.push(r)}}}return oo++,t.then(vh,vh),t}function vh(){if(--oo===0&&ua!==null){ul!==null&&(ul.status="fulfilled");var e=ua;ua=null,ol=0,ul=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function R0(e,t){var i=[],r={status:"pending",value:null,reason:null,then:function(o){i.push(o)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var o=0;o<i.length;o++)(0,i[o])(t)},function(o){for(r.status="rejected",r.reason=o,o=0;o<i.length;o++)(0,i[o])(void 0)}),r}var bh=O.S;O.S=function(e,t){ig=At(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&A0(e,t),bh!==null&&bh(e,t)};var Ai=C(null);function uo(){var e=Ai.current;return e!==null?e:Me.pooledCache}function Gs(e,t){t===null?k(Ai,Ai.current):k(Ai,t.pool)}function Sh(){var e=uo();return e===null?null:{parent:Qe._currentValue,pool:e}}var fl=Error(s(460)),fo=Error(s(474)),Ys=Error(s(542)),Vs={then:function(){}};function xh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Eh(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(mn,mn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Th(e),e;default:if(typeof t.status=="string")t.then(mn,mn);else{if(e=Me,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(r){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=r}},function(r){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=r}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Th(e),e}throw Mi=t,fl}}function Ri(e){try{var t=e._init;return t(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Mi=i,fl):i}}var Mi=null;function Ch(){if(Mi===null)throw Error(s(459));var e=Mi;return Mi=null,e}function Th(e){if(e===fl||e===Ys)throw Error(s(483))}var dl=null,fa=0;function Qs(e){var t=fa;return fa+=1,dl===null&&(dl=[]),Eh(dl,e,t)}function da(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Xs(e,t){throw t.$$typeof===b?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Nh(e){function t(T,E){if(e){var N=T.deletions;N===null?(T.deletions=[E],T.flags|=16):N.push(E)}}function i(T,E){if(!e)return null;for(;E!==null;)t(T,E),E=E.sibling;return null}function r(T){for(var E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function o(T,E){return T=pn(T,E),T.index=0,T.sibling=null,T}function u(T,E,N){return T.index=N,e?(N=T.alternate,N!==null?(N=N.index,N<E?(T.flags|=67108866,E):N):(T.flags|=67108866,E)):(T.flags|=1048576,E)}function h(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function y(T,E,N,j){return E===null||E.tag!==6?(E=Wc(N,T.mode,j),E.return=T,E):(E=o(E,N),E.return=T,E)}function x(T,E,N,j){var V=N.type;return V===H?D(T,E,N.props.children,j,N.key):E!==null&&(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Se&&Ri(V)===E.type)?(E=o(E,N.props),da(E,N),E.return=T,E):(E=Hs(N.type,N.key,N.props,null,T.mode,j),da(E,N),E.return=T,E)}function w(T,E,N,j){return E===null||E.tag!==4||E.stateNode.containerInfo!==N.containerInfo||E.stateNode.implementation!==N.implementation?(E=eo(N,T.mode,j),E.return=T,E):(E=o(E,N.children||[]),E.return=T,E)}function D(T,E,N,j,V){return E===null||E.tag!==7?(E=Ci(N,T.mode,j,V),E.return=T,E):(E=o(E,N),E.return=T,E)}function z(T,E,N){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Wc(""+E,T.mode,N),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case M:return N=Hs(E.type,E.key,E.props,null,T.mode,N),da(N,E),N.return=T,N;case L:return E=eo(E,T.mode,N),E.return=T,E;case Se:return E=Ri(E),z(T,E,N)}if(wt(E)||he(E))return E=Ci(E,T.mode,N,null),E.return=T,E;if(typeof E.then=="function")return z(T,Qs(E),N);if(E.$$typeof===fe)return z(T,qs(T,E),N);Xs(T,E)}return null}function A(T,E,N,j){var V=E!==null?E.key:null;if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return V!==null?null:y(T,E,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case M:return N.key===V?x(T,E,N,j):null;case L:return N.key===V?w(T,E,N,j):null;case Se:return N=Ri(N),A(T,E,N,j)}if(wt(N)||he(N))return V!==null?null:D(T,E,N,j,null);if(typeof N.then=="function")return A(T,E,Qs(N),j);if(N.$$typeof===fe)return A(T,E,qs(T,N),j);Xs(T,N)}return null}function R(T,E,N,j,V){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return T=T.get(N)||null,y(E,T,""+j,V);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case M:return T=T.get(j.key===null?N:j.key)||null,x(E,T,j,V);case L:return T=T.get(j.key===null?N:j.key)||null,w(E,T,j,V);case Se:return j=Ri(j),R(T,E,N,j,V)}if(wt(j)||he(j))return T=T.get(N)||null,D(E,T,j,V,null);if(typeof j.then=="function")return R(T,E,N,Qs(j),V);if(j.$$typeof===fe)return R(T,E,N,qs(E,j),V);Xs(E,j)}return null}function q(T,E,N,j){for(var V=null,me=null,Y=E,W=E=0,re=null;Y!==null&&W<N.length;W++){Y.index>W?(re=Y,Y=null):re=Y.sibling;var ge=A(T,Y,N[W],j);if(ge===null){Y===null&&(Y=re);break}e&&Y&&ge.alternate===null&&t(T,Y),E=u(ge,E,W),me===null?V=ge:me.sibling=ge,me=ge,Y=re}if(W===N.length)return i(T,Y),ue&&yn(T,W),V;if(Y===null){for(;W<N.length;W++)Y=z(T,N[W],j),Y!==null&&(E=u(Y,E,W),me===null?V=Y:me.sibling=Y,me=Y);return ue&&yn(T,W),V}for(Y=r(Y);W<N.length;W++)re=R(Y,T,W,N[W],j),re!==null&&(e&&re.alternate!==null&&Y.delete(re.key===null?W:re.key),E=u(re,E,W),me===null?V=re:me.sibling=re,me=re);return e&&Y.forEach(function(si){return t(T,si)}),ue&&yn(T,W),V}function X(T,E,N,j){if(N==null)throw Error(s(151));for(var V=null,me=null,Y=E,W=E=0,re=null,ge=N.next();Y!==null&&!ge.done;W++,ge=N.next()){Y.index>W?(re=Y,Y=null):re=Y.sibling;var si=A(T,Y,ge.value,j);if(si===null){Y===null&&(Y=re);break}e&&Y&&si.alternate===null&&t(T,Y),E=u(si,E,W),me===null?V=si:me.sibling=si,me=si,Y=re}if(ge.done)return i(T,Y),ue&&yn(T,W),V;if(Y===null){for(;!ge.done;W++,ge=N.next())ge=z(T,ge.value,j),ge!==null&&(E=u(ge,E,W),me===null?V=ge:me.sibling=ge,me=ge);return ue&&yn(T,W),V}for(Y=r(Y);!ge.done;W++,ge=N.next())ge=R(Y,T,W,ge.value,j),ge!==null&&(e&&ge.alternate!==null&&Y.delete(ge.key===null?W:ge.key),E=u(ge,E,W),me===null?V=ge:me.sibling=ge,me=ge);return e&&Y.forEach(function(kb){return t(T,kb)}),ue&&yn(T,W),V}function we(T,E,N,j){if(typeof N=="object"&&N!==null&&N.type===H&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case M:e:{for(var V=N.key;E!==null;){if(E.key===V){if(V=N.type,V===H){if(E.tag===7){i(T,E.sibling),j=o(E,N.props.children),j.return=T,T=j;break e}}else if(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Se&&Ri(V)===E.type){i(T,E.sibling),j=o(E,N.props),da(j,N),j.return=T,T=j;break e}i(T,E);break}else t(T,E);E=E.sibling}N.type===H?(j=Ci(N.props.children,T.mode,j,N.key),j.return=T,T=j):(j=Hs(N.type,N.key,N.props,null,T.mode,j),da(j,N),j.return=T,T=j)}return h(T);case L:e:{for(V=N.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===N.containerInfo&&E.stateNode.implementation===N.implementation){i(T,E.sibling),j=o(E,N.children||[]),j.return=T,T=j;break e}else{i(T,E);break}else t(T,E);E=E.sibling}j=eo(N,T.mode,j),j.return=T,T=j}return h(T);case Se:return N=Ri(N),we(T,E,N,j)}if(wt(N))return q(T,E,N,j);if(he(N)){if(V=he(N),typeof V!="function")throw Error(s(150));return N=V.call(N),X(T,E,N,j)}if(typeof N.then=="function")return we(T,E,Qs(N),j);if(N.$$typeof===fe)return we(T,E,qs(T,N),j);Xs(T,N)}return typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint"?(N=""+N,E!==null&&E.tag===6?(i(T,E.sibling),j=o(E,N),j.return=T,T=j):(i(T,E),j=Wc(N,T.mode,j),j.return=T,T=j),h(T)):i(T,E)}return function(T,E,N,j){try{fa=0;var V=we(T,E,N,j);return dl=null,V}catch(Y){if(Y===fl||Y===Ys)throw Y;var me=Ot(29,Y,null,T.mode);return me.lanes=j,me.return=T,me}}}var Di=Nh(!0),wh=Nh(!1),Yn=!1;function ho(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Vn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(e,t,i){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(_e&2)!==0){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Us(e),uh(e,null,i),t}return Ls(e,r,t,i),Us(e)}function ha(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,_d(e,i)}}function go(e,t){var i=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,i===r)){var o=null,u=null;if(i=i.firstBaseUpdate,i!==null){do{var h={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};u===null?o=u=h:u=u.next=h,i=i.next}while(i!==null);u===null?o=u=t:u=u.next=t}else o=u=t;i={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:r.shared,callbacks:r.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var po=!1;function ma(){if(po){var e=ul;if(e!==null)throw e}}function ga(e,t,i,r){po=!1;var o=e.updateQueue;Yn=!1;var u=o.firstBaseUpdate,h=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var x=y,w=x.next;x.next=null,h===null?u=w:h.next=w,h=x;var D=e.alternate;D!==null&&(D=D.updateQueue,y=D.lastBaseUpdate,y!==h&&(y===null?D.firstBaseUpdate=w:y.next=w,D.lastBaseUpdate=x))}if(u!==null){var z=o.baseState;h=0,D=w=x=null,y=u;do{var A=y.lane&-536870913,R=A!==y.lane;if(R?(se&A)===A:(r&A)===A){A!==0&&A===ol&&(po=!0),D!==null&&(D=D.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var q=e,X=y;A=t;var we=i;switch(X.tag){case 1:if(q=X.payload,typeof q=="function"){z=q.call(we,z,A);break e}z=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=X.payload,A=typeof q=="function"?q.call(we,z,A):q,A==null)break e;z=v({},z,A);break e;case 2:Yn=!0}}A=y.callback,A!==null&&(e.flags|=64,R&&(e.flags|=8192),R=o.callbacks,R===null?o.callbacks=[A]:R.push(A))}else R={lane:A,tag:y.tag,payload:y.payload,callback:y.callback,next:null},D===null?(w=D=R,x=z):D=D.next=R,h|=A;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;R=y,y=R.next,R.next=null,o.lastBaseUpdate=R,o.shared.pending=null}}while(!0);D===null&&(x=z),o.baseState=x,o.firstBaseUpdate=w,o.lastBaseUpdate=D,u===null&&(o.shared.lanes=0),Fn|=h,e.lanes=h,e.memoizedState=z}}function Ah(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Rh(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Ah(i[e],t)}var hl=C(null),Zs=C(0);function Mh(e,t){e=An,k(Zs,e),k(hl,t),An=e|t.baseLanes}function yo(){k(Zs,An),k(hl,hl.current)}function _o(){An=Zs.current,I(hl),I(Zs)}var jt=C(null),Kt=null;function Xn(e){var t=e.alternate;k(Ye,Ye.current&1),k(jt,e),Kt===null&&(t===null||hl.current!==null||t.memoizedState!==null)&&(Kt=e)}function vo(e){k(Ye,Ye.current),k(jt,e),Kt===null&&(Kt=e)}function Dh(e){e.tag===22?(k(Ye,Ye.current),k(jt,e),Kt===null&&(Kt=e)):Zn()}function Zn(){k(Ye,Ye.current),k(jt,jt.current)}function zt(e){I(jt),Kt===e&&(Kt=null),I(Ye)}var Ye=C(0);function Ks(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Tu(i)||Nu(i)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bn=0,$=null,Te=null,Xe=null,Ps=!1,ml=!1,Oi=!1,Fs=0,pa=0,gl=null,M0=0;function He(){throw Error(s(321))}function bo(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Dt(e[i],t[i]))return!1;return!0}function So(e,t,i,r,o,u){return bn=u,$=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=e===null||e.memoizedState===null?mm:Lo,Oi=!1,u=i(r,o),Oi=!1,ml&&(u=jh(t,i,r,o)),Oh(e),u}function Oh(e){O.H=va;var t=Te!==null&&Te.next!==null;if(bn=0,Xe=Te=$=null,Ps=!1,pa=0,gl=null,t)throw Error(s(300));e===null||Ze||(e=e.dependencies,e!==null&&ks(e)&&(Ze=!0))}function jh(e,t,i,r){$=e;var o=0;do{if(ml&&(gl=null),pa=0,ml=!1,25<=o)throw Error(s(301));if(o+=1,Xe=Te=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}O.H=gm,u=t(i,r)}while(ml);return u}function D0(){var e=O.H,t=e.useState()[0];return t=typeof t.then=="function"?ya(t):t,e=e.useState()[0],(Te!==null?Te.memoizedState:null)!==e&&($.flags|=1024),t}function xo(){var e=Fs!==0;return Fs=0,e}function Eo(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Co(e){if(Ps){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ps=!1}bn=0,Xe=Te=$=null,ml=!1,pa=Fs=0,gl=null}function gt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?$.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Ve(){if(Te===null){var e=$.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var t=Xe===null?$.memoizedState:Xe.next;if(t!==null)Xe=t,Te=e;else{if(e===null)throw $.alternate===null?Error(s(467)):Error(s(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Xe===null?$.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Js(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ya(e){var t=pa;return pa+=1,gl===null&&(gl=[]),e=Eh(gl,e,t),t=$,(Xe===null?t.memoizedState:Xe.next)===null&&(t=t.alternate,O.H=t===null||t.memoizedState===null?mm:Lo),e}function $s(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ya(e);if(e.$$typeof===fe)return st(e)}throw Error(s(438,String(e)))}function To(e){var t=null,i=$.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var r=$.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(t={data:r.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=Js(),$.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),r=0;r<e;r++)i[r]=ht;return t.index++,i}function Sn(e,t){return typeof t=="function"?t(e):t}function Ws(e){var t=Ve();return No(t,Te,e)}function No(e,t,i){var r=e.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=i;var o=e.baseQueue,u=r.pending;if(u!==null){if(o!==null){var h=o.next;o.next=u.next,u.next=h}t.baseQueue=o=u,r.pending=null}if(u=e.baseState,o===null)e.memoizedState=u;else{t=o.next;var y=h=null,x=null,w=t,D=!1;do{var z=w.lane&-536870913;if(z!==w.lane?(se&z)===z:(bn&z)===z){var A=w.revertLane;if(A===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),z===ol&&(D=!0);else if((bn&A)===A){w=w.next,A===ol&&(D=!0);continue}else z={lane:0,revertLane:w.revertLane,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},x===null?(y=x=z,h=u):x=x.next=z,$.lanes|=A,Fn|=A;z=w.action,Oi&&i(u,z),u=w.hasEagerState?w.eagerState:i(u,z)}else A={lane:z,revertLane:w.revertLane,gesture:w.gesture,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},x===null?(y=x=A,h=u):x=x.next=A,$.lanes|=z,Fn|=z;w=w.next}while(w!==null&&w!==t);if(x===null?h=u:x.next=y,!Dt(u,e.memoizedState)&&(Ze=!0,D&&(i=ul,i!==null)))throw i;e.memoizedState=u,e.baseState=h,e.baseQueue=x,r.lastRenderedState=u}return o===null&&(r.lanes=0),[e.memoizedState,r.dispatch]}function wo(e){var t=Ve(),i=t.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var r=i.dispatch,o=i.pending,u=t.memoizedState;if(o!==null){i.pending=null;var h=o=o.next;do u=e(u,h.action),h=h.next;while(h!==o);Dt(u,t.memoizedState)||(Ze=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),i.lastRenderedState=u}return[u,r]}function zh(e,t,i){var r=$,o=Ve(),u=ue;if(u){if(i===void 0)throw Error(s(407));i=i()}else i=t();var h=!Dt((Te||o).memoizedState,i);if(h&&(o.memoizedState=i,Ze=!0),o=o.queue,Mo(Uh.bind(null,r,o,e),[e]),o.getSnapshot!==t||h||Xe!==null&&Xe.memoizedState.tag&1){if(r.flags|=2048,pl(9,{destroy:void 0},Lh.bind(null,r,o,i,t),null),Me===null)throw Error(s(349));u||(bn&127)!==0||Ih(r,t,i)}return i}function Ih(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=$.updateQueue,t===null?(t=Js(),$.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Lh(e,t,i,r){t.value=i,t.getSnapshot=r,Hh(t)&&Bh(e)}function Uh(e,t,i){return i(function(){Hh(t)&&Bh(e)})}function Hh(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Dt(e,i)}catch{return!0}}function Bh(e){var t=Ei(e,2);t!==null&&Tt(t,e,2)}function Ao(e){var t=gt();if(typeof e=="function"){var i=e;if(e=i(),Oi){Ln(!0);try{i()}finally{Ln(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:e},t}function kh(e,t,i,r){return e.baseState=i,No(e,Te,typeof r=="function"?r:Sn)}function O0(e,t,i,r,o){if(nr(e))throw Error(s(485));if(e=t.action,e!==null){var u={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){u.listeners.push(h)}};O.T!==null?i(!0):u.isTransition=!1,r(u),i=t.pending,i===null?(u.next=t.pending=u,qh(t,u)):(u.next=i.next,t.pending=i.next=u)}}function qh(e,t){var i=t.action,r=t.payload,o=e.state;if(t.isTransition){var u=O.T,h={};O.T=h;try{var y=i(o,r),x=O.S;x!==null&&x(h,y),Gh(e,t,y)}catch(w){Ro(e,t,w)}finally{u!==null&&h.types!==null&&(u.types=h.types),O.T=u}}else try{u=i(o,r),Gh(e,t,u)}catch(w){Ro(e,t,w)}}function Gh(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(r){Yh(e,t,r)},function(r){return Ro(e,t,r)}):Yh(e,t,i)}function Yh(e,t,i){t.status="fulfilled",t.value=i,Vh(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,qh(e,i)))}function Ro(e,t,i){var r=e.pending;if(e.pending=null,r!==null){r=r.next;do t.status="rejected",t.reason=i,Vh(t),t=t.next;while(t!==r)}e.action=null}function Vh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Qh(e,t){return t}function Xh(e,t){if(ue){var i=Me.formState;if(i!==null){e:{var r=$;if(ue){if(Ie){t:{for(var o=Ie,u=Zt;o.nodeType!==8;){if(!u){o=null;break t}if(o=Pt(o.nextSibling),o===null){o=null;break t}}u=o.data,o=u==="F!"||u==="F"?o:null}if(o){Ie=Pt(o.nextSibling),r=o.data==="F!";break e}}qn(r)}r=!1}r&&(t=i[0])}}return i=gt(),i.memoizedState=i.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qh,lastRenderedState:t},i.queue=r,i=fm.bind(null,$,r),r.dispatch=i,r=Ao(!1),u=Io.bind(null,$,!1,r.queue),r=gt(),o={state:t,dispatch:null,action:e,pending:null},r.queue=o,i=O0.bind(null,$,o,u,i),o.dispatch=i,r.memoizedState=e,[t,i,!1]}function Zh(e){var t=Ve();return Kh(t,Te,e)}function Kh(e,t,i){if(t=No(e,t,Qh)[0],e=Ws(Sn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var r=ya(t)}catch(h){throw h===fl?Ys:h}else r=t;t=Ve();var o=t.queue,u=o.dispatch;return i!==t.memoizedState&&($.flags|=2048,pl(9,{destroy:void 0},j0.bind(null,o,i),null)),[r,u,e]}function j0(e,t){e.action=t}function Ph(e){var t=Ve(),i=Te;if(i!==null)return Kh(t,i,e);Ve(),t=t.memoizedState,i=Ve();var r=i.queue.dispatch;return i.memoizedState=e,[t,r,!1]}function pl(e,t,i,r){return e={tag:e,create:i,deps:r,inst:t,next:null},t=$.updateQueue,t===null&&(t=Js(),$.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e),e}function Fh(){return Ve().memoizedState}function er(e,t,i,r){var o=gt();$.flags|=e,o.memoizedState=pl(1|t,{destroy:void 0},i,r===void 0?null:r)}function tr(e,t,i,r){var o=Ve();r=r===void 0?null:r;var u=o.memoizedState.inst;Te!==null&&r!==null&&bo(r,Te.memoizedState.deps)?o.memoizedState=pl(t,u,i,r):($.flags|=e,o.memoizedState=pl(1|t,u,i,r))}function Jh(e,t){er(8390656,8,e,t)}function Mo(e,t){tr(2048,8,e,t)}function z0(e){$.flags|=4;var t=$.updateQueue;if(t===null)t=Js(),$.updateQueue=t,t.events=[e];else{var i=t.events;i===null?t.events=[e]:i.push(e)}}function $h(e){var t=Ve().memoizedState;return z0({ref:t,nextImpl:e}),function(){if((_e&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Wh(e,t){return tr(4,2,e,t)}function em(e,t){return tr(4,4,e,t)}function tm(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nm(e,t,i){i=i!=null?i.concat([e]):null,tr(4,4,tm.bind(null,t,e),i)}function Do(){}function im(e,t){var i=Ve();t=t===void 0?null:t;var r=i.memoizedState;return t!==null&&bo(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function lm(e,t){var i=Ve();t=t===void 0?null:t;var r=i.memoizedState;if(t!==null&&bo(t,r[1]))return r[0];if(r=e(),Oi){Ln(!0);try{e()}finally{Ln(!1)}}return i.memoizedState=[r,t],r}function Oo(e,t,i){return i===void 0||(bn&1073741824)!==0&&(se&261930)===0?e.memoizedState=t:(e.memoizedState=i,e=ag(),$.lanes|=e,Fn|=e,i)}function am(e,t,i,r){return Dt(i,t)?i:hl.current!==null?(e=Oo(e,i,r),Dt(e,t)||(Ze=!0),e):(bn&42)===0||(bn&1073741824)!==0&&(se&261930)===0?(Ze=!0,e.memoizedState=i):(e=ag(),$.lanes|=e,Fn|=e,t)}function sm(e,t,i,r,o){var u=B.p;B.p=u!==0&&8>u?u:8;var h=O.T,y={};O.T=y,Io(e,!1,t,i);try{var x=o(),w=O.S;if(w!==null&&w(y,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var D=R0(x,r);_a(e,t,D,Ut(e))}else _a(e,t,r,Ut(e))}catch(z){_a(e,t,{then:function(){},status:"rejected",reason:z},Ut())}finally{B.p=u,h!==null&&y.types!==null&&(h.types=y.types),O.T=h}}function I0(){}function jo(e,t,i,r){if(e.tag!==5)throw Error(s(476));var o=rm(e).queue;sm(e,o,t,K,i===null?I0:function(){return cm(e),i(r)})}function rm(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:K},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sn,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function cm(e){var t=rm(e);t.next===null&&(t=e.alternate.memoizedState),_a(e,t.next.queue,{},Ut())}function zo(){return st(Ia)}function om(){return Ve().memoizedState}function um(){return Ve().memoizedState}function L0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Ut();e=Vn(i);var r=Qn(t,e,i);r!==null&&(Tt(r,t,i),ha(r,t,i)),t={cache:co()},e.payload=t;return}t=t.return}}function U0(e,t,i){var r=Ut();i={lane:r,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},nr(e)?dm(t,i):(i=Jc(e,t,i,r),i!==null&&(Tt(i,e,r),hm(i,t,r)))}function fm(e,t,i){var r=Ut();_a(e,t,i,r)}function _a(e,t,i,r){var o={lane:r,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(nr(e))dm(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,y=u(h,i);if(o.hasEagerState=!0,o.eagerState=y,Dt(y,h))return Ls(e,t,o,0),Me===null&&Is(),!1}catch{}if(i=Jc(e,t,o,r),i!==null)return Tt(i,e,r),hm(i,t,r),!0}return!1}function Io(e,t,i,r){if(r={lane:2,revertLane:hu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},nr(e)){if(t)throw Error(s(479))}else t=Jc(e,i,r,2),t!==null&&Tt(t,e,2)}function nr(e){var t=e.alternate;return e===$||t!==null&&t===$}function dm(e,t){ml=Ps=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function hm(e,t,i){if((i&4194048)!==0){var r=t.lanes;r&=e.pendingLanes,i|=r,t.lanes=i,_d(e,i)}}var va={readContext:st,use:$s,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};va.useEffectEvent=He;var mm={readContext:st,use:$s,useCallback:function(e,t){return gt().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:Jh,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,er(4194308,4,tm.bind(null,t,e),i)},useLayoutEffect:function(e,t){return er(4194308,4,e,t)},useInsertionEffect:function(e,t){er(4,2,e,t)},useMemo:function(e,t){var i=gt();t=t===void 0?null:t;var r=e();if(Oi){Ln(!0);try{e()}finally{Ln(!1)}}return i.memoizedState=[r,t],r},useReducer:function(e,t,i){var r=gt();if(i!==void 0){var o=i(t);if(Oi){Ln(!0);try{i(t)}finally{Ln(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=U0.bind(null,$,e),[r.memoizedState,e]},useRef:function(e){var t=gt();return e={current:e},t.memoizedState=e},useState:function(e){e=Ao(e);var t=e.queue,i=fm.bind(null,$,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Do,useDeferredValue:function(e,t){var i=gt();return Oo(i,e,t)},useTransition:function(){var e=Ao(!1);return e=sm.bind(null,$,e.queue,!0,!1),gt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var r=$,o=gt();if(ue){if(i===void 0)throw Error(s(407));i=i()}else{if(i=t(),Me===null)throw Error(s(349));(se&127)!==0||Ih(r,t,i)}o.memoizedState=i;var u={value:i,getSnapshot:t};return o.queue=u,Jh(Uh.bind(null,r,u,e),[e]),r.flags|=2048,pl(9,{destroy:void 0},Lh.bind(null,r,u,i,t),null),i},useId:function(){var e=gt(),t=Me.identifierPrefix;if(ue){var i=cn,r=rn;i=(r&~(1<<32-Mt(r)-1)).toString(32)+i,t="_"+t+"R_"+i,i=Fs++,0<i&&(t+="H"+i.toString(32)),t+="_"}else i=M0++,t="_"+t+"r_"+i.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:zo,useFormState:Xh,useActionState:Xh,useOptimistic:function(e){var t=gt();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Io.bind(null,$,!0,i),i.dispatch=t,[e,t]},useMemoCache:To,useCacheRefresh:function(){return gt().memoizedState=L0.bind(null,$)},useEffectEvent:function(e){var t=gt(),i={impl:e};return t.memoizedState=i,function(){if((_e&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Lo={readContext:st,use:$s,useCallback:im,useContext:st,useEffect:Mo,useImperativeHandle:nm,useInsertionEffect:Wh,useLayoutEffect:em,useMemo:lm,useReducer:Ws,useRef:Fh,useState:function(){return Ws(Sn)},useDebugValue:Do,useDeferredValue:function(e,t){var i=Ve();return am(i,Te.memoizedState,e,t)},useTransition:function(){var e=Ws(Sn)[0],t=Ve().memoizedState;return[typeof e=="boolean"?e:ya(e),t]},useSyncExternalStore:zh,useId:om,useHostTransitionStatus:zo,useFormState:Zh,useActionState:Zh,useOptimistic:function(e,t){var i=Ve();return kh(i,Te,e,t)},useMemoCache:To,useCacheRefresh:um};Lo.useEffectEvent=$h;var gm={readContext:st,use:$s,useCallback:im,useContext:st,useEffect:Mo,useImperativeHandle:nm,useInsertionEffect:Wh,useLayoutEffect:em,useMemo:lm,useReducer:wo,useRef:Fh,useState:function(){return wo(Sn)},useDebugValue:Do,useDeferredValue:function(e,t){var i=Ve();return Te===null?Oo(i,e,t):am(i,Te.memoizedState,e,t)},useTransition:function(){var e=wo(Sn)[0],t=Ve().memoizedState;return[typeof e=="boolean"?e:ya(e),t]},useSyncExternalStore:zh,useId:om,useHostTransitionStatus:zo,useFormState:Ph,useActionState:Ph,useOptimistic:function(e,t){var i=Ve();return Te!==null?kh(i,Te,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:To,useCacheRefresh:um};gm.useEffectEvent=$h;function Uo(e,t,i,r){t=e.memoizedState,i=i(r,t),i=i==null?t:v({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Ho={enqueueSetState:function(e,t,i){e=e._reactInternals;var r=Ut(),o=Vn(r);o.payload=t,i!=null&&(o.callback=i),t=Qn(e,o,r),t!==null&&(Tt(t,e,r),ha(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=Ut(),o=Vn(r);o.tag=1,o.payload=t,i!=null&&(o.callback=i),t=Qn(e,o,r),t!==null&&(Tt(t,e,r),ha(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Ut(),r=Vn(i);r.tag=2,t!=null&&(r.callback=t),t=Qn(e,r,i),t!==null&&(Tt(t,e,i),ha(t,e,i))}};function pm(e,t,i,r,o,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,h):t.prototype&&t.prototype.isPureReactComponent?!aa(i,r)||!aa(o,u):!0}function ym(e,t,i,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&Ho.enqueueReplaceState(t,t.state,null)}function ji(e,t){var i=t;if("ref"in t){i={};for(var r in t)r!=="ref"&&(i[r]=t[r])}if(e=e.defaultProps){i===t&&(i=v({},i));for(var o in e)i[o]===void 0&&(i[o]=e[o])}return i}function _m(e){zs(e)}function vm(e){console.error(e)}function bm(e){zs(e)}function ir(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Sm(e,t,i){try{var r=e.onCaughtError;r(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Bo(e,t,i){return i=Vn(i),i.tag=3,i.payload={element:null},i.callback=function(){ir(e,t)},i}function xm(e){return e=Vn(e),e.tag=3,e}function Em(e,t,i,r){var o=i.type.getDerivedStateFromError;if(typeof o=="function"){var u=r.value;e.payload=function(){return o(u)},e.callback=function(){Sm(t,i,r)}}var h=i.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){Sm(t,i,r),typeof o!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var y=r.stack;this.componentDidCatch(r.value,{componentStack:y!==null?y:""})})}function H0(e,t,i,r,o){if(i.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(t=i.alternate,t!==null&&cl(t,i,o,!0),i=jt.current,i!==null){switch(i.tag){case 31:case 13:return Kt===null?gr():i.alternate===null&&Be===0&&(Be=3),i.flags&=-257,i.flags|=65536,i.lanes=o,r===Vs?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([r]):t.add(r),uu(e,r,o)),!1;case 22:return i.flags|=65536,r===Vs?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([r]):i.add(r)),uu(e,r,o)),!1}throw Error(s(435,i.tag))}return uu(e,r,o),gr(),!1}if(ue)return t=jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==io&&(e=Error(s(422),{cause:r}),ca(Vt(e,i)))):(r!==io&&(t=Error(s(423),{cause:r}),ca(Vt(t,i))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,r=Vt(r,i),o=Bo(e.stateNode,r,o),go(e,o),Be!==4&&(Be=2)),!1;var u=Error(s(520),{cause:r});if(u=Vt(u,i),wa===null?wa=[u]:wa.push(u),Be!==4&&(Be=2),t===null)return!0;r=Vt(r,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=o&-o,i.lanes|=e,e=Bo(i.stateNode,r,e),go(i,e),!1;case 1:if(t=i.type,u=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Jn===null||!Jn.has(u))))return i.flags|=65536,o&=-o,i.lanes|=o,o=xm(o),Em(o,e,i,r),go(i,o),!1}i=i.return}while(i!==null);return!1}var ko=Error(s(461)),Ze=!1;function rt(e,t,i,r){t.child=e===null?wh(t,null,i,r):Di(t,e.child,i,r)}function Cm(e,t,i,r,o){i=i.render;var u=t.ref;if("ref"in r){var h={};for(var y in r)y!=="ref"&&(h[y]=r[y])}else h=r;return wi(t),r=So(e,t,i,h,u,o),y=xo(),e!==null&&!Ze?(Eo(e,t,o),xn(e,t,o)):(ue&&y&&to(t),t.flags|=1,rt(e,t,r,o),t.child)}function Tm(e,t,i,r,o){if(e===null){var u=i.type;return typeof u=="function"&&!$c(u)&&u.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=u,Nm(e,t,u,r,o)):(e=Hs(i.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Ko(e,o)){var h=u.memoizedProps;if(i=i.compare,i=i!==null?i:aa,i(h,r)&&e.ref===t.ref)return xn(e,t,o)}return t.flags|=1,e=pn(u,r),e.ref=t.ref,e.return=t,t.child=e}function Nm(e,t,i,r,o){if(e!==null){var u=e.memoizedProps;if(aa(u,r)&&e.ref===t.ref)if(Ze=!1,t.pendingProps=r=u,Ko(e,o))(e.flags&131072)!==0&&(Ze=!0);else return t.lanes=e.lanes,xn(e,t,o)}return qo(e,t,i,r,o)}function wm(e,t,i,r){var o=r.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|i:i,e!==null){for(r=t.child=e.child,o=0;r!==null;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~u}else r=0,t.child=null;return Am(e,t,u,i,r)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Gs(t,u!==null?u.cachePool:null),u!==null?Mh(t,u):yo(),Dh(t);else return r=t.lanes=536870912,Am(e,t,u!==null?u.baseLanes|i:i,i,r)}else u!==null?(Gs(t,u.cachePool),Mh(t,u),Zn(),t.memoizedState=null):(e!==null&&Gs(t,null),yo(),Zn());return rt(e,t,o,i),t.child}function ba(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Am(e,t,i,r,o){var u=uo();return u=u===null?null:{parent:Qe._currentValue,pool:u},t.memoizedState={baseLanes:i,cachePool:u},e!==null&&Gs(t,null),yo(),Dh(t),e!==null&&cl(e,t,r,!0),t.childLanes=o,null}function lr(e,t){return t=sr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Rm(e,t,i){return Di(t,e.child,null,i),e=lr(t,t.pendingProps),e.flags|=2,zt(t),t.memoizedState=null,e}function B0(e,t,i){var r=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ue){if(r.mode==="hidden")return e=lr(t,r),t.lanes=536870912,ba(null,e);if(vo(t),(e=Ie)?(e=qg(e,Zt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Bn!==null?{id:rn,overflow:cn}:null,retryLane:536870912,hydrationErrors:null},i=dh(e),i.return=t,t.child=i,at=t,Ie=null)):e=null,e===null)throw qn(t);return t.lanes=536870912,null}return lr(t,r)}var u=e.memoizedState;if(u!==null){var h=u.dehydrated;if(vo(t),o)if(t.flags&256)t.flags&=-257,t=Rm(e,t,i);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Ze||cl(e,t,i,!1),o=(i&e.childLanes)!==0,Ze||o){if(r=Me,r!==null&&(h=vd(r,i),h!==0&&h!==u.retryLane))throw u.retryLane=h,Ei(e,h),Tt(r,e,h),ko;gr(),t=Rm(e,t,i)}else e=u.treeContext,Ie=Pt(h.nextSibling),at=t,ue=!0,kn=null,Zt=!1,e!==null&&gh(t,e),t=lr(t,r),t.flags|=4096;return t}return e=pn(e.child,{mode:r.mode,children:r.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ar(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function qo(e,t,i,r,o){return wi(t),i=So(e,t,i,r,void 0,o),r=xo(),e!==null&&!Ze?(Eo(e,t,o),xn(e,t,o)):(ue&&r&&to(t),t.flags|=1,rt(e,t,i,o),t.child)}function Mm(e,t,i,r,o,u){return wi(t),t.updateQueue=null,i=jh(t,r,i,o),Oh(e),r=xo(),e!==null&&!Ze?(Eo(e,t,u),xn(e,t,u)):(ue&&r&&to(t),t.flags|=1,rt(e,t,i,u),t.child)}function Dm(e,t,i,r,o){if(wi(t),t.stateNode===null){var u=ll,h=i.contextType;typeof h=="object"&&h!==null&&(u=st(h)),u=new i(r,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Ho,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=r,u.state=t.memoizedState,u.refs={},ho(t),h=i.contextType,u.context=typeof h=="object"&&h!==null?st(h):ll,u.state=t.memoizedState,h=i.getDerivedStateFromProps,typeof h=="function"&&(Uo(t,i,h,r),u.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(h=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),h!==u.state&&Ho.enqueueReplaceState(u,u.state,null),ga(t,r,u,o),ma(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!0}else if(e===null){u=t.stateNode;var y=t.memoizedProps,x=ji(i,y);u.props=x;var w=u.context,D=i.contextType;h=ll,typeof D=="object"&&D!==null&&(h=st(D));var z=i.getDerivedStateFromProps;D=typeof z=="function"||typeof u.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,D||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(y||w!==h)&&ym(t,u,r,h),Yn=!1;var A=t.memoizedState;u.state=A,ga(t,r,u,o),ma(),w=t.memoizedState,y||A!==w||Yn?(typeof z=="function"&&(Uo(t,i,z,r),w=t.memoizedState),(x=Yn||pm(t,i,x,r,A,w,h))?(D||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=w),u.props=r,u.state=w,u.context=h,r=x):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{u=t.stateNode,mo(e,t),h=t.memoizedProps,D=ji(i,h),u.props=D,z=t.pendingProps,A=u.context,w=i.contextType,x=ll,typeof w=="object"&&w!==null&&(x=st(w)),y=i.getDerivedStateFromProps,(w=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==z||A!==x)&&ym(t,u,r,x),Yn=!1,A=t.memoizedState,u.state=A,ga(t,r,u,o),ma();var R=t.memoizedState;h!==z||A!==R||Yn||e!==null&&e.dependencies!==null&&ks(e.dependencies)?(typeof y=="function"&&(Uo(t,i,y,r),R=t.memoizedState),(D=Yn||pm(t,i,D,r,A,R,x)||e!==null&&e.dependencies!==null&&ks(e.dependencies))?(w||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,R,x),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,R,x)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=R),u.props=r,u.state=R,u.context=x,r=D):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),r=!1)}return u=r,ar(e,t),r=(t.flags&128)!==0,u||r?(u=t.stateNode,i=r&&typeof i.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&r?(t.child=Di(t,e.child,null,o),t.child=Di(t,null,i,o)):rt(e,t,i,o),t.memoizedState=u.state,e=t.child):e=xn(e,t,o),e}function Om(e,t,i,r){return Ti(),t.flags|=256,rt(e,t,i,r),t.child}var Go={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yo(e){return{baseLanes:e,cachePool:Sh()}}function Vo(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=Lt),e}function jm(e,t,i){var r=t.pendingProps,o=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(Ye.current&2)!==0),h&&(o=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(ue){if(o?Xn(t):Zn(),(e=Ie)?(e=qg(e,Zt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Bn!==null?{id:rn,overflow:cn}:null,retryLane:536870912,hydrationErrors:null},i=dh(e),i.return=t,t.child=i,at=t,Ie=null)):e=null,e===null)throw qn(t);return Nu(e)?t.lanes=32:t.lanes=536870912,null}var y=r.children;return r=r.fallback,o?(Zn(),o=t.mode,y=sr({mode:"hidden",children:y},o),r=Ci(r,o,i,null),y.return=t,r.return=t,y.sibling=r,t.child=y,r=t.child,r.memoizedState=Yo(i),r.childLanes=Vo(e,h,i),t.memoizedState=Go,ba(null,r)):(Xn(t),Qo(t,y))}var x=e.memoizedState;if(x!==null&&(y=x.dehydrated,y!==null)){if(u)t.flags&256?(Xn(t),t.flags&=-257,t=Xo(e,t,i)):t.memoizedState!==null?(Zn(),t.child=e.child,t.flags|=128,t=null):(Zn(),y=r.fallback,o=t.mode,r=sr({mode:"visible",children:r.children},o),y=Ci(y,o,i,null),y.flags|=2,r.return=t,y.return=t,r.sibling=y,t.child=r,Di(t,e.child,null,i),r=t.child,r.memoizedState=Yo(i),r.childLanes=Vo(e,h,i),t.memoizedState=Go,t=ba(null,r));else if(Xn(t),Nu(y)){if(h=y.nextSibling&&y.nextSibling.dataset,h)var w=h.dgst;h=w,r=Error(s(419)),r.stack="",r.digest=h,ca({value:r,source:null,stack:null}),t=Xo(e,t,i)}else if(Ze||cl(e,t,i,!1),h=(i&e.childLanes)!==0,Ze||h){if(h=Me,h!==null&&(r=vd(h,i),r!==0&&r!==x.retryLane))throw x.retryLane=r,Ei(e,r),Tt(h,e,r),ko;Tu(y)||gr(),t=Xo(e,t,i)}else Tu(y)?(t.flags|=192,t.child=e.child,t=null):(e=x.treeContext,Ie=Pt(y.nextSibling),at=t,ue=!0,kn=null,Zt=!1,e!==null&&gh(t,e),t=Qo(t,r.children),t.flags|=4096);return t}return o?(Zn(),y=r.fallback,o=t.mode,x=e.child,w=x.sibling,r=pn(x,{mode:"hidden",children:r.children}),r.subtreeFlags=x.subtreeFlags&65011712,w!==null?y=pn(w,y):(y=Ci(y,o,i,null),y.flags|=2),y.return=t,r.return=t,r.sibling=y,t.child=r,ba(null,r),r=t.child,y=e.child.memoizedState,y===null?y=Yo(i):(o=y.cachePool,o!==null?(x=Qe._currentValue,o=o.parent!==x?{parent:x,pool:x}:o):o=Sh(),y={baseLanes:y.baseLanes|i,cachePool:o}),r.memoizedState=y,r.childLanes=Vo(e,h,i),t.memoizedState=Go,ba(e.child,r)):(Xn(t),i=e.child,e=i.sibling,i=pn(i,{mode:"visible",children:r.children}),i.return=t,i.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=i,t.memoizedState=null,i)}function Qo(e,t){return t=sr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function sr(e,t){return e=Ot(22,e,null,t),e.lanes=0,e}function Xo(e,t,i){return Di(t,e.child,null,i),e=Qo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zm(e,t,i){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),so(e.return,t,i)}function Zo(e,t,i,r,o,u){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:o,treeForkCount:u}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=r,h.tail=i,h.tailMode=o,h.treeForkCount=u)}function Im(e,t,i){var r=t.pendingProps,o=r.revealOrder,u=r.tail;r=r.children;var h=Ye.current,y=(h&2)!==0;if(y?(h=h&1|2,t.flags|=128):h&=1,k(Ye,h),rt(e,t,r,i),r=ue?ra:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zm(e,i,t);else if(e.tag===19)zm(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(i=t.child,o=null;i!==null;)e=i.alternate,e!==null&&Ks(e)===null&&(o=i),i=i.sibling;i=o,i===null?(o=t.child,t.child=null):(o=i.sibling,i.sibling=null),Zo(t,!1,o,i,u,r);break;case"backwards":case"unstable_legacy-backwards":for(i=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Ks(e)===null){t.child=o;break}e=o.sibling,o.sibling=i,i=o,o=e}Zo(t,!0,i,null,u,r);break;case"together":Zo(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function xn(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(cl(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,i=pn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=pn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Ko(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ks(e)))}function k0(e,t,i){switch(t.tag){case 3:mt(t,t.stateNode.containerInfo),Gn(t,Qe,e.memoizedState.cache),Ti();break;case 27:case 5:Xl(t);break;case 4:mt(t,t.stateNode.containerInfo);break;case 10:Gn(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,vo(t),null;break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Xn(t),t.flags|=128,null):(i&t.child.childLanes)!==0?jm(e,t,i):(Xn(t),e=xn(e,t,i),e!==null?e.sibling:null);Xn(t);break;case 19:var o=(e.flags&128)!==0;if(r=(i&t.childLanes)!==0,r||(cl(e,t,i,!1),r=(i&t.childLanes)!==0),o){if(r)return Im(e,t,i);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),k(Ye,Ye.current),r)break;return null;case 22:return t.lanes=0,wm(e,t,i,t.pendingProps);case 24:Gn(t,Qe,e.memoizedState.cache)}return xn(e,t,i)}function Lm(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ze=!0;else{if(!Ko(e,i)&&(t.flags&128)===0)return Ze=!1,k0(e,t,i);Ze=(e.flags&131072)!==0}else Ze=!1,ue&&(t.flags&1048576)!==0&&mh(t,ra,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=Ri(t.elementType),t.type=e,typeof e=="function")$c(e)?(r=ji(e,r),t.tag=1,t=Dm(null,t,e,r,i)):(t.tag=0,t=qo(null,t,e,r,i));else{if(e!=null){var o=e.$$typeof;if(o===ye){t.tag=11,t=Cm(null,t,e,r,i);break e}else if(o===P){t.tag=14,t=Tm(null,t,e,r,i);break e}}throw t=_t(e)||e,Error(s(306,t,""))}}return t;case 0:return qo(e,t,t.type,t.pendingProps,i);case 1:return r=t.type,o=ji(r,t.pendingProps),Dm(e,t,r,o,i);case 3:e:{if(mt(t,t.stateNode.containerInfo),e===null)throw Error(s(387));r=t.pendingProps;var u=t.memoizedState;o=u.element,mo(e,t),ga(t,r,null,i);var h=t.memoizedState;if(r=h.cache,Gn(t,Qe,r),r!==u.cache&&ro(t,[Qe],i,!0),ma(),r=h.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Om(e,t,r,i);break e}else if(r!==o){o=Vt(Error(s(424)),t),ca(o),t=Om(e,t,r,i);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Ie=Pt(e.firstChild),at=t,ue=!0,kn=null,Zt=!0,i=wh(t,null,r,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ti(),r===o){t=xn(e,t,i);break e}rt(e,t,r,i)}t=t.child}return t;case 26:return ar(e,t),e===null?(i=Zg(t.type,null,t.pendingProps,null))?t.memoizedState=i:ue||(i=t.type,e=t.pendingProps,r=xr(ne.current).createElement(i),r[lt]=t,r[vt]=e,ct(r,i,e),We(r),t.stateNode=r):t.memoizedState=Zg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Xl(t),e===null&&ue&&(r=t.stateNode=Vg(t.type,t.pendingProps,ne.current),at=t,Zt=!0,o=Ie,ti(t.type)?(wu=o,Ie=Pt(r.firstChild)):Ie=o),rt(e,t,t.pendingProps.children,i),ar(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ue&&((o=r=Ie)&&(r=pb(r,t.type,t.pendingProps,Zt),r!==null?(t.stateNode=r,at=t,Ie=Pt(r.firstChild),Zt=!1,o=!0):o=!1),o||qn(t)),Xl(t),o=t.type,u=t.pendingProps,h=e!==null?e.memoizedProps:null,r=u.children,xu(o,u)?r=null:h!==null&&xu(o,h)&&(t.flags|=32),t.memoizedState!==null&&(o=So(e,t,D0,null,null,i),Ia._currentValue=o),ar(e,t),rt(e,t,r,i),t.child;case 6:return e===null&&ue&&((e=i=Ie)&&(i=yb(i,t.pendingProps,Zt),i!==null?(t.stateNode=i,at=t,Ie=null,e=!0):e=!1),e||qn(t)),null;case 13:return jm(e,t,i);case 4:return mt(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Di(t,null,r,i):rt(e,t,r,i),t.child;case 11:return Cm(e,t,t.type,t.pendingProps,i);case 7:return rt(e,t,t.pendingProps,i),t.child;case 8:return rt(e,t,t.pendingProps.children,i),t.child;case 12:return rt(e,t,t.pendingProps.children,i),t.child;case 10:return r=t.pendingProps,Gn(t,t.type,r.value),rt(e,t,r.children,i),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,wi(t),o=st(o),r=r(o),t.flags|=1,rt(e,t,r,i),t.child;case 14:return Tm(e,t,t.type,t.pendingProps,i);case 15:return Nm(e,t,t.type,t.pendingProps,i);case 19:return Im(e,t,i);case 31:return B0(e,t,i);case 22:return wm(e,t,i,t.pendingProps);case 24:return wi(t),r=st(Qe),e===null?(o=uo(),o===null&&(o=Me,u=co(),o.pooledCache=u,u.refCount++,u!==null&&(o.pooledCacheLanes|=i),o=u),t.memoizedState={parent:r,cache:o},ho(t),Gn(t,Qe,o)):((e.lanes&i)!==0&&(mo(e,t),ga(t,null,null,i),ma()),o=e.memoizedState,u=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Gn(t,Qe,r)):(r=u.cache,Gn(t,Qe,r),r!==o.cache&&ro(t,[Qe],i,!0))),rt(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function En(e){e.flags|=4}function Po(e,t,i,r,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(og())e.flags|=8192;else throw Mi=Vs,fo}else e.flags&=-16777217}function Um(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!$g(t))if(og())e.flags|=8192;else throw Mi=Vs,fo}function rr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?pd():536870912,e.lanes|=t,bl|=t)}function Sa(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Le(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,r=0;if(t)for(var o=e.child;o!==null;)i|=o.lanes|o.childLanes,r|=o.subtreeFlags&65011712,r|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)i|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function q0(e,t,i){var r=t.pendingProps;switch(no(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(t),null;case 1:return Le(t),null;case 3:return i=t.stateNode,r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),vn(Qe),Ge(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(rl(t)?En(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,lo())),Le(t),null;case 26:var o=t.type,u=t.memoizedState;return e===null?(En(t),u!==null?(Le(t),Um(t,u)):(Le(t),Po(t,o,null,r,i))):u?u!==e.memoizedState?(En(t),Le(t),Um(t,u)):(Le(t),t.flags&=-16777217):(e=e.memoizedProps,e!==r&&En(t),Le(t),Po(t,o,e,r,i)),null;case 27:if(_s(t),i=ne.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&En(t);else{if(!r){if(t.stateNode===null)throw Error(s(166));return Le(t),null}e=G.current,rl(t)?ph(t):(e=Vg(o,r,i),t.stateNode=e,En(t))}return Le(t),null;case 5:if(_s(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==r&&En(t);else{if(!r){if(t.stateNode===null)throw Error(s(166));return Le(t),null}if(u=G.current,rl(t))ph(t);else{var h=xr(ne.current);switch(u){case 1:u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":u=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":u=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":u=h.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof r.is=="string"?h.createElement("select",{is:r.is}):h.createElement("select"),r.multiple?u.multiple=!0:r.size&&(u.size=r.size);break;default:u=typeof r.is=="string"?h.createElement(o,{is:r.is}):h.createElement(o)}}u[lt]=t,u[vt]=r;e:for(h=t.child;h!==null;){if(h.tag===5||h.tag===6)u.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}t.stateNode=u;e:switch(ct(u,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&En(t)}}return Le(t),Po(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,i),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==r&&En(t);else{if(typeof r!="string"&&t.stateNode===null)throw Error(s(166));if(e=ne.current,rl(t)){if(e=t.stateNode,i=t.memoizedProps,r=null,o=at,o!==null)switch(o.tag){case 27:case 5:r=o.memoizedProps}e[lt]=t,e=!!(e.nodeValue===i||r!==null&&r.suppressHydrationWarning===!0||jg(e.nodeValue,i)),e||qn(t,!0)}else e=xr(e).createTextNode(r),e[lt]=t,t.stateNode=e}return Le(t),null;case 31:if(i=t.memoizedState,e===null||e.memoizedState!==null){if(r=rl(t),i!==null){if(e===null){if(!r)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[lt]=t}else Ti(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),e=!1}else i=lo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return t.flags&256?(zt(t),t):(zt(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Le(t),null;case 13:if(r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=rl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(s(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));o[lt]=t}else Ti(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Le(t),o=!1}else o=lo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(zt(t),t):(zt(t),null)}return zt(t),(t.flags&128)!==0?(t.lanes=i,t):(i=r!==null,e=e!==null&&e.memoizedState!==null,i&&(r=t.child,o=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(o=r.alternate.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==o&&(r.flags|=2048)),i!==e&&i&&(t.child.flags|=8192),rr(t,t.updateQueue),Le(t),null);case 4:return Ge(),e===null&&yu(t.stateNode.containerInfo),Le(t),null;case 10:return vn(t.type),Le(t),null;case 19:if(I(Ye),r=t.memoizedState,r===null)return Le(t),null;if(o=(t.flags&128)!==0,u=r.rendering,u===null)if(o)Sa(r,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Ks(e),u!==null){for(t.flags|=128,Sa(r,!1),e=u.updateQueue,t.updateQueue=e,rr(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)fh(i,e),i=i.sibling;return k(Ye,Ye.current&1|2),ue&&yn(t,r.treeForkCount),t.child}e=e.sibling}r.tail!==null&&At()>dr&&(t.flags|=128,o=!0,Sa(r,!1),t.lanes=4194304)}else{if(!o)if(e=Ks(u),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,rr(t,e),Sa(r,!0),r.tail===null&&r.tailMode==="hidden"&&!u.alternate&&!ue)return Le(t),null}else 2*At()-r.renderingStartTime>dr&&i!==536870912&&(t.flags|=128,o=!0,Sa(r,!1),t.lanes=4194304);r.isBackwards?(u.sibling=t.child,t.child=u):(e=r.last,e!==null?e.sibling=u:t.child=u,r.last=u)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=At(),e.sibling=null,i=Ye.current,k(Ye,o?i&1|2:i&1),ue&&yn(t,r.treeForkCount),e):(Le(t),null);case 22:case 23:return zt(t),_o(),r=t.memoizedState!==null,e!==null?e.memoizedState!==null!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?(i&536870912)!==0&&(t.flags&128)===0&&(Le(t),t.subtreeFlags&6&&(t.flags|=8192)):Le(t),i=t.updateQueue,i!==null&&rr(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),r=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),r!==i&&(t.flags|=2048),e!==null&&I(Ai),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),vn(Qe),Le(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function G0(e,t){switch(no(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vn(Qe),Ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return _s(t),null;case 31:if(t.memoizedState!==null){if(zt(t),t.alternate===null)throw Error(s(340));Ti()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(zt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Ti()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(Ye),null;case 4:return Ge(),null;case 10:return vn(t.type),null;case 22:case 23:return zt(t),_o(),e!==null&&I(Ai),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return vn(Qe),null;case 25:return null;default:return null}}function Hm(e,t){switch(no(t),t.tag){case 3:vn(Qe),Ge();break;case 26:case 27:case 5:_s(t);break;case 4:Ge();break;case 31:t.memoizedState!==null&&zt(t);break;case 13:zt(t);break;case 19:I(Ye);break;case 10:vn(t.type);break;case 22:case 23:zt(t),_o(),e!==null&&I(Ai);break;case 24:vn(Qe)}}function xa(e,t){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var o=r.next;i=o;do{if((i.tag&e)===e){r=void 0;var u=i.create,h=i.inst;r=u(),h.destroy=r}i=i.next}while(i!==o)}}catch(y){Ee(t,t.return,y)}}function Kn(e,t,i){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var u=o.next;r=u;do{if((r.tag&e)===e){var h=r.inst,y=h.destroy;if(y!==void 0){h.destroy=void 0,o=t;var x=i,w=y;try{w()}catch(D){Ee(o,x,D)}}}r=r.next}while(r!==u)}}catch(D){Ee(t,t.return,D)}}function Bm(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{Rh(t,i)}catch(r){Ee(e,e.return,r)}}}function km(e,t,i){i.props=ji(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){Ee(e,t,r)}}function Ea(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;case 30:r=e.stateNode;break;default:r=e.stateNode}typeof i=="function"?e.refCleanup=i(r):i.current=r}}catch(o){Ee(e,t,o)}}function on(e,t){var i=e.ref,r=e.refCleanup;if(i!==null)if(typeof r=="function")try{r()}catch(o){Ee(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(o){Ee(e,t,o)}else i.current=null}function qm(e){var t=e.type,i=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break e;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(o){Ee(e,e.return,o)}}function Fo(e,t,i){try{var r=e.stateNode;ub(r,e.type,i,t),r[vt]=t}catch(o){Ee(e,e.return,o)}}function Gm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ti(e.type)||e.tag===4}function Jo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ti(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $o(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=mn));else if(r!==4&&(r===27&&ti(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for($o(e,t,i),e=e.sibling;e!==null;)$o(e,t,i),e=e.sibling}function cr(e,t,i){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(r!==4&&(r===27&&ti(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(cr(e,t,i),e=e.sibling;e!==null;)cr(e,t,i),e=e.sibling}function Ym(e){var t=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ct(t,r,i),t[lt]=e,t[vt]=i}catch(u){Ee(e,e.return,u)}}var Cn=!1,Ke=!1,Wo=!1,Vm=typeof WeakSet=="function"?WeakSet:Set,et=null;function Y0(e,t){if(e=e.containerInfo,bu=Rr,e=nh(e),Qc(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var r=i.getSelection&&i.getSelection();if(r&&r.rangeCount!==0){i=r.anchorNode;var o=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{i.nodeType,u.nodeType}catch{i=null;break e}var h=0,y=-1,x=-1,w=0,D=0,z=e,A=null;t:for(;;){for(var R;z!==i||o!==0&&z.nodeType!==3||(y=h+o),z!==u||r!==0&&z.nodeType!==3||(x=h+r),z.nodeType===3&&(h+=z.nodeValue.length),(R=z.firstChild)!==null;)A=z,z=R;for(;;){if(z===e)break t;if(A===i&&++w===o&&(y=h),A===u&&++D===r&&(x=h),(R=z.nextSibling)!==null)break;z=A,A=z.parentNode}z=R}i=y===-1||x===-1?null:{start:y,end:x}}else i=null}i=i||{start:0,end:0}}else i=null;for(Su={focusedElem:e,selectionRange:i},Rr=!1,et=t;et!==null;)if(t=et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,et=e;else for(;et!==null;){switch(t=et,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)o=e[i],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,i=t,o=u.memoizedProps,u=u.memoizedState,r=i.stateNode;try{var q=ji(i.type,o);e=r.getSnapshotBeforeUpdate(q,u),r.__reactInternalSnapshotBeforeUpdate=e}catch(X){Ee(i,i.return,X)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)Cu(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Cu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,et=e;break}et=t.return}}function Qm(e,t,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:Nn(e,i),r&4&&xa(5,i);break;case 1:if(Nn(e,i),r&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(h){Ee(i,i.return,h)}else{var o=ji(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){Ee(i,i.return,h)}}r&64&&Bm(i),r&512&&Ea(i,i.return);break;case 3:if(Nn(e,i),r&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{Rh(e,t)}catch(h){Ee(i,i.return,h)}}break;case 27:t===null&&r&4&&Ym(i);case 26:case 5:Nn(e,i),t===null&&r&4&&qm(i),r&512&&Ea(i,i.return);break;case 12:Nn(e,i);break;case 31:Nn(e,i),r&4&&Km(e,i);break;case 13:Nn(e,i),r&4&&Pm(e,i),r&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=$0.bind(null,i),_b(e,i))));break;case 22:if(r=i.memoizedState!==null||Cn,!r){t=t!==null&&t.memoizedState!==null||Ke,o=Cn;var u=Ke;Cn=r,(Ke=t)&&!u?wn(e,i,(i.subtreeFlags&8772)!==0):Nn(e,i),Cn=o,Ke=u}break;case 30:break;default:Nn(e,i)}}function Xm(e){var t=e.alternate;t!==null&&(e.alternate=null,Xm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ac(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ue=null,St=!1;function Tn(e,t,i){for(i=i.child;i!==null;)Zm(e,t,i),i=i.sibling}function Zm(e,t,i){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Zl,i)}catch{}switch(i.tag){case 26:Ke||on(i,t),Tn(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Ke||on(i,t);var r=Ue,o=St;ti(i.type)&&(Ue=i.stateNode,St=!1),Tn(e,t,i),Oa(i.stateNode),Ue=r,St=o;break;case 5:Ke||on(i,t);case 6:if(r=Ue,o=St,Ue=null,Tn(e,t,i),Ue=r,St=o,Ue!==null)if(St)try{(Ue.nodeType===9?Ue.body:Ue.nodeName==="HTML"?Ue.ownerDocument.body:Ue).removeChild(i.stateNode)}catch(u){Ee(i,t,u)}else try{Ue.removeChild(i.stateNode)}catch(u){Ee(i,t,u)}break;case 18:Ue!==null&&(St?(e=Ue,Bg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Al(e)):Bg(Ue,i.stateNode));break;case 4:r=Ue,o=St,Ue=i.stateNode.containerInfo,St=!0,Tn(e,t,i),Ue=r,St=o;break;case 0:case 11:case 14:case 15:Kn(2,i,t),Ke||Kn(4,i,t),Tn(e,t,i);break;case 1:Ke||(on(i,t),r=i.stateNode,typeof r.componentWillUnmount=="function"&&km(i,t,r)),Tn(e,t,i);break;case 21:Tn(e,t,i);break;case 22:Ke=(r=Ke)||i.memoizedState!==null,Tn(e,t,i),Ke=r;break;default:Tn(e,t,i)}}function Km(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Al(e)}catch(i){Ee(t,t.return,i)}}}function Pm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Al(e)}catch(i){Ee(t,t.return,i)}}function V0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Vm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Vm),t;default:throw Error(s(435,e.tag))}}function or(e,t){var i=V0(e);t.forEach(function(r){if(!i.has(r)){i.add(r);var o=W0.bind(null,e,r);r.then(o,o)}})}function xt(e,t){var i=t.deletions;if(i!==null)for(var r=0;r<i.length;r++){var o=i[r],u=e,h=t,y=h;e:for(;y!==null;){switch(y.tag){case 27:if(ti(y.type)){Ue=y.stateNode,St=!1;break e}break;case 5:Ue=y.stateNode,St=!1;break e;case 3:case 4:Ue=y.stateNode.containerInfo,St=!0;break e}y=y.return}if(Ue===null)throw Error(s(160));Zm(u,h,o),Ue=null,St=!1,u=o.alternate,u!==null&&(u.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Fm(t,e),t=t.sibling}var tn=null;function Fm(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xt(t,e),Et(e),r&4&&(Kn(3,e,e.return),xa(3,e),Kn(5,e,e.return));break;case 1:xt(t,e),Et(e),r&512&&(Ke||i===null||on(i,i.return)),r&64&&Cn&&(e=e.updateQueue,e!==null&&(r=e.callbacks,r!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?r:i.concat(r))));break;case 26:var o=tn;if(xt(t,e),Et(e),r&512&&(Ke||i===null||on(i,i.return)),r&4){var u=i!==null?i.memoizedState:null;if(r=e.memoizedState,i===null)if(r===null)if(e.stateNode===null){e:{r=e.type,i=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":u=o.getElementsByTagName("title")[0],(!u||u[Fl]||u[lt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=o.createElement(r),o.head.insertBefore(u,o.querySelector("head > title"))),ct(u,r,i),u[lt]=e,We(u),r=u;break e;case"link":var h=Fg("link","href",o).get(r+(i.href||""));if(h){for(var y=0;y<h.length;y++)if(u=h[y],u.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&u.getAttribute("rel")===(i.rel==null?null:i.rel)&&u.getAttribute("title")===(i.title==null?null:i.title)&&u.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){h.splice(y,1);break t}}u=o.createElement(r),ct(u,r,i),o.head.appendChild(u);break;case"meta":if(h=Fg("meta","content",o).get(r+(i.content||""))){for(y=0;y<h.length;y++)if(u=h[y],u.getAttribute("content")===(i.content==null?null:""+i.content)&&u.getAttribute("name")===(i.name==null?null:i.name)&&u.getAttribute("property")===(i.property==null?null:i.property)&&u.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&u.getAttribute("charset")===(i.charSet==null?null:i.charSet)){h.splice(y,1);break t}}u=o.createElement(r),ct(u,r,i),o.head.appendChild(u);break;default:throw Error(s(468,r))}u[lt]=e,We(u),r=u}e.stateNode=r}else Jg(o,e.type,e.stateNode);else e.stateNode=Pg(o,r,e.memoizedProps);else u!==r?(u===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):u.count--,r===null?Jg(o,e.type,e.stateNode):Pg(o,r,e.memoizedProps)):r===null&&e.stateNode!==null&&Fo(e,e.memoizedProps,i.memoizedProps)}break;case 27:xt(t,e),Et(e),r&512&&(Ke||i===null||on(i,i.return)),i!==null&&r&4&&Fo(e,e.memoizedProps,i.memoizedProps);break;case 5:if(xt(t,e),Et(e),r&512&&(Ke||i===null||on(i,i.return)),e.flags&32){o=e.stateNode;try{Ji(o,"")}catch(q){Ee(e,e.return,q)}}r&4&&e.stateNode!=null&&(o=e.memoizedProps,Fo(e,o,i!==null?i.memoizedProps:o)),r&1024&&(Wo=!0);break;case 6:if(xt(t,e),Et(e),r&4){if(e.stateNode===null)throw Error(s(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(q){Ee(e,e.return,q)}}break;case 3:if(Tr=null,o=tn,tn=Er(t.containerInfo),xt(t,e),tn=o,Et(e),r&4&&i!==null&&i.memoizedState.isDehydrated)try{Al(t.containerInfo)}catch(q){Ee(e,e.return,q)}Wo&&(Wo=!1,Jm(e));break;case 4:r=tn,tn=Er(e.stateNode.containerInfo),xt(t,e),Et(e),tn=r;break;case 12:xt(t,e),Et(e);break;case 31:xt(t,e),Et(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,or(e,r)));break;case 13:xt(t,e),Et(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(fr=At()),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,or(e,r)));break;case 22:o=e.memoizedState!==null;var x=i!==null&&i.memoizedState!==null,w=Cn,D=Ke;if(Cn=w||o,Ke=D||x,xt(t,e),Ke=D,Cn=w,Et(e),r&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(i===null||x||Cn||Ke||zi(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){x=i=t;try{if(u=x.stateNode,o)h=u.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{y=x.stateNode;var z=x.memoizedProps.style,A=z!=null&&z.hasOwnProperty("display")?z.display:null;y.style.display=A==null||typeof A=="boolean"?"":(""+A).trim()}}catch(q){Ee(x,x.return,q)}}}else if(t.tag===6){if(i===null){x=t;try{x.stateNode.nodeValue=o?"":x.memoizedProps}catch(q){Ee(x,x.return,q)}}}else if(t.tag===18){if(i===null){x=t;try{var R=x.stateNode;o?kg(R,!0):kg(x.stateNode,!1)}catch(q){Ee(x,x.return,q)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}r&4&&(r=e.updateQueue,r!==null&&(i=r.retryQueue,i!==null&&(r.retryQueue=null,or(e,i))));break;case 19:xt(t,e),Et(e),r&4&&(r=e.updateQueue,r!==null&&(e.updateQueue=null,or(e,r)));break;case 30:break;case 21:break;default:xt(t,e),Et(e)}}function Et(e){var t=e.flags;if(t&2){try{for(var i,r=e.return;r!==null;){if(Gm(r)){i=r;break}r=r.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var o=i.stateNode,u=Jo(e);cr(e,u,o);break;case 5:var h=i.stateNode;i.flags&32&&(Ji(h,""),i.flags&=-33);var y=Jo(e);cr(e,y,h);break;case 3:case 4:var x=i.stateNode.containerInfo,w=Jo(e);$o(e,w,x);break;default:throw Error(s(161))}}catch(D){Ee(e,e.return,D)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Jm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Nn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Qm(e,t.alternate,t),t=t.sibling}function zi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Kn(4,t,t.return),zi(t);break;case 1:on(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&km(t,t.return,i),zi(t);break;case 27:Oa(t.stateNode);case 26:case 5:on(t,t.return),zi(t);break;case 22:t.memoizedState===null&&zi(t);break;case 30:zi(t);break;default:zi(t)}e=e.sibling}}function wn(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var r=t.alternate,o=e,u=t,h=u.flags;switch(u.tag){case 0:case 11:case 15:wn(o,u,i),xa(4,u);break;case 1:if(wn(o,u,i),r=u,o=r.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(w){Ee(r,r.return,w)}if(r=u,o=r.updateQueue,o!==null){var y=r.stateNode;try{var x=o.shared.hiddenCallbacks;if(x!==null)for(o.shared.hiddenCallbacks=null,o=0;o<x.length;o++)Ah(x[o],y)}catch(w){Ee(r,r.return,w)}}i&&h&64&&Bm(u),Ea(u,u.return);break;case 27:Ym(u);case 26:case 5:wn(o,u,i),i&&r===null&&h&4&&qm(u),Ea(u,u.return);break;case 12:wn(o,u,i);break;case 31:wn(o,u,i),i&&h&4&&Km(o,u);break;case 13:wn(o,u,i),i&&h&4&&Pm(o,u);break;case 22:u.memoizedState===null&&wn(o,u,i),Ea(u,u.return);break;case 30:break;default:wn(o,u,i)}t=t.sibling}}function eu(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&oa(i))}function tu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&oa(e))}function nn(e,t,i,r){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$m(e,t,i,r),t=t.sibling}function $m(e,t,i,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:nn(e,t,i,r),o&2048&&xa(9,t);break;case 1:nn(e,t,i,r);break;case 3:nn(e,t,i,r),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&oa(e)));break;case 12:if(o&2048){nn(e,t,i,r),e=t.stateNode;try{var u=t.memoizedProps,h=u.id,y=u.onPostCommit;typeof y=="function"&&y(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(x){Ee(t,t.return,x)}}else nn(e,t,i,r);break;case 31:nn(e,t,i,r);break;case 13:nn(e,t,i,r);break;case 23:break;case 22:u=t.stateNode,h=t.alternate,t.memoizedState!==null?u._visibility&2?nn(e,t,i,r):Ca(e,t):u._visibility&2?nn(e,t,i,r):(u._visibility|=2,yl(e,t,i,r,(t.subtreeFlags&10256)!==0||!1)),o&2048&&eu(h,t);break;case 24:nn(e,t,i,r),o&2048&&tu(t.alternate,t);break;default:nn(e,t,i,r)}}function yl(e,t,i,r,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,h=t,y=i,x=r,w=h.flags;switch(h.tag){case 0:case 11:case 15:yl(u,h,y,x,o),xa(8,h);break;case 23:break;case 22:var D=h.stateNode;h.memoizedState!==null?D._visibility&2?yl(u,h,y,x,o):Ca(u,h):(D._visibility|=2,yl(u,h,y,x,o)),o&&w&2048&&eu(h.alternate,h);break;case 24:yl(u,h,y,x,o),o&&w&2048&&tu(h.alternate,h);break;default:yl(u,h,y,x,o)}t=t.sibling}}function Ca(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,r=t,o=r.flags;switch(r.tag){case 22:Ca(i,r),o&2048&&eu(r.alternate,r);break;case 24:Ca(i,r),o&2048&&tu(r.alternate,r);break;default:Ca(i,r)}t=t.sibling}}var Ta=8192;function _l(e,t,i){if(e.subtreeFlags&Ta)for(e=e.child;e!==null;)Wm(e,t,i),e=e.sibling}function Wm(e,t,i){switch(e.tag){case 26:_l(e,t,i),e.flags&Ta&&e.memoizedState!==null&&Mb(i,tn,e.memoizedState,e.memoizedProps);break;case 5:_l(e,t,i);break;case 3:case 4:var r=tn;tn=Er(e.stateNode.containerInfo),_l(e,t,i),tn=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Ta,Ta=16777216,_l(e,t,i),Ta=r):_l(e,t,i));break;default:_l(e,t,i)}}function eg(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Na(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];et=r,ng(r,e)}eg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)tg(e),e=e.sibling}function tg(e){switch(e.tag){case 0:case 11:case 15:Na(e),e.flags&2048&&Kn(9,e,e.return);break;case 3:Na(e);break;case 12:Na(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ur(e)):Na(e);break;default:Na(e)}}function ur(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];et=r,ng(r,e)}eg(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Kn(8,t,t.return),ur(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,ur(t));break;default:ur(t)}e=e.sibling}}function ng(e,t){for(;et!==null;){var i=et;switch(i.tag){case 0:case 11:case 15:Kn(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var r=i.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:oa(i.memoizedState.cache)}if(r=i.child,r!==null)r.return=i,et=r;else e:for(i=e;et!==null;){r=et;var o=r.sibling,u=r.return;if(Xm(r),r===i){et=null;break e}if(o!==null){o.return=u,et=o;break e}et=u}}}var Q0={getCacheForType:function(e){var t=st(Qe),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i},cacheSignal:function(){return st(Qe).controller.signal}},X0=typeof WeakMap=="function"?WeakMap:Map,_e=0,Me=null,ie=null,se=0,xe=0,It=null,Pn=!1,vl=!1,nu=!1,An=0,Be=0,Fn=0,Ii=0,iu=0,Lt=0,bl=0,wa=null,Ct=null,lu=!1,fr=0,ig=0,dr=1/0,hr=null,Jn=null,Fe=0,$n=null,Sl=null,Rn=0,au=0,su=null,lg=null,Aa=0,ru=null;function Ut(){return(_e&2)!==0&&se!==0?se&-se:O.T!==null?hu():bd()}function ag(){if(Lt===0)if((se&536870912)===0||ue){var e=Ss;Ss<<=1,(Ss&3932160)===0&&(Ss=262144),Lt=e}else Lt=536870912;return e=jt.current,e!==null&&(e.flags|=32),Lt}function Tt(e,t,i){(e===Me&&(xe===2||xe===9)||e.cancelPendingCommit!==null)&&(xl(e,0),Wn(e,se,Lt,!1)),Pl(e,i),((_e&2)===0||e!==Me)&&(e===Me&&((_e&2)===0&&(Ii|=i),Be===4&&Wn(e,se,Lt,!1)),un(e))}function sg(e,t,i){if((_e&6)!==0)throw Error(s(327));var r=!i&&(t&127)===0&&(t&e.expiredLanes)===0||Kl(e,t),o=r?P0(e,t):ou(e,t,!0),u=r;do{if(o===0){vl&&!r&&Wn(e,t,0,!1);break}else{if(i=e.current.alternate,u&&!Z0(i)){o=ou(e,t,!1),u=!1;continue}if(o===2){if(u=t,e.errorRecoveryDisabledLanes&u)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var y=e;o=wa;var x=y.current.memoizedState.isDehydrated;if(x&&(xl(y,h).flags|=256),h=ou(y,h,!1),h!==2){if(nu&&!x){y.errorRecoveryDisabledLanes|=u,Ii|=u,o=4;break e}u=Ct,Ct=o,u!==null&&(Ct===null?Ct=u:Ct.push.apply(Ct,u))}o=h}if(u=!1,o!==2)continue}}if(o===1){xl(e,0),Wn(e,t,0,!0);break}e:{switch(r=e,u=o,u){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Wn(r,t,Lt,!Pn);break e;case 2:Ct=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(o=fr+300-At(),10<o)){if(Wn(r,t,Lt,!Pn),Es(r,0,!0)!==0)break e;Rn=t,r.timeoutHandle=Ug(rg.bind(null,r,i,Ct,hr,lu,t,Lt,Ii,bl,Pn,u,"Throttled",-0,0),o);break e}rg(r,i,Ct,hr,lu,t,Lt,Ii,bl,Pn,u,null,-0,0)}}break}while(!0);un(e)}function rg(e,t,i,r,o,u,h,y,x,w,D,z,A,R){if(e.timeoutHandle=-1,z=t.subtreeFlags,z&8192||(z&16785408)===16785408){z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mn},Wm(t,u,z);var q=(u&62914560)===u?fr-At():(u&4194048)===u?ig-At():0;if(q=Db(z,q),q!==null){Rn=u,e.cancelPendingCommit=q(gg.bind(null,e,t,u,i,r,o,h,y,x,D,z,null,A,R)),Wn(e,u,h,!w);return}}gg(e,t,u,i,r,o,h,y,x)}function Z0(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var r=0;r<i.length;r++){var o=i[r],u=o.getSnapshot;o=o.value;try{if(!Dt(u(),o))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wn(e,t,i,r){t&=~iu,t&=~Ii,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var u=31-Mt(o),h=1<<u;r[u]=-1,o&=~h}i!==0&&yd(e,i,t)}function mr(){return(_e&6)===0?(Ra(0),!1):!0}function cu(){if(ie!==null){if(xe===0)var e=ie.return;else e=ie,_n=Ni=null,Co(e),dl=null,fa=0,e=ie;for(;e!==null;)Hm(e.alternate,e),e=e.return;ie=null}}function xl(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,hb(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Rn=0,cu(),Me=e,ie=i=pn(e.current,null),se=t,xe=0,It=null,Pn=!1,vl=Kl(e,t),nu=!1,bl=Lt=iu=Ii=Fn=Be=0,Ct=wa=null,lu=!1,(t&8)!==0&&(t|=t&32);var r=e.entangledLanes;if(r!==0)for(e=e.entanglements,r&=t;0<r;){var o=31-Mt(r),u=1<<o;t|=e[o],r&=~u}return An=t,Is(),i}function cg(e,t){$=null,O.H=va,t===fl||t===Ys?(t=Ch(),xe=3):t===fo?(t=Ch(),xe=4):xe=t===ko?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,It=t,ie===null&&(Be=1,ir(e,Vt(t,e.current)))}function og(){var e=jt.current;return e===null?!0:(se&4194048)===se?Kt===null:(se&62914560)===se||(se&536870912)!==0?e===Kt:!1}function ug(){var e=O.H;return O.H=va,e===null?va:e}function fg(){var e=O.A;return O.A=Q0,e}function gr(){Be=4,Pn||(se&4194048)!==se&&jt.current!==null||(vl=!0),(Fn&134217727)===0&&(Ii&134217727)===0||Me===null||Wn(Me,se,Lt,!1)}function ou(e,t,i){var r=_e;_e|=2;var o=ug(),u=fg();(Me!==e||se!==t)&&(hr=null,xl(e,t)),t=!1;var h=Be;e:do try{if(xe!==0&&ie!==null){var y=ie,x=It;switch(xe){case 8:cu(),h=6;break e;case 3:case 2:case 9:case 6:jt.current===null&&(t=!0);var w=xe;if(xe=0,It=null,El(e,y,x,w),i&&vl){h=0;break e}break;default:w=xe,xe=0,It=null,El(e,y,x,w)}}K0(),h=Be;break}catch(D){cg(e,D)}while(!0);return t&&e.shellSuspendCounter++,_n=Ni=null,_e=r,O.H=o,O.A=u,ie===null&&(Me=null,se=0,Is()),h}function K0(){for(;ie!==null;)dg(ie)}function P0(e,t){var i=_e;_e|=2;var r=ug(),o=fg();Me!==e||se!==t?(hr=null,dr=At()+500,xl(e,t)):vl=Kl(e,t);e:do try{if(xe!==0&&ie!==null){t=ie;var u=It;t:switch(xe){case 1:xe=0,It=null,El(e,t,u,1);break;case 2:case 9:if(xh(u)){xe=0,It=null,hg(t);break}t=function(){xe!==2&&xe!==9||Me!==e||(xe=7),un(e)},u.then(t,t);break e;case 3:xe=7;break e;case 4:xe=5;break e;case 7:xh(u)?(xe=0,It=null,hg(t)):(xe=0,It=null,El(e,t,u,7));break;case 5:var h=null;switch(ie.tag){case 26:h=ie.memoizedState;case 5:case 27:var y=ie;if(h?$g(h):y.stateNode.complete){xe=0,It=null;var x=y.sibling;if(x!==null)ie=x;else{var w=y.return;w!==null?(ie=w,pr(w)):ie=null}break t}}xe=0,It=null,El(e,t,u,5);break;case 6:xe=0,It=null,El(e,t,u,6);break;case 8:cu(),Be=6;break e;default:throw Error(s(462))}}F0();break}catch(D){cg(e,D)}while(!0);return _n=Ni=null,O.H=r,O.A=o,_e=i,ie!==null?0:(Me=null,se=0,Is(),Be)}function F0(){for(;ie!==null&&!vv();)dg(ie)}function dg(e){var t=Lm(e.alternate,e,An);e.memoizedProps=e.pendingProps,t===null?pr(e):ie=t}function hg(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Mm(i,t,t.pendingProps,t.type,void 0,se);break;case 11:t=Mm(i,t,t.pendingProps,t.type.render,t.ref,se);break;case 5:Co(t);default:Hm(i,t),t=ie=fh(t,An),t=Lm(i,t,An)}e.memoizedProps=e.pendingProps,t===null?pr(e):ie=t}function El(e,t,i,r){_n=Ni=null,Co(t),dl=null,fa=0;var o=t.return;try{if(H0(e,o,t,i,se)){Be=1,ir(e,Vt(i,e.current)),ie=null;return}}catch(u){if(o!==null)throw ie=o,u;Be=1,ir(e,Vt(i,e.current)),ie=null;return}t.flags&32768?(ue||r===1?e=!0:vl||(se&536870912)!==0?e=!1:(Pn=e=!0,(r===2||r===9||r===3||r===6)&&(r=jt.current,r!==null&&r.tag===13&&(r.flags|=16384))),mg(t,e)):pr(t)}function pr(e){var t=e;do{if((t.flags&32768)!==0){mg(t,Pn);return}e=t.return;var i=q0(t.alternate,t,An);if(i!==null){ie=i;return}if(t=t.sibling,t!==null){ie=t;return}ie=t=e}while(t!==null);Be===0&&(Be=5)}function mg(e,t){do{var i=G0(e.alternate,e);if(i!==null){i.flags&=32767,ie=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){ie=e;return}ie=e=i}while(e!==null);Be=6,ie=null}function gg(e,t,i,r,o,u,h,y,x){e.cancelPendingCommit=null;do yr();while(Fe!==0);if((_e&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(u=t.lanes|t.childLanes,u|=Fc,Rv(e,i,u,h,y,x),e===Me&&(ie=Me=null,se=0),Sl=t,$n=e,Rn=i,au=u,su=o,lg=r,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,eb(vs,function(){return bg(),null})):(e.callbackNode=null,e.callbackPriority=0),r=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||r){r=O.T,O.T=null,o=B.p,B.p=2,h=_e,_e|=4;try{Y0(e,t,i)}finally{_e=h,B.p=o,O.T=r}}Fe=1,pg(),yg(),_g()}}function pg(){if(Fe===1){Fe=0;var e=$n,t=Sl,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=O.T,O.T=null;var r=B.p;B.p=2;var o=_e;_e|=4;try{Fm(t,e);var u=Su,h=nh(e.containerInfo),y=u.focusedElem,x=u.selectionRange;if(h!==y&&y&&y.ownerDocument&&th(y.ownerDocument.documentElement,y)){if(x!==null&&Qc(y)){var w=x.start,D=x.end;if(D===void 0&&(D=w),"selectionStart"in y)y.selectionStart=w,y.selectionEnd=Math.min(D,y.value.length);else{var z=y.ownerDocument||document,A=z&&z.defaultView||window;if(A.getSelection){var R=A.getSelection(),q=y.textContent.length,X=Math.min(x.start,q),we=x.end===void 0?X:Math.min(x.end,q);!R.extend&&X>we&&(h=we,we=X,X=h);var T=eh(y,X),E=eh(y,we);if(T&&E&&(R.rangeCount!==1||R.anchorNode!==T.node||R.anchorOffset!==T.offset||R.focusNode!==E.node||R.focusOffset!==E.offset)){var N=z.createRange();N.setStart(T.node,T.offset),R.removeAllRanges(),X>we?(R.addRange(N),R.extend(E.node,E.offset)):(N.setEnd(E.node,E.offset),R.addRange(N))}}}}for(z=[],R=y;R=R.parentNode;)R.nodeType===1&&z.push({element:R,left:R.scrollLeft,top:R.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<z.length;y++){var j=z[y];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}Rr=!!bu,Su=bu=null}finally{_e=o,B.p=r,O.T=i}}e.current=t,Fe=2}}function yg(){if(Fe===2){Fe=0;var e=$n,t=Sl,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=O.T,O.T=null;var r=B.p;B.p=2;var o=_e;_e|=4;try{Qm(e,t.alternate,t)}finally{_e=o,B.p=r,O.T=i}}Fe=3}}function _g(){if(Fe===4||Fe===3){Fe=0,bv();var e=$n,t=Sl,i=Rn,r=lg;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Fe=5:(Fe=0,Sl=$n=null,vg(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(Jn=null),Nc(i),t=t.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Zl,t,void 0,(t.current.flags&128)===128)}catch{}if(r!==null){t=O.T,o=B.p,B.p=2,O.T=null;try{for(var u=e.onRecoverableError,h=0;h<r.length;h++){var y=r[h];u(y.value,{componentStack:y.stack})}}finally{O.T=t,B.p=o}}(Rn&3)!==0&&yr(),un(e),o=e.pendingLanes,(i&261930)!==0&&(o&42)!==0?e===ru?Aa++:(Aa=0,ru=e):Aa=0,Ra(0)}}function vg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,oa(t)))}function yr(){return pg(),yg(),_g(),bg()}function bg(){if(Fe!==5)return!1;var e=$n,t=au;au=0;var i=Nc(Rn),r=O.T,o=B.p;try{B.p=32>i?32:i,O.T=null,i=su,su=null;var u=$n,h=Rn;if(Fe=0,Sl=$n=null,Rn=0,(_e&6)!==0)throw Error(s(331));var y=_e;if(_e|=4,tg(u.current),$m(u,u.current,h,i),_e=y,Ra(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Zl,u)}catch{}return!0}finally{B.p=o,O.T=r,vg(e,t)}}function Sg(e,t,i){t=Vt(i,t),t=Bo(e.stateNode,t,2),e=Qn(e,t,2),e!==null&&(Pl(e,2),un(e))}function Ee(e,t,i){if(e.tag===3)Sg(e,e,i);else for(;t!==null;){if(t.tag===3){Sg(t,e,i);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jn===null||!Jn.has(r))){e=Vt(i,e),i=xm(2),r=Qn(t,i,2),r!==null&&(Em(i,r,t,e),Pl(r,2),un(r));break}}t=t.return}}function uu(e,t,i){var r=e.pingCache;if(r===null){r=e.pingCache=new X0;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(i)||(nu=!0,o.add(i),e=J0.bind(null,e,t,i),t.then(e,e))}function J0(e,t,i){var r=e.pingCache;r!==null&&r.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Me===e&&(se&i)===i&&(Be===4||Be===3&&(se&62914560)===se&&300>At()-fr?(_e&2)===0&&xl(e,0):iu|=i,bl===se&&(bl=0)),un(e)}function xg(e,t){t===0&&(t=pd()),e=Ei(e,t),e!==null&&(Pl(e,t),un(e))}function $0(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),xg(e,i)}function W0(e,t){var i=0;switch(e.tag){case 31:case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(i=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(s(314))}r!==null&&r.delete(t),xg(e,i)}function eb(e,t){return xc(e,t)}var _r=null,Cl=null,fu=!1,vr=!1,du=!1,ei=0;function un(e){e!==Cl&&e.next===null&&(Cl===null?_r=Cl=e:Cl=Cl.next=e),vr=!0,fu||(fu=!0,nb())}function Ra(e,t){if(!du&&vr){du=!0;do for(var i=!1,r=_r;r!==null;){if(e!==0){var o=r.pendingLanes;if(o===0)var u=0;else{var h=r.suspendedLanes,y=r.pingedLanes;u=(1<<31-Mt(42|e)+1)-1,u&=o&~(h&~y),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(i=!0,Ng(r,u))}else u=se,u=Es(r,r===Me?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(u&3)===0||Kl(r,u)||(i=!0,Ng(r,u));r=r.next}while(i);du=!1}}function tb(){Eg()}function Eg(){vr=fu=!1;var e=0;ei!==0&&db()&&(e=ei);for(var t=At(),i=null,r=_r;r!==null;){var o=r.next,u=Cg(r,t);u===0?(r.next=null,i===null?_r=o:i.next=o,o===null&&(Cl=i)):(i=r,(e!==0||(u&3)!==0)&&(vr=!0)),r=o}Fe!==0&&Fe!==5||Ra(e),ei!==0&&(ei=0)}function Cg(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var h=31-Mt(u),y=1<<h,x=o[h];x===-1?((y&i)===0||(y&r)!==0)&&(o[h]=Av(y,t)):x<=t&&(e.expiredLanes|=y),u&=~y}if(t=Me,i=se,i=Es(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r=e.callbackNode,i===0||e===t&&(xe===2||xe===9)||e.cancelPendingCommit!==null)return r!==null&&r!==null&&Ec(r),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Kl(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(r!==null&&Ec(r),Nc(i)){case 2:case 8:i=md;break;case 32:i=vs;break;case 268435456:i=gd;break;default:i=vs}return r=Tg.bind(null,e),i=xc(i,r),e.callbackPriority=t,e.callbackNode=i,t}return r!==null&&r!==null&&Ec(r),e.callbackPriority=2,e.callbackNode=null,2}function Tg(e,t){if(Fe!==0&&Fe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(yr()&&e.callbackNode!==i)return null;var r=se;return r=Es(e,e===Me?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),r===0?null:(sg(e,r,t),Cg(e,At()),e.callbackNode!=null&&e.callbackNode===i?Tg.bind(null,e):null)}function Ng(e,t){if(yr())return null;sg(e,t,!0)}function nb(){mb(function(){(_e&6)!==0?xc(hd,tb):Eg()})}function hu(){if(ei===0){var e=ol;e===0&&(e=bs,bs<<=1,(bs&261888)===0&&(bs=256)),ei=e}return ei}function wg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ws(""+e)}function Ag(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function ib(e,t,i,r,o){if(t==="submit"&&i&&i.stateNode===o){var u=wg((o[vt]||null).action),h=r.submitter;h&&(t=(t=h[vt]||null)?wg(t.formAction):h.getAttribute("formAction"),t!==null&&(u=t,h=null));var y=new Ds("action","action",null,r,o);e.push({event:y,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(ei!==0){var x=h?Ag(o,h):new FormData(o);jo(i,{pending:!0,data:x,method:o.method,action:u},null,x)}}else typeof u=="function"&&(y.preventDefault(),x=h?Ag(o,h):new FormData(o),jo(i,{pending:!0,data:x,method:o.method,action:u},u,x))},currentTarget:o}]})}}for(var mu=0;mu<Pc.length;mu++){var gu=Pc[mu],lb=gu.toLowerCase(),ab=gu[0].toUpperCase()+gu.slice(1);en(lb,"on"+ab)}en(ah,"onAnimationEnd"),en(sh,"onAnimationIteration"),en(rh,"onAnimationStart"),en("dblclick","onDoubleClick"),en("focusin","onFocus"),en("focusout","onBlur"),en(S0,"onTransitionRun"),en(x0,"onTransitionStart"),en(E0,"onTransitionCancel"),en(ch,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ma));function Rg(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var r=e[i],o=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var h=r.length-1;0<=h;h--){var y=r[h],x=y.instance,w=y.currentTarget;if(y=y.listener,x!==u&&o.isPropagationStopped())break e;u=y,o.currentTarget=w;try{u(o)}catch(D){zs(D)}o.currentTarget=null,u=x}else for(h=0;h<r.length;h++){if(y=r[h],x=y.instance,w=y.currentTarget,y=y.listener,x!==u&&o.isPropagationStopped())break e;u=y,o.currentTarget=w;try{u(o)}catch(D){zs(D)}o.currentTarget=null,u=x}}}}function le(e,t){var i=t[wc];i===void 0&&(i=t[wc]=new Set);var r=e+"__bubble";i.has(r)||(Mg(t,e,2,!1),i.add(r))}function pu(e,t,i){var r=0;t&&(r|=4),Mg(i,e,r,t)}var br="_reactListening"+Math.random().toString(36).slice(2);function yu(e){if(!e[br]){e[br]=!0,Ed.forEach(function(i){i!=="selectionchange"&&(sb.has(i)||pu(i,!1,e),pu(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[br]||(t[br]=!0,pu("selectionchange",!1,t))}}function Mg(e,t,i,r){switch(ap(t)){case 2:var o=zb;break;case 8:o=Ib;break;default:o=Ou}i=o.bind(null,t,i,e),o=void 0,!Lc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,i,{capture:!0,passive:o}):e.addEventListener(t,i,!0):o!==void 0?e.addEventListener(t,i,{passive:o}):e.addEventListener(t,i,!1)}function _u(e,t,i,r,o){var u=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var y=r.stateNode.containerInfo;if(y===o)break;if(h===4)for(h=r.return;h!==null;){var x=h.tag;if((x===3||x===4)&&h.stateNode.containerInfo===o)return;h=h.return}for(;y!==null;){if(h=Xi(y),h===null)return;if(x=h.tag,x===5||x===6||x===26||x===27){r=u=h;continue e}y=y.parentNode}}r=r.return}Id(function(){var w=u,D=zc(i),z=[];e:{var A=oh.get(e);if(A!==void 0){var R=Ds,q=e;switch(e){case"keypress":if(Rs(i)===0)break e;case"keydown":case"keyup":R=Wv;break;case"focusin":q="focus",R=kc;break;case"focusout":q="blur",R=kc;break;case"beforeblur":case"afterblur":R=kc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=qv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=n0;break;case ah:case sh:case rh:R=Vv;break;case ch:R=l0;break;case"scroll":case"scrollend":R=Bv;break;case"wheel":R=s0;break;case"copy":case"cut":case"paste":R=Xv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=kd;break;case"toggle":case"beforetoggle":R=c0}var X=(t&4)!==0,we=!X&&(e==="scroll"||e==="scrollend"),T=X?A!==null?A+"Capture":null:A;X=[];for(var E=w,N;E!==null;){var j=E;if(N=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||N===null||T===null||(j=$l(E,T),j!=null&&X.push(Da(E,j,N))),we)break;E=E.return}0<X.length&&(A=new R(A,q,null,i,D),z.push({event:A,listeners:X}))}}if((t&7)===0){e:{if(A=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",A&&i!==jc&&(q=i.relatedTarget||i.fromElement)&&(Xi(q)||q[Qi]))break e;if((R||A)&&(A=D.window===D?D:(A=D.ownerDocument)?A.defaultView||A.parentWindow:window,R?(q=i.relatedTarget||i.toElement,R=w,q=q?Xi(q):null,q!==null&&(we=f(q),X=q.tag,q!==we||X!==5&&X!==27&&X!==6)&&(q=null)):(R=null,q=w),R!==q)){if(X=Hd,j="onMouseLeave",T="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(X=kd,j="onPointerLeave",T="onPointerEnter",E="pointer"),we=R==null?A:Jl(R),N=q==null?A:Jl(q),A=new X(j,E+"leave",R,i,D),A.target=we,A.relatedTarget=N,j=null,Xi(D)===w&&(X=new X(T,E+"enter",q,i,D),X.target=N,X.relatedTarget=we,j=X),we=j,R&&q)t:{for(X=rb,T=R,E=q,N=0,j=T;j;j=X(j))N++;j=0;for(var V=E;V;V=X(V))j++;for(;0<N-j;)T=X(T),N--;for(;0<j-N;)E=X(E),j--;for(;N--;){if(T===E||E!==null&&T===E.alternate){X=T;break t}T=X(T),E=X(E)}X=null}else X=null;R!==null&&Dg(z,A,R,X,!1),q!==null&&we!==null&&Dg(z,we,q,X,!0)}}e:{if(A=w?Jl(w):window,R=A.nodeName&&A.nodeName.toLowerCase(),R==="select"||R==="input"&&A.type==="file")var me=Kd;else if(Xd(A))if(Pd)me=_0;else{me=p0;var Y=g0}else R=A.nodeName,!R||R.toLowerCase()!=="input"||A.type!=="checkbox"&&A.type!=="radio"?w&&Oc(w.elementType)&&(me=Kd):me=y0;if(me&&(me=me(e,w))){Zd(z,me,i,D);break e}Y&&Y(e,A,w),e==="focusout"&&w&&A.type==="number"&&w.memoizedProps.value!=null&&Dc(A,"number",A.value)}switch(Y=w?Jl(w):window,e){case"focusin":(Xd(Y)||Y.contentEditable==="true")&&(tl=Y,Xc=w,sa=null);break;case"focusout":sa=Xc=tl=null;break;case"mousedown":Zc=!0;break;case"contextmenu":case"mouseup":case"dragend":Zc=!1,ih(z,i,D);break;case"selectionchange":if(b0)break;case"keydown":case"keyup":ih(z,i,D)}var W;if(Gc)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else el?Vd(e,i)&&(re="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(re="onCompositionStart");re&&(qd&&i.locale!=="ko"&&(el||re!=="onCompositionStart"?re==="onCompositionEnd"&&el&&(W=Ld()):(Hn=D,Uc="value"in Hn?Hn.value:Hn.textContent,el=!0)),Y=Sr(w,re),0<Y.length&&(re=new Bd(re,e,null,i,D),z.push({event:re,listeners:Y}),W?re.data=W:(W=Qd(i),W!==null&&(re.data=W)))),(W=u0?f0(e,i):d0(e,i))&&(re=Sr(w,"onBeforeInput"),0<re.length&&(Y=new Bd("onBeforeInput","beforeinput",null,i,D),z.push({event:Y,listeners:re}),Y.data=W)),ib(z,e,w,i,D)}Rg(z,t)})}function Da(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Sr(e,t){for(var i=t+"Capture",r=[];e!==null;){var o=e,u=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||u===null||(o=$l(e,i),o!=null&&r.unshift(Da(e,o,u)),o=$l(e,t),o!=null&&r.push(Da(e,o,u))),e.tag===3)return r;e=e.return}return[]}function rb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dg(e,t,i,r,o){for(var u=t._reactName,h=[];i!==null&&i!==r;){var y=i,x=y.alternate,w=y.stateNode;if(y=y.tag,x!==null&&x===r)break;y!==5&&y!==26&&y!==27||w===null||(x=w,o?(w=$l(i,u),w!=null&&h.unshift(Da(i,w,x))):o||(w=$l(i,u),w!=null&&h.push(Da(i,w,x)))),i=i.return}h.length!==0&&e.push({event:t,listeners:h})}var cb=/\r\n?/g,ob=/\u0000|\uFFFD/g;function Og(e){return(typeof e=="string"?e:""+e).replace(cb,`
`).replace(ob,"")}function jg(e,t){return t=Og(t),Og(e)===t}function Ne(e,t,i,r,o,u){switch(i){case"children":typeof r=="string"?t==="body"||t==="textarea"&&r===""||Ji(e,r):(typeof r=="number"||typeof r=="bigint")&&t!=="body"&&Ji(e,""+r);break;case"className":Ts(e,"class",r);break;case"tabIndex":Ts(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Ts(e,i,r);break;case"style":jd(e,r,u);break;case"data":if(t!=="object"){Ts(e,"data",r);break}case"src":case"href":if(r===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=ws(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if(typeof r=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(i==="formAction"?(t!=="input"&&Ne(e,t,"name",o.name,o,null),Ne(e,t,"formEncType",o.formEncType,o,null),Ne(e,t,"formMethod",o.formMethod,o,null),Ne(e,t,"formTarget",o.formTarget,o,null)):(Ne(e,t,"encType",o.encType,o,null),Ne(e,t,"method",o.method,o,null),Ne(e,t,"target",o.target,o,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){e.removeAttribute(i);break}r=ws(""+r),e.setAttribute(i,r);break;case"onClick":r!=null&&(e.onclick=mn);break;case"onScroll":r!=null&&le("scroll",e);break;case"onScrollEnd":r!=null&&le("scrollend",e);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(s(61));if(i=r.__html,i!=null){if(o.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":e.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){e.removeAttribute("xlink:href");break}i=ws(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":r===!0?e.setAttribute(i,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":le("beforetoggle",e),le("toggle",e),Cs(e,"popover",r);break;case"xlinkActuate":hn(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":hn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":hn(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":hn(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":hn(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":hn(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":hn(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":hn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":hn(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":Cs(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Uv.get(i)||i,Cs(e,i,r))}}function vu(e,t,i,r,o,u){switch(i){case"style":jd(e,r,u);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(s(61));if(i=r.__html,i!=null){if(o.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof r=="string"?Ji(e,r):(typeof r=="number"||typeof r=="bigint")&&Ji(e,""+r);break;case"onScroll":r!=null&&le("scroll",e);break;case"onScrollEnd":r!=null&&le("scrollend",e);break;case"onClick":r!=null&&(e.onclick=mn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cd.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(o=i.endsWith("Capture"),t=i.slice(2,o?i.length-7:void 0),u=e[vt]||null,u=u!=null?u[i]:null,typeof u=="function"&&e.removeEventListener(t,u,o),typeof r=="function")){typeof u!="function"&&u!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,r,o);break e}i in e?e[i]=r:r===!0?e.setAttribute(i,""):Cs(e,i,r)}}}function ct(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":le("error",e),le("load",e);var r=!1,o=!1,u;for(u in i)if(i.hasOwnProperty(u)){var h=i[u];if(h!=null)switch(u){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Ne(e,t,u,h,i,null)}}o&&Ne(e,t,"srcSet",i.srcSet,i,null),r&&Ne(e,t,"src",i.src,i,null);return;case"input":le("invalid",e);var y=u=h=o=null,x=null,w=null;for(r in i)if(i.hasOwnProperty(r)){var D=i[r];if(D!=null)switch(r){case"name":o=D;break;case"type":h=D;break;case"checked":x=D;break;case"defaultChecked":w=D;break;case"value":u=D;break;case"defaultValue":y=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(137,t));break;default:Ne(e,t,r,D,i,null)}}Rd(e,u,y,x,w,h,o,!1);return;case"select":le("invalid",e),r=h=u=null;for(o in i)if(i.hasOwnProperty(o)&&(y=i[o],y!=null))switch(o){case"value":u=y;break;case"defaultValue":h=y;break;case"multiple":r=y;default:Ne(e,t,o,y,i,null)}t=u,i=h,e.multiple=!!r,t!=null?Fi(e,!!r,t,!1):i!=null&&Fi(e,!!r,i,!0);return;case"textarea":le("invalid",e),u=o=r=null;for(h in i)if(i.hasOwnProperty(h)&&(y=i[h],y!=null))switch(h){case"value":r=y;break;case"defaultValue":o=y;break;case"children":u=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:Ne(e,t,h,y,i,null)}Dd(e,r,o,u);return;case"option":for(x in i)i.hasOwnProperty(x)&&(r=i[x],r!=null)&&(x==="selected"?e.selected=r&&typeof r!="function"&&typeof r!="symbol":Ne(e,t,x,r,i,null));return;case"dialog":le("beforetoggle",e),le("toggle",e),le("cancel",e),le("close",e);break;case"iframe":case"object":le("load",e);break;case"video":case"audio":for(r=0;r<Ma.length;r++)le(Ma[r],e);break;case"image":le("error",e),le("load",e);break;case"details":le("toggle",e);break;case"embed":case"source":case"link":le("error",e),le("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(w in i)if(i.hasOwnProperty(w)&&(r=i[w],r!=null))switch(w){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:Ne(e,t,w,r,i,null)}return;default:if(Oc(t)){for(D in i)i.hasOwnProperty(D)&&(r=i[D],r!==void 0&&vu(e,t,D,r,i,void 0));return}}for(y in i)i.hasOwnProperty(y)&&(r=i[y],r!=null&&Ne(e,t,y,r,i,null))}function ub(e,t,i,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,u=null,h=null,y=null,x=null,w=null,D=null;for(R in i){var z=i[R];if(i.hasOwnProperty(R)&&z!=null)switch(R){case"checked":break;case"value":break;case"defaultValue":x=z;default:r.hasOwnProperty(R)||Ne(e,t,R,null,r,z)}}for(var A in r){var R=r[A];if(z=i[A],r.hasOwnProperty(A)&&(R!=null||z!=null))switch(A){case"type":u=R;break;case"name":o=R;break;case"checked":w=R;break;case"defaultChecked":D=R;break;case"value":h=R;break;case"defaultValue":y=R;break;case"children":case"dangerouslySetInnerHTML":if(R!=null)throw Error(s(137,t));break;default:R!==z&&Ne(e,t,A,R,r,z)}}Mc(e,h,y,x,w,D,u,o);return;case"select":R=h=y=A=null;for(u in i)if(x=i[u],i.hasOwnProperty(u)&&x!=null)switch(u){case"value":break;case"multiple":R=x;default:r.hasOwnProperty(u)||Ne(e,t,u,null,r,x)}for(o in r)if(u=r[o],x=i[o],r.hasOwnProperty(o)&&(u!=null||x!=null))switch(o){case"value":A=u;break;case"defaultValue":y=u;break;case"multiple":h=u;default:u!==x&&Ne(e,t,o,u,r,x)}t=y,i=h,r=R,A!=null?Fi(e,!!i,A,!1):!!r!=!!i&&(t!=null?Fi(e,!!i,t,!0):Fi(e,!!i,i?[]:"",!1));return;case"textarea":R=A=null;for(y in i)if(o=i[y],i.hasOwnProperty(y)&&o!=null&&!r.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ne(e,t,y,null,r,o)}for(h in r)if(o=r[h],u=i[h],r.hasOwnProperty(h)&&(o!=null||u!=null))switch(h){case"value":A=o;break;case"defaultValue":R=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(s(91));break;default:o!==u&&Ne(e,t,h,o,r,u)}Md(e,A,R);return;case"option":for(var q in i)A=i[q],i.hasOwnProperty(q)&&A!=null&&!r.hasOwnProperty(q)&&(q==="selected"?e.selected=!1:Ne(e,t,q,null,r,A));for(x in r)A=r[x],R=i[x],r.hasOwnProperty(x)&&A!==R&&(A!=null||R!=null)&&(x==="selected"?e.selected=A&&typeof A!="function"&&typeof A!="symbol":Ne(e,t,x,A,r,R));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var X in i)A=i[X],i.hasOwnProperty(X)&&A!=null&&!r.hasOwnProperty(X)&&Ne(e,t,X,null,r,A);for(w in r)if(A=r[w],R=i[w],r.hasOwnProperty(w)&&A!==R&&(A!=null||R!=null))switch(w){case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(137,t));break;default:Ne(e,t,w,A,r,R)}return;default:if(Oc(t)){for(var we in i)A=i[we],i.hasOwnProperty(we)&&A!==void 0&&!r.hasOwnProperty(we)&&vu(e,t,we,void 0,r,A);for(D in r)A=r[D],R=i[D],!r.hasOwnProperty(D)||A===R||A===void 0&&R===void 0||vu(e,t,D,A,r,R);return}}for(var T in i)A=i[T],i.hasOwnProperty(T)&&A!=null&&!r.hasOwnProperty(T)&&Ne(e,t,T,null,r,A);for(z in r)A=r[z],R=i[z],!r.hasOwnProperty(z)||A===R||A==null&&R==null||Ne(e,t,z,A,r,R)}function zg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,i=performance.getEntriesByType("resource"),r=0;r<i.length;r++){var o=i[r],u=o.transferSize,h=o.initiatorType,y=o.duration;if(u&&y&&zg(h)){for(h=0,y=o.responseEnd,r+=1;r<i.length;r++){var x=i[r],w=x.startTime;if(w>y)break;var D=x.transferSize,z=x.initiatorType;D&&zg(z)&&(x=x.responseEnd,h+=D*(x<y?1:(y-w)/(x-w)))}if(--r,t+=8*(u+h)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var bu=null,Su=null;function xr(e){return e.nodeType===9?e:e.ownerDocument}function Ig(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function xu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Eu=null;function db(){var e=window.event;return e&&e.type==="popstate"?e===Eu?!1:(Eu=e,!0):(Eu=null,!1)}var Ug=typeof setTimeout=="function"?setTimeout:void 0,hb=typeof clearTimeout=="function"?clearTimeout:void 0,Hg=typeof Promise=="function"?Promise:void 0,mb=typeof queueMicrotask=="function"?queueMicrotask:typeof Hg<"u"?function(e){return Hg.resolve(null).then(e).catch(gb)}:Ug;function gb(e){setTimeout(function(){throw e})}function ti(e){return e==="head"}function Bg(e,t){var i=t,r=0;do{var o=i.nextSibling;if(e.removeChild(i),o&&o.nodeType===8)if(i=o.data,i==="/$"||i==="/&"){if(r===0){e.removeChild(o),Al(t);return}r--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")r++;else if(i==="html")Oa(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,Oa(i);for(var u=i.firstChild;u;){var h=u.nextSibling,y=u.nodeName;u[Fl]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&u.rel.toLowerCase()==="stylesheet"||i.removeChild(u),u=h}}else i==="body"&&Oa(e.ownerDocument.body);i=o}while(i);Al(t)}function kg(e,t){var i=e;e=0;do{var r=i.nextSibling;if(i.nodeType===1?t?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(t?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=r}while(i)}function Cu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Cu(i),Ac(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function pb(e,t,i,r){for(;e.nodeType===1;){var o=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(r){if(!e[Fl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Pt(e.nextSibling),e===null)break}return null}function yb(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Pt(e.nextSibling),e===null))return null;return e}function qg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Pt(e.nextSibling),e===null))return null;return e}function Tu(e){return e.data==="$?"||e.data==="$~"}function Nu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function _b(e,t){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||i.readyState!=="loading")t();else{var r=function(){t(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}function Pt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var wu=null;function Gg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(t===0)return Pt(e.nextSibling);t--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||t++}e=e.nextSibling}return null}function Yg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(t===0)return e;t--}else i!=="/$"&&i!=="/&"||t++}e=e.previousSibling}return null}function Vg(e,t,i){switch(t=xr(i),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Oa(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ac(e)}var Ft=new Map,Qg=new Set;function Er(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Mn=B.d;B.d={f:vb,r:bb,D:Sb,C:xb,L:Eb,m:Cb,X:Nb,S:Tb,M:wb};function vb(){var e=Mn.f(),t=mr();return e||t}function bb(e){var t=Zi(e);t!==null&&t.tag===5&&t.type==="form"?cm(t):Mn.r(e)}var Tl=typeof document>"u"?null:document;function Xg(e,t,i){var r=Tl;if(r&&typeof t=="string"&&t){var o=Gt(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof i=="string"&&(o+='[crossorigin="'+i+'"]'),Qg.has(o)||(Qg.add(o),e={rel:e,crossOrigin:i,href:t},r.querySelector(o)===null&&(t=r.createElement("link"),ct(t,"link",e),We(t),r.head.appendChild(t)))}}function Sb(e){Mn.D(e),Xg("dns-prefetch",e,null)}function xb(e,t){Mn.C(e,t),Xg("preconnect",e,t)}function Eb(e,t,i){Mn.L(e,t,i);var r=Tl;if(r&&e&&t){var o='link[rel="preload"][as="'+Gt(t)+'"]';t==="image"&&i&&i.imageSrcSet?(o+='[imagesrcset="'+Gt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(o+='[imagesizes="'+Gt(i.imageSizes)+'"]')):o+='[href="'+Gt(e)+'"]';var u=o;switch(t){case"style":u=Nl(e);break;case"script":u=wl(e)}Ft.has(u)||(e=v({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),Ft.set(u,e),r.querySelector(o)!==null||t==="style"&&r.querySelector(ja(u))||t==="script"&&r.querySelector(za(u))||(t=r.createElement("link"),ct(t,"link",e),We(t),r.head.appendChild(t)))}}function Cb(e,t){Mn.m(e,t);var i=Tl;if(i&&e){var r=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+Gt(r)+'"][href="'+Gt(e)+'"]',u=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=wl(e)}if(!Ft.has(u)&&(e=v({rel:"modulepreload",href:e},t),Ft.set(u,e),i.querySelector(o)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(za(u)))return}r=i.createElement("link"),ct(r,"link",e),We(r),i.head.appendChild(r)}}}function Tb(e,t,i){Mn.S(e,t,i);var r=Tl;if(r&&e){var o=Ki(r).hoistableStyles,u=Nl(e);t=t||"default";var h=o.get(u);if(!h){var y={loading:0,preload:null};if(h=r.querySelector(ja(u)))y.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},i),(i=Ft.get(u))&&Au(e,i);var x=h=r.createElement("link");We(x),ct(x,"link",e),x._p=new Promise(function(w,D){x.onload=w,x.onerror=D}),x.addEventListener("load",function(){y.loading|=1}),x.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Cr(h,t,r)}h={type:"stylesheet",instance:h,count:1,state:y},o.set(u,h)}}}function Nb(e,t){Mn.X(e,t);var i=Tl;if(i&&e){var r=Ki(i).hoistableScripts,o=wl(e),u=r.get(o);u||(u=i.querySelector(za(o)),u||(e=v({src:e,async:!0},t),(t=Ft.get(o))&&Ru(e,t),u=i.createElement("script"),We(u),ct(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(o,u))}}function wb(e,t){Mn.M(e,t);var i=Tl;if(i&&e){var r=Ki(i).hoistableScripts,o=wl(e),u=r.get(o);u||(u=i.querySelector(za(o)),u||(e=v({src:e,async:!0,type:"module"},t),(t=Ft.get(o))&&Ru(e,t),u=i.createElement("script"),We(u),ct(u,"link",e),i.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},r.set(o,u))}}function Zg(e,t,i,r){var o=(o=ne.current)?Er(o):null;if(!o)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=Nl(i.href),i=Ki(o).hoistableStyles,r=i.get(t),r||(r={type:"style",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=Nl(i.href);var u=Ki(o).hoistableStyles,h=u.get(e);if(h||(o=o.ownerDocument||o,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=o.querySelector(ja(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Ft.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Ft.set(e,i),u||Ab(o,e,i,h.state))),t&&r===null)throw Error(s(528,""));return h}if(t&&r!==null)throw Error(s(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=wl(i),i=Ki(o).hoistableScripts,r=i.get(t),r||(r={type:"script",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Nl(e){return'href="'+Gt(e)+'"'}function ja(e){return'link[rel="stylesheet"]['+e+"]"}function Kg(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Ab(e,t,i,r){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?r.loading=1:(t=e.createElement("link"),r.preload=t,t.addEventListener("load",function(){return r.loading|=1}),t.addEventListener("error",function(){return r.loading|=2}),ct(t,"link",i),We(t),e.head.appendChild(t))}function wl(e){return'[src="'+Gt(e)+'"]'}function za(e){return"script[async]"+e}function Pg(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+Gt(i.href)+'"]');if(r)return t.instance=r,We(r),r;var o=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return r=(e.ownerDocument||e).createElement("style"),We(r),ct(r,"style",o),Cr(r,i.precedence,e),t.instance=r;case"stylesheet":o=Nl(i.href);var u=e.querySelector(ja(o));if(u)return t.state.loading|=4,t.instance=u,We(u),u;r=Kg(i),(o=Ft.get(o))&&Au(r,o),u=(e.ownerDocument||e).createElement("link"),We(u);var h=u;return h._p=new Promise(function(y,x){h.onload=y,h.onerror=x}),ct(u,"link",r),t.state.loading|=4,Cr(u,i.precedence,e),t.instance=u;case"script":return u=wl(i.src),(o=e.querySelector(za(u)))?(t.instance=o,We(o),o):(r=i,(o=Ft.get(u))&&(r=v({},i),Ru(r,o)),e=e.ownerDocument||e,o=e.createElement("script"),We(o),ct(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(r=t.instance,t.state.loading|=4,Cr(r,i.precedence,e));return t.instance}function Cr(e,t,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,u=o,h=0;h<r.length;h++){var y=r[h];if(y.dataset.precedence===t)u=y;else if(u!==o)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function Au(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ru(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Tr=null;function Fg(e,t,i){if(Tr===null){var r=new Map,o=Tr=new Map;o.set(i,r)}else o=Tr,r=o.get(i),r||(r=new Map,o.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),o=0;o<i.length;o++){var u=i[o];if(!(u[Fl]||u[lt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var h=u.getAttribute(t)||"";h=e+h;var y=r.get(h);y?y.push(u):r.set(h,[u])}}return r}function Jg(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Rb(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function $g(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Mb(e,t,i,r){if(i.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var o=Nl(r.href),u=t.querySelector(ja(o));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Nr.bind(e),t.then(e,e)),i.state.loading|=4,i.instance=u,We(u);return}u=t.ownerDocument||t,r=Kg(r),(o=Ft.get(o))&&Au(r,o),u=u.createElement("link"),We(u);var h=u;h._p=new Promise(function(y,x){h.onload=y,h.onerror=x}),ct(u,"link",r),i.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Nr.bind(e),t.addEventListener("load",i),t.addEventListener("error",i))}}var Mu=0;function Db(e,t){return e.stylesheets&&e.count===0&&Ar(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var r=setTimeout(function(){if(e.stylesheets&&Ar(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Mu===0&&(Mu=62500*fb());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ar(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Mu?50:800)+t);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}function Nr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ar(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wr=null;function Ar(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wr=new Map,t.forEach(Ob,e),wr=null,Nr.call(e))}function Ob(e,t){if(!(t.state.loading&4)){var i=wr.get(e);if(i)var r=i.get(null);else{i=new Map,wr.set(e,i);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<o.length;u++){var h=o[u];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(i.set(h.dataset.precedence,h),r=h)}r&&i.set(null,r)}o=t.instance,h=o.getAttribute("data-precedence"),u=i.get(h)||r,u===r&&i.set(null,o),i.set(h,o),this.count++,r=Nr.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),u?u.parentNode.insertBefore(o,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Ia={$$typeof:fe,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function jb(e,t,i,r,o,u,h,y,x){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cc(0),this.hiddenUpdates=Cc(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=u,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function Wg(e,t,i,r,o,u,h,y,x,w,D,z){return e=new jb(e,t,i,h,x,w,D,z,y),t=1,u===!0&&(t|=24),u=Ot(3,null,null,t),e.current=u,u.stateNode=e,t=co(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:r,isDehydrated:i,cache:t},ho(u),e}function ep(e){return e?(e=ll,e):ll}function tp(e,t,i,r,o,u){o=ep(o),r.context===null?r.context=o:r.pendingContext=o,r=Vn(t),r.payload={element:i},u=u===void 0?null:u,u!==null&&(r.callback=u),i=Qn(e,r,t),i!==null&&(Tt(i,e,t),ha(i,e,t))}function np(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function Du(e,t){np(e,t),(e=e.alternate)&&np(e,t)}function ip(e){if(e.tag===13||e.tag===31){var t=Ei(e,67108864);t!==null&&Tt(t,e,67108864),Du(e,67108864)}}function lp(e){if(e.tag===13||e.tag===31){var t=Ut();t=Tc(t);var i=Ei(e,t);i!==null&&Tt(i,e,t),Du(e,t)}}var Rr=!0;function zb(e,t,i,r){var o=O.T;O.T=null;var u=B.p;try{B.p=2,Ou(e,t,i,r)}finally{B.p=u,O.T=o}}function Ib(e,t,i,r){var o=O.T;O.T=null;var u=B.p;try{B.p=8,Ou(e,t,i,r)}finally{B.p=u,O.T=o}}function Ou(e,t,i,r){if(Rr){var o=ju(r);if(o===null)_u(e,t,r,Mr,i),sp(e,r);else if(Ub(o,e,t,i,r))r.stopPropagation();else if(sp(e,r),t&4&&-1<Lb.indexOf(e)){for(;o!==null;){var u=Zi(o);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var h=_i(u.pendingLanes);if(h!==0){var y=u;for(y.pendingLanes|=2,y.entangledLanes|=2;h;){var x=1<<31-Mt(h);y.entanglements[1]|=x,h&=~x}un(u),(_e&6)===0&&(dr=At()+500,Ra(0))}}break;case 31:case 13:y=Ei(u,2),y!==null&&Tt(y,u,2),mr(),Du(u,2)}if(u=ju(r),u===null&&_u(e,t,r,Mr,i),u===o)break;o=u}o!==null&&r.stopPropagation()}else _u(e,t,r,null,i)}}function ju(e){return e=zc(e),zu(e)}var Mr=null;function zu(e){if(Mr=null,e=Xi(e),e!==null){var t=f(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=d(t),e!==null)return e;e=null}else if(i===31){if(e=m(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Mr=e,null}function ap(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sv()){case hd:return 2;case md:return 8;case vs:case xv:return 32;case gd:return 268435456;default:return 32}default:return 32}}var Iu=!1,ni=null,ii=null,li=null,La=new Map,Ua=new Map,ai=[],Lb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sp(e,t){switch(e){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ii=null;break;case"mouseover":case"mouseout":li=null;break;case"pointerover":case"pointerout":La.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ua.delete(t.pointerId)}}function Ha(e,t,i,r,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:u,targetContainers:[o]},t!==null&&(t=Zi(t),t!==null&&ip(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Ub(e,t,i,r,o){switch(t){case"focusin":return ni=Ha(ni,e,t,i,r,o),!0;case"dragenter":return ii=Ha(ii,e,t,i,r,o),!0;case"mouseover":return li=Ha(li,e,t,i,r,o),!0;case"pointerover":var u=o.pointerId;return La.set(u,Ha(La.get(u)||null,e,t,i,r,o)),!0;case"gotpointercapture":return u=o.pointerId,Ua.set(u,Ha(Ua.get(u)||null,e,t,i,r,o)),!0}return!1}function rp(e){var t=Xi(e.target);if(t!==null){var i=f(t);if(i!==null){if(t=i.tag,t===13){if(t=d(i),t!==null){e.blockedOn=t,Sd(e.priority,function(){lp(i)});return}}else if(t===31){if(t=m(i),t!==null){e.blockedOn=t,Sd(e.priority,function(){lp(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=ju(e.nativeEvent);if(i===null){i=e.nativeEvent;var r=new i.constructor(i.type,i);jc=r,i.target.dispatchEvent(r),jc=null}else return t=Zi(i),t!==null&&ip(t),e.blockedOn=i,!1;t.shift()}return!0}function cp(e,t,i){Dr(e)&&i.delete(t)}function Hb(){Iu=!1,ni!==null&&Dr(ni)&&(ni=null),ii!==null&&Dr(ii)&&(ii=null),li!==null&&Dr(li)&&(li=null),La.forEach(cp),Ua.forEach(cp)}function Or(e,t){e.blockedOn===t&&(e.blockedOn=null,Iu||(Iu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Hb)))}var jr=null;function op(e){jr!==e&&(jr=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){jr===e&&(jr=null);for(var t=0;t<e.length;t+=3){var i=e[t],r=e[t+1],o=e[t+2];if(typeof r!="function"){if(zu(r||i)===null)continue;break}var u=Zi(i);u!==null&&(e.splice(t,3),t-=3,jo(u,{pending:!0,data:o,method:i.method,action:r},r,o))}}))}function Al(e){function t(x){return Or(x,e)}ni!==null&&Or(ni,e),ii!==null&&Or(ii,e),li!==null&&Or(li,e),La.forEach(t),Ua.forEach(t);for(var i=0;i<ai.length;i++){var r=ai[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<ai.length&&(i=ai[0],i.blockedOn===null);)rp(i),i.blockedOn===null&&ai.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(r=0;r<i.length;r+=3){var o=i[r],u=i[r+1],h=o[vt]||null;if(typeof u=="function")h||op(i);else if(h){var y=null;if(u&&u.hasAttribute("formAction")){if(o=u,h=u[vt]||null)y=h.formAction;else if(zu(o)!==null)continue}else y=h.action;typeof y=="function"?i[r+1]=y:(i.splice(r,3),r-=3),op(i)}}}function up(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(h){return o=h})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),r||setTimeout(i,20)}function i(){if(!r&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(i,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function Lu(e){this._internalRoot=e}zr.prototype.render=Lu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var i=t.current,r=Ut();tp(i,r,e,t,null,null)},zr.prototype.unmount=Lu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tp(e.current,2,null,e,null,null),mr(),t[Qi]=null}};function zr(e){this._internalRoot=e}zr.prototype.unstable_scheduleHydration=function(e){if(e){var t=bd();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ai.length&&t!==0&&t<ai[i].priority;i++);ai.splice(i,0,e),i===0&&rp(e)}};var fp=n.version;if(fp!=="19.2.4")throw Error(s(527,fp,"19.2.4"));B.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var Bb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ir=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ir.isDisabled&&Ir.supportsFiber)try{Zl=Ir.inject(Bb),Rt=Ir}catch{}}return ka.createRoot=function(e,t){if(!c(e))throw Error(s(299));var i=!1,r="",o=_m,u=vm,h=bm;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Wg(e,1,!1,null,null,i,r,null,o,u,h,up),e[Qi]=t.current,yu(e),new Lu(t)},ka.hydrateRoot=function(e,t,i){if(!c(e))throw Error(s(299));var r=!1,o="",u=_m,h=vm,y=bm,x=null;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(u=i.onUncaughtError),i.onCaughtError!==void 0&&(h=i.onCaughtError),i.onRecoverableError!==void 0&&(y=i.onRecoverableError),i.formState!==void 0&&(x=i.formState)),t=Wg(e,1,!0,t,i??null,r,o,x,u,h,y,up),t.context=ep(null),i=t.current,r=Ut(),r=Tc(r),o=Vn(r),o.callback=null,Qn(i,o,r),i=r,t.current.lanes=i,Pl(t,i),un(t),e[Qi]=t.current,yu(e),new zr(t)},ka.version="19.2.4",ka}var Sp;function Fb(){if(Sp)return Bu.exports;Sp=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Bu.exports=Pb(),Bu.exports}var Jb=Fb();const xp=l=>{let n;const a=new Set,s=(g,S)=>{const v=typeof g=="function"?g(n):g;if(!Object.is(v,n)){const b=n;n=S??(typeof v!="object"||v===null)?v:Object.assign({},n,v),a.forEach(M=>M(n,b))}},c=()=>n,m={setState:s,getState:c,getInitialState:()=>p,subscribe:g=>(a.add(g),()=>a.delete(g))},p=n=l(s,c,m);return m},$b=(l=>l?xp(l):xp),Wb=l=>l;function e1(l,n=Wb){const a=Lr.useSyncExternalStore(l.subscribe,Lr.useCallback(()=>n(l.getState()),[l,n]),Lr.useCallback(()=>n(l.getInitialState()),[l,n]));return Lr.useDebugValue(a),a}const Ep=l=>{const n=$b(l),a=s=>e1(n,s);return Object.assign(a,n),a},Ry=(l=>l?Ep(l):Ep),t1=l=>{const n=l.stats.intelligence+l.stats.stamina+l.stats.charisma;let a=0;return l.job&&(a=(l.jobLevel+1)*1e3,a+=l.performance*100),{money:l.money,stats:n*100,jobBonus:a,total:l.money+n*100+a}},n1=l=>({rankings:l.map(a=>({player:a,score:t1(a),rank:0})).sort((a,s)=>s.score.total-a.score.total).map((a,s)=>({...a,rank:s+1}))}),fn=(l,n)=>({...l,money:Math.max(0,l.money+n)}),ri=(l,n,a)=>({...l,stats:{...l.stats,[n]:Math.max(0,l.stats[n]+a)}}),i1=(l,n)=>{if(!l.job)return l;const a=Math.max(0,Math.min(9,l.performance+n));return{...l,performance:a}},l1=(l,n)=>[...l].sort((a,s)=>s.money-a.money).slice(0,n),a1=(l,n)=>[...l].sort((a,s)=>a.money-s.money).slice(0,n),s1=(l,n)=>l.reduce((a,s)=>s.stats[n]>a.stats[n]?s:a),Jt=[{id:"chen-jian-zhi",name:"",gender:"male",initialMoney:3e3,initialStats:{intelligence:4,stamina:6,charisma:5},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"zheng-an-qi",name:"",gender:"female",initialMoney:2e3,initialStats:{intelligence:6,stamina:4,charisma:7},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"yao-xin-bei",name:"",gender:"female",initialMoney:2e3,initialStats:{intelligence:7,stamina:7,charisma:5},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"chen-dong-ming",name:"",gender:"male",initialMoney:8e3,initialStats:{intelligence:5,stamina:7,charisma:3},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"ke-ruo-ya",name:"",gender:"female",initialMoney:1e4,initialStats:{intelligence:8,stamina:4,charisma:6},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"lu-bing-yan",name:"",gender:"male",initialMoney:1e4,initialStats:{intelligence:4,stamina:7,charisma:4},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"xu-rui-he",name:"",gender:"male",initialMoney:7e3,initialStats:{intelligence:8,stamina:5,charisma:4},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"liang-si-yu",name:"",gender:"female",initialMoney:5e3,initialStats:{intelligence:7,stamina:5,charisma:7},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"ma-fei-yang",name:"",gender:"male",initialMoney:8e3,initialStats:{intelligence:4,stamina:4,charisma:8},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"wu-xin-yi",name:"",gender:"female",initialMoney:7e3,initialStats:{intelligence:2,stamina:7,charisma:4},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"zhao-bo-qian",name:"",gender:"male",initialMoney:5e3,initialStats:{intelligence:6,stamina:3,charisma:7},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"su-xun-jie",name:"",gender:"female",initialMoney:6e3,initialStats:{intelligence:4,stamina:6,charisma:7},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"wang-han-yao",name:"",gender:"male",initialMoney:5500,initialStats:{intelligence:6,stamina:6,charisma:6},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"zhuang-yu-cheng",name:"",gender:"female",initialMoney:5500,initialStats:{intelligence:7,stamina:2,charisma:6},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""},{id:"zhao-bo-xuan",name:"",gender:"male",initialMoney:5e3,initialStats:{intelligence:4,stamina:4,charisma:7},marriageRequirement:{intelligence:15,stamina:15,charisma:15},description:""}],Qa=[{id:"lawyer",name:"",category:"intelligence",levels:[{name:"",requiredStats:{intelligence:20,charisma:15},salary:[4e3,5e3,6e3]},{name:"",requiredStats:{intelligence:25,stamina:10,charisma:20},salary:[1e4,12e3,15e3]},{name:"",requiredStats:{intelligence:30,stamina:10,charisma:25},salary:[18e3,2e4,25e3,3e4]}],skill:""},{id:"teacher",name:"",category:"intelligence",levels:[{name:"",requiredStats:{intelligence:15,charisma:5},salary:[2e3,3e3,4e3]},{name:"",requiredStats:{intelligence:20,stamina:10,charisma:10},salary:[8e3,1e4,15e3]},{name:"",requiredStats:{intelligence:25,stamina:15,charisma:15},salary:[2e4,22e3,24e3,26e3]}],skill:"+1"},{id:"smuggler",name:"",category:"intelligence",levels:[{name:"",requiredStats:{intelligence:12,charisma:8},salary:[2e3,4e3,6e3]},{name:"",requiredStats:{intelligence:18,charisma:15},salary:[1e4,15e3,2e4]},{name:"",requiredStats:{intelligence:25,stamina:10,charisma:20},salary:[3e4,4e4,5e4]}],skill:" $8,000 "},{id:"worker",name:"",category:"stamina",levels:[{name:"",requiredStats:{stamina:12,charisma:3},salary:[1e3,2e3,3e3]},{name:"",requiredStats:{stamina:18,charisma:8},salary:[5e3,6e3,7e3]},{name:"",requiredStats:{intelligence:10,stamina:20,charisma:15},salary:[1e4,12e3,15e3]}],skill:"+1"},{id:"farmer",name:"",category:"stamina",levels:[{name:"",requiredStats:{stamina:10},salary:[1e3,2e3,3e3]},{name:"",requiredStats:{stamina:18,charisma:8},salary:[5e3,7e3,1e4]},{name:"",requiredStats:{intelligence:15,stamina:25,charisma:15},salary:[2e4,22e3,25e3]}],skill:"+1"},{id:"gangster",name:"",category:"stamina",levels:[{name:"",requiredStats:{stamina:12,charisma:8},salary:[2e3,4e3,6e3]},{name:"",requiredStats:{stamina:20,charisma:15},salary:[1e4,15e3,2e4]},{name:"",requiredStats:{intelligence:15,stamina:25,charisma:20},salary:[3e4,35e3,4e4]}],skill:" -5"},{id:"singer",name:"",category:"charisma",levels:[{name:"",requiredStats:{stamina:8,charisma:12},salary:[800,1500,2e3]},{name:"",requiredStats:{intelligence:10,stamina:15,charisma:18},salary:[5e3,8e3,12e3]},{name:"",requiredStats:{intelligence:15,stamina:20,charisma:25},salary:[15e3,2e4,3e4]}],skill:"+1"},{id:"magician",name:"",category:"charisma",levels:[{name:"",requiredStats:{intelligence:10,charisma:10},salary:[800,1200,1500]},{name:"",requiredStats:{intelligence:18,charisma:18},salary:[2500,3e3,4e3]},{name:"",requiredStats:{intelligence:25,stamina:15,charisma:25},salary:[8e3,1e4,15e3]}],skill:""},{id:"hostess",name:"",category:"charisma",levels:[{name:"",requiredStats:{stamina:10,charisma:15},salary:[1500,2e3,2500]},{name:"",requiredStats:{intelligence:8,stamina:15,charisma:22},salary:[6e3,8e3,15e3]},{name:"",requiredStats:{intelligence:15,stamina:18,charisma:28},salary:[2e4,25e3,35e3]}],skill:""}],My=(l,n,a=0)=>{const s=n.levels[a].requiredStats;return(s.intelligence===void 0||l.intelligence>=s.intelligence)&&(s.stamina===void 0||l.stamina>=s.stamina)&&(s.charisma===void 0||l.charisma>=s.charisma)},r1=()=>({intelligence:Qa.filter(l=>l.category==="intelligence"),stamina:Qa.filter(l=>l.category==="stamina"),charisma:Qa.filter(l=>l.category==="charisma")}),c1=[{id:"social-training",type:"study",name:"",description:" +2",cost:500,effect:{type:"stat_change",stat:"charisma",value:2},count:4},{id:"weight-training",type:"study",name:"",description:" +2",cost:500,effect:{type:"stat_change",stat:"stamina",value:2},count:4},{id:"thesis-research",type:"study",name:"",description:" +2",cost:500,effect:{type:"stat_change",stat:"intelligence",value:2},count:4},{id:"free-research",type:"study",name:"",description:" +1",cost:300,effect:{type:"stat_change_choice",value:1},count:3},{id:"performance",type:"work",name:"",description:" +1",effect:{type:"performance_change",value:1},count:6},{id:"bootlicking",type:"work",name:"",description:" $500 -1",effect:{type:"special",handler:"bootlicking"},count:2},{id:"socializing",type:"work",name:"",description:" $500 +2",effect:{type:"special",handler:"socializing"},count:2},{id:"overtime",type:"work",name:"",description:" $1000 -2",effect:{type:"special",handler:"overtime"},count:2},{id:"steal",type:"function",name:"",description:"",effect:{type:"special",handler:"steal"},count:2},{id:"something-from-nothing",type:"function",name:"",description:"",effect:{type:"draw_cards",count:2},count:3},{id:"sabotage",type:"function",name:"",description:" 2 ",effect:{type:"special",handler:"sabotage"},count:2},{id:"invalid",type:"function",name:"",description:"",effect:{type:"special",handler:"invalid"},count:3},{id:"job-change",type:"function",name:"",description:"",effect:{type:"special",handler:"job_change"},count:2},{id:"field-trip",type:"explore",name:"",description:"",effect:{type:"explore",location:"random"},count:3}],o1=()=>{const l=[];let n=0;for(const a of c1)for(let s=0;s<a.count;s++)l.push({...a,id:`${a.id}-${n++}`});return l},Dy=l=>{const n=[...l];for(let a=n.length-1;a>0;a--){const s=Math.floor(Math.random()*(a+1));[n[a],n[s]]=[n[s],n[a]]}return n},u1=[{id:"new-mayor",turn:1,name:"",description:" $500 ",target:{type:"all"},effect:{type:"money_change",value:500}},{id:"poverty-relief",turn:5,name:"",description:" $1,500  $1,500",target:{type:"poorest",count:4},effect:{type:"special",handler:"poverty_relief"}},{id:"competition",turn:8,name:"",description:"",target:{type:"all"},effect:{type:"special",handler:"competition"}},{id:"finale",turn:10,name:"",description:"",target:{type:"all"},effect:{type:"special",handler:"game_end"}}],Cp=[{id:"tax",turn:"random",name:"",description:" 2  10% ",target:{type:"richest",count:2},effect:{type:"special",handler:"tax"}},{id:"red-envelope",turn:"random",name:"",description:" +$1,000",target:{type:"all"},effect:{type:"money_change",value:1e3}},{id:"plague",turn:"random",name:"",description:" -3",target:{type:"all"},effect:{type:"stat_change",stat:"stamina",value:-3}},{id:"white-terror",turn:"random",name:"",description:" -3",target:{type:"all"},effect:{type:"stat_change",stat:"intelligence",value:-3}},{id:"water-shortage",turn:"random",name:"",description:" -3",target:{type:"all"},effect:{type:"stat_change",stat:"charisma",value:-3}},{id:"vaccine",turn:"random",name:"",description:" +3",target:{type:"all"},effect:{type:"stat_change",stat:"stamina",value:3}},{id:"lecture",turn:"random",name:"",description:" +3",target:{type:"all"},effect:{type:"stat_change",stat:"intelligence",value:3}},{id:"beauty-contest",turn:"random",name:"",description:" +3",target:{type:"all"},effect:{type:"stat_change",stat:"charisma",value:3}},{id:"voucher",turn:"random",name:"",description:"",target:{type:"all"},effect:{type:"draw_cards",count:1}},{id:"landlord-gift",turn:"random",name:"",description:" 2  $1,000",target:{type:"poorest",count:2},effect:{type:"money_change",value:1e3}}],f1=l=>{const n=u1.find(s=>s.turn===l);if(n)return n;const a=Math.floor(Math.random()*Cp.length);return{...Cp[a],turn:l}},Oy=[{id:"park",name:"",outcomes:[{description:" -2 $500",probability:.3,effect:{type:"special",handler:"park_bad"}},{description:" +2 $500",probability:.3,effect:{type:"special",handler:"park_good"}},{description:"",probability:.4,effect:{type:"stat_change",stat:"stamina",value:0}}]},{id:"library",name:"",outcomes:[{description:" -2",probability:.3,effect:{type:"stat_change",stat:"intelligence",value:-2}},{description:" +3",probability:.4,effect:{type:"stat_change",stat:"intelligence",value:3}},{description:" +1",probability:.3,effect:{type:"stat_change",stat:"intelligence",value:1}}]},{id:"home",name:"",outcomes:[{description:" +3",probability:.5,effect:{type:"stat_change",stat:"stamina",value:3}},{description:" -2",probability:.3,effect:{type:"stat_change",stat:"stamina",value:-2}},{description:" +1",probability:.2,effect:{type:"stat_change",stat:"stamina",value:1}}]}],d1=l=>{const n=Oy.find(c=>c.id===l);if(!n)return null;const a=Math.random();let s=0;for(const c of n.outcomes)if(s+=c.probability,a<s)return{location:n,outcome:c};return{location:n,outcome:n.outcomes[n.outcomes.length-1]}},h1=l=>Qa.filter(n=>My(l.stats,n,0)),m1=(l,n)=>{const a=Qa.find(s=>s.id===n);return!a||!My(l.stats,a,0)?l:{...l,job:a,jobLevel:0,performance:0}},wf=l=>{if(!l.job||l.jobLevel>=2)return!1;const n=l.jobLevel+1,a=l.job.levels[n].requiredStats,s=n*3;return l.performance<s?!1:(a.intelligence===void 0||l.stats.intelligence>=a.intelligence)&&(a.stamina===void 0||l.stats.stamina>=a.stamina)&&(a.charisma===void 0||l.stats.charisma>=a.charisma)},g1=l=>wf(l)?{...l,jobLevel:l.jobLevel+1}:l,p1=l=>{if(!l.job)return 0;const a=l.job.levels[l.jobLevel].salary,s=l.jobLevel*3,c=l.performance-s,f=Math.min(c,a.length-1);return a[Math.max(0,f)]},y1=l=>{const n=p1(l);return n===0?l:{...l,money:l.money+n}},Tp=l=>l.job?l.job.levels[l.jobLevel].name:"",_1=l=>{if(!l.job)return l;switch(l.job.id){case"teacher":return{...l,stats:{...l.stats,intelligence:l.stats.intelligence+1}};case"worker":case"farmer":return{...l,stats:{...l.stats,stamina:l.stats.stamina+1}};case"singer":return{...l,stats:{...l.stats,charisma:l.stats.charisma+1}};default:return l}},Np=(l,n)=>n.effect.type==="special"&&n.effect.handler==="invalid"?{canPlay:!1,reason:""}:n.cost&&l.money<n.cost?{canPlay:!1,reason:` $${n.cost}`}:n.type==="work"&&!l.job?{canPlay:!1,reason:""}:n.effect.type==="special"&&n.effect.handler==="job_change"&&!l.job?{canPlay:!1,reason:""}:{canPlay:!0},v1=(l,n)=>{switch(n.type){case"stat_change":return{player:ri(l,n.stat,n.value),message:`${jy(n.stat)} ${n.value>0?"+":""}${n.value}`};case"money_change":return{player:fn(l,n.value),message:` ${n.value>0?"+":""}$${n.value}`};case"performance_change":return l.job?{player:i1(l,n.value),message:` ${n.value>0?"+":""}${n.value}`}:{player:l,message:""};case"stat_change_choice":return{player:l,message:"",needsSelection:{type:"stat",options:["intelligence","stamina","charisma"]}};case"draw_cards":return{player:l,message:` ${n.count} `};case"explore":return{player:l,message:"",needsSelection:{type:"location"}};case"special":return b1(l,n.handler);default:return{player:l,message:""}}},b1=(l,n)=>{switch(n){case"bootlicking":return{player:ri(fn(l,500),"charisma",-1),message:" $500 -1"};case"socializing":return l.money<500?{player:l,message:""}:{player:ri(fn(l,-500),"charisma",2),message:" $500 +2"};case"overtime":return{player:ri(fn(l,1e3),"stamina",-2),message:" $1000 -2"};case"steal":return{player:l,message:"",needsSelection:{type:"player"}};case"sabotage":return{player:l,message:"",needsSelection:{type:"player"}};case"invalid":return{player:l,message:""};case"job_change":return{player:{...l,job:null,jobLevel:0,performance:0},message:""};case"park_bad":return{player:ri(fn(l,-500),"charisma",-2),message:" -2 $500"};case"park_good":return{player:ri(fn(l,500),"stamina",2),message:" +2 $500"};default:return{player:l,message:`: ${n}`}}},wp=(l,n)=>{let a=l;return n.cost&&(a=fn(l,-n.cost)),{...v1(a,n.effect),usedCard:n}},S1=(l,n,a)=>({player:ri(l,n,a),message:`${jy(n)} +${a}`}),jy=l=>({intelligence:"",stamina:"",charisma:""})[l],Ap=3,Rp=2,Af=10,zy=10,Iy=(l,n)=>{const a=l.map((d,m)=>{const p=Jt.find(g=>g.id===n[m]);return x1(d,p)});let c=Dy(o1());const f=a.map(d=>{const m=c.slice(0,Ap);return c=c.slice(Ap),{...d,hand:m}});return{playerCount:4,maxTurns:zy,players:f,currentPlayerIndex:0,turn:1,phase:"event",deck:c,discardPile:[],currentEvent:null,eventLog:[],selectedCardIndex:null,showEventModal:!1}},x1=(l,n)=>({id:`player-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:l,character:n,stats:{...n.initialStats},money:n.initialMoney,job:null,jobLevel:0,performance:0,hand:[],isSkipTurn:!1}),lf=l=>{const n=f1(l.turn);return{...l,phase:"event",currentEvent:n,showEventModal:!0}},E1=l=>{if(!l.currentEvent)return l;const n=l.currentEvent;let a=[...l.players||[]];const s=[`${n.name}${n.description}`];let c;switch(n.target.type){case"all":c=a;break;case"richest":c=l1(a,n.target.count||1);break;case"poorest":c=a1(a,n.target.count||1);break;default:c=a}if(n.effect.type==="special")switch(n.effect.handler){case"poverty_relief":a=a.map(d=>d.money<1500?(s.push(`${d.name}  $1,500`),{...d,money:1500}):d);break;case"tax":a=a.map(d=>{if(c.find(m=>m.id===d.id)){const m=Math.floor(d.money*.1);return s.push(`${d.name}  $${m}`),fn(d,-m)}return d});break;case"competition":const f=[{stat:"intelligence",name:"",prize:2e3},{stat:"stamina",name:"",prize:2e3},{stat:"charisma",name:"",prize:2e3}];for(const{stat:d,name:m,prize:p}of f){const g=s1(a,d);s.push(`${m}${g.name} $${p}`),a=a.map(S=>S.id===g.id?fn(S,p):S)}break;case"game_end":return{...l,phase:"game_over",currentEvent:null,showEventModal:!1,eventLog:[...l.eventLog||[],...s]}}else if(a=a.map(f=>{if(!c.find(d=>d.id===f.id))return f;switch(n.effect.type){case"money_change":return fn(f,n.effect.value);case"stat_change":return ri(f,n.effect.stat,n.effect.value);case"draw_cards":return f;default:return f}}),n.effect.type==="draw_cards"){let f=[...l.deck||[]];return a=a.map(d=>{if(!c.find(g=>g.id===d.id))return d;const m=Math.min(n.effect.type==="draw_cards"?n.effect.count:0,f.length),p=f.slice(0,m);return f=f.slice(m),{...d,hand:[...d.hand,...p].slice(0,Af)}}),{...l,players:a,deck:f,currentEvent:null,showEventModal:!1,eventLog:[...l.eventLog||[],...s]}}return{...l,players:a,currentEvent:null,showEventModal:!1,eventLog:[...l.eventLog||[],...s]}},C1=l=>{const n=l.players.map(a=>{let s=y1(a);return s=_1(s),s});return{...l,phase:"salary",players:n}},T1=l=>({...l,phase:"action",currentPlayerIndex:0}),Ly=l=>{const n=l.currentPlayerIndex+1;return n>=l.players.length?{...l,phase:"draw"}:l.players[n].isSkipTurn?Ly({...l,currentPlayerIndex:n,players:l.players.map((a,s)=>s===n?{...a,isSkipTurn:!1}:a)}):{...l,currentPlayerIndex:n}},N1=l=>{let n=[...l.deck||[]];const a=[...l.discardPile||[]],s=l.players.length*Rp;n.length<s&&a.length>0&&(n=[...n,...Dy(a)]);const c=l.players.map(f=>{const d=Math.min(Rp,n.length),m=n.slice(0,d);n=n.slice(d);const p=[...f.hand,...m];return{...f,hand:p.slice(-Af)}});return{...l,phase:"draw",players:c,deck:n,discardPile:[]}},w1=l=>{const n=l.turn+1;return n>zy?{...l,phase:"game_over"}:{...l,turn:n,phase:"event"}},Mp=(l,n,a)=>{let s=[...l.deck||[]];const c=Math.min(a,s.length),f=s.slice(0,c);return s=s.slice(c),{...l,deck:s,players:l.players.map((d,m)=>m===n?{...d,hand:[...d.hand,...f].slice(0,Af)}:d)}},Yu={pendingStatChoice:null,pendingExplore:!1,pendingTargetPlayer:null,pendingFunctionCard:null,lastMessage:null},Dp=(l,n)=>{const a=l.players.length,s=l.pendingFunctionCard?.sourcePlayerIndex??l.currentPlayerIndex;for(let c=1;c<a;c++){const f=(n+c)%a;if(f===s)continue;if(l.players[f].hand.some(p=>p.effect.type==="special"&&p.effect.handler==="invalid"))return f}return-1},Op={playerCount:4,maxTurns:10,players:[],currentPlayerIndex:0,turn:0,phase:"setup",deck:[],discardPile:[],currentEvent:null,eventLog:[],selectedCardIndex:null,showEventModal:!1},Ht=Ry((l,n)=>({...Op,...Yu,startGame:(a,s)=>{const c=Iy(a,s),f=lf(c);l({...f,...Yu,lastMessage:""})},nextPhase:()=>{const a=n();let s;switch(a.phase){case"event":s=C1(a),l({...s,lastMessage:""});break;case"salary":s=T1(a),l({...s,lastMessage:`${a.players[0].name} `});break;case"action":break;case"draw":if(s=w1(a),s.phase==="game_over")l({...s,lastMessage:""});else{const c=lf(s);l({...c,lastMessage:` ${s.turn} `})}break}},confirmEvent:()=>{const a=n(),s=E1(a);l({...s,showEventModal:!1}),setTimeout(()=>n().nextPhase(),500)},selectCard:a=>{l({selectedCardIndex:a})},playSelectedCard:()=>{const a=n();if(a.selectedCardIndex===null||a.phase!=="action")return;const s=a.players[a.currentPlayerIndex],c=s.hand[a.selectedCardIndex];if(!c)return;const f=Np(s,c);if(!f.canPlay){l({lastMessage:f.reason||""});return}if(c.type==="function"&&!(c.effect.type==="special"&&c.effect.handler==="invalid")){const g=Dp(a,a.currentPlayerIndex);if(g!==-1){l({pendingFunctionCard:{card:c,cardIndex:a.selectedCardIndex,sourcePlayerIndex:a.currentPlayerIndex,respondingPlayerIndex:g},lastMessage:`${s.name} ${c.name} ${a.players[g].name} ...`});return}}const d=wp(s,c);if(d.needsSelection){if(d.needsSelection.type==="stat"){l({pendingStatChoice:{cardIndex:a.selectedCardIndex,value:c.effect.type==="stat_change_choice"?c.effect.value:1},lastMessage:d.message});return}if(d.needsSelection.type==="location"){l({pendingExplore:!0,lastMessage:""});return}if(d.needsSelection.type==="player"){const g=c.effect.type==="special"?c.effect.handler:"";l({pendingTargetPlayer:{action:g,cardIndex:a.selectedCardIndex},lastMessage:d.message});return}}const m=a.players.map((g,S)=>S===a.currentPlayerIndex?{...d.player,hand:d.player.hand.filter((v,b)=>b!==a.selectedCardIndex)}:g);let p={players:m,discardPile:[...a.discardPile||[],c],selectedCardIndex:null,lastMessage:d.message};if(c.effect.type==="draw_cards"){const g=Mp({...a,players:m},a.currentPlayerIndex,c.effect.count);p={...p,deck:g.deck,players:g.players}}l(p)},chooseStat:a=>{const s=n();if(!s.pendingStatChoice)return;const c=s.players[s.currentPlayerIndex],f=c.hand[s.pendingStatChoice.cardIndex],d=S1(c,a,s.pendingStatChoice.value);let m=d.player;f.cost&&(m={...m,money:m.money-f.cost});const p=s.players.map((g,S)=>S===s.currentPlayerIndex?{...m,hand:m.hand.filter((v,b)=>b!==s.pendingStatChoice.cardIndex)}:g);l({players:p,discardPile:[...s.discardPile||[],f],selectedCardIndex:null,pendingStatChoice:null,lastMessage:d.message})},chooseExploreLocation:a=>{const s=n();if(!s.pendingExplore)return;const c=d1(a);if(!c)return;const f=s.players[s.currentPlayerIndex];let d=f;const m=c.outcome.effect;if(m.type==="stat_change"?d={...d,stats:{...d.stats,[m.stat]:Math.max(0,d.stats[m.stat]+m.value)}}:m.type==="special"&&(m.handler==="park_bad"?d={...d,money:Math.max(0,d.money-500),stats:{...d.stats,charisma:Math.max(0,d.stats.charisma-2)}}:m.handler==="park_good"&&(d={...d,money:d.money+500,stats:{...d.stats,stamina:d.stats.stamina+2}})),s.selectedCardIndex!==null){const g=f.hand[s.selectedCardIndex];d={...d,hand:d.hand.filter((S,v)=>v!==s.selectedCardIndex)},l({discardPile:[...s.discardPile||[],g]})}const p=s.players.map((g,S)=>S===s.currentPlayerIndex?d:g);l({players:p,pendingExplore:!1,selectedCardIndex:null,lastMessage:`${c.location.name}${c.outcome.description}`})},chooseTargetPlayer:a=>{const s=n();if(!s.pendingTargetPlayer)return;const{action:c,cardIndex:f}=s.pendingTargetPlayer,m=s.players[s.currentPlayerIndex].hand[f],p=s.players.findIndex(b=>b.id===a),g=s.players[p];if(!g||p===s.currentPlayerIndex){l({lastMessage:""});return}let S=[...s.players||[]],v="";switch(c){case"steal":{if(g.hand.length===0){l({lastMessage:`${g.name} `});return}const b=Math.floor(Math.random()*g.hand.length),M=g.hand[b];S=S.map((L,H)=>H===s.currentPlayerIndex?{...L,hand:[...L.hand.filter((Q,ce)=>ce!==f),M]}:H===p?{...L,hand:L.hand.filter((Q,ce)=>ce!==b)}:L),v=` ${g.name} ${M.name}`;break}case"sabotage":{const b=["intelligence","stamina","charisma"],M=b[Math.floor(Math.random()*b.length)],L={intelligence:"",stamina:"",charisma:""};S=S.map((H,Q)=>Q===s.currentPlayerIndex?{...H,hand:H.hand.filter((ce,oe)=>oe!==f)}:Q===p?{...H,stats:{...H.stats,[M]:Math.max(0,H.stats[M]-2)}}:H),v=` ${g.name}${L[M]} -2`;break}default:l({lastMessage:""});return}l({players:S,discardPile:[...s.discardPile||[],m],pendingTargetPlayer:null,selectedCardIndex:null,lastMessage:v})},cancelPendingAction:()=>{l({pendingStatChoice:null,pendingExplore:!1,pendingTargetPlayer:null,pendingFunctionCard:null,selectedCardIndex:null,lastMessage:""})},useInvalidCard:a=>{const s=n();if(!s.pendingFunctionCard)return;const{card:c,cardIndex:f,sourcePlayerIndex:d,respondingPlayerIndex:m}=s.pendingFunctionCard,p=s.players[m],g=s.players[d],S=p.hand[a];if(!S||!(S.effect.type==="special"&&S.effect.handler==="invalid")){l({lastMessage:""});return}const v=s.players.map((b,M)=>M===d?{...b,hand:b.hand.filter((L,H)=>H!==f)}:M===m?{...b,hand:b.hand.filter((L,H)=>H!==a)}:b);l({players:v,discardPile:[...s.discardPile||[],c,S],pendingFunctionCard:null,selectedCardIndex:null,lastMessage:`${p.name} ${g.name} ${c.name}`})},passReaction:()=>{const a=n();if(!a.pendingFunctionCard)return;const{sourcePlayerIndex:s,respondingPlayerIndex:c}=a.pendingFunctionCard,f=Dp(a,c);f===-1||f===s?n().confirmFunctionCard():l({pendingFunctionCard:{...a.pendingFunctionCard,respondingPlayerIndex:f},lastMessage:` ${a.players[f].name} ...`})},confirmFunctionCard:()=>{const a=n();if(!a.pendingFunctionCard)return;const{card:s,cardIndex:c,sourcePlayerIndex:f}=a.pendingFunctionCard,d=a.players[f],m=wp(d,s);if(m.needsSelection?.type==="player"){const S=s.effect.type==="special"?s.effect.handler:"";l({pendingFunctionCard:null,pendingTargetPlayer:{action:S,cardIndex:c},lastMessage:m.message});return}const p=a.players.map((S,v)=>v===f?{...m.player,hand:m.player.hand.filter((b,M)=>M!==c)}:S);let g={players:p,discardPile:[...a.discardPile||[],s],pendingFunctionCard:null,selectedCardIndex:null,lastMessage:`${d.name} ${s.name}${m.message}`};if(s.effect.type==="draw_cards"){const S=Mp({...a,players:p},f,s.effect.count);g={...g,deck:S.deck,players:S.players}}l(g)},endPlayerTurn:()=>{const a=n();if(a.phase!=="action")return;const s=Ly(a);if(s.phase==="draw"){const c=N1(s);l({...c,lastMessage:""})}else l({...s,selectedCardIndex:null,lastMessage:`${s.players[s.currentPlayerIndex].name} `})},applyJob:a=>{const s=n(),c=s.players[s.currentPlayerIndex],f=m1(c,a);if(f.job){const d=s.players.map((m,p)=>p===s.currentPlayerIndex?f:m);l({players:d,lastMessage:` ${f.job.levels[0].name}`})}else l({lastMessage:""})},tryPromote:()=>{const a=n(),s=a.players[a.currentPlayerIndex];if(wf(s)){const c=g1(s),f=a.players.map((d,m)=>m===a.currentPlayerIndex?c:d);l({players:f,lastMessage:` ${c.job.levels[c.jobLevel].name}`})}else l({lastMessage:""})},getCurrentPlayer:()=>{const a=n();return a.players[a.currentPlayerIndex]||null},canCurrentPlayerPlayCard:a=>{const s=n().getCurrentPlayer();if(!s)return{canPlay:!1,reason:""};const c=s.hand[a];return c?Np(s,c):{canPlay:!1,reason:""}},getAvailableJobsForCurrentPlayer:()=>{const a=n().getCurrentPlayer();return a?h1(a):[]},getGameResult:()=>{const a=n();return a.phase!=="game_over"?null:n1(a.players)},resetGame:()=>{l({...Op,...Yu})}})),A1=()=>{};var jp={};const Uy={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const U=function(l,n){if(!l)throw ql(n)},ql=function(l){return new Error("Firebase Database ("+Uy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+l)};const Hy=function(l){const n=[];let a=0;for(let s=0;s<l.length;s++){let c=l.charCodeAt(s);c<128?n[a++]=c:c<2048?(n[a++]=c>>6|192,n[a++]=c&63|128):(c&64512)===55296&&s+1<l.length&&(l.charCodeAt(s+1)&64512)===56320?(c=65536+((c&1023)<<10)+(l.charCodeAt(++s)&1023),n[a++]=c>>18|240,n[a++]=c>>12&63|128,n[a++]=c>>6&63|128,n[a++]=c&63|128):(n[a++]=c>>12|224,n[a++]=c>>6&63|128,n[a++]=c&63|128)}return n},R1=function(l){const n=[];let a=0,s=0;for(;a<l.length;){const c=l[a++];if(c<128)n[s++]=String.fromCharCode(c);else if(c>191&&c<224){const f=l[a++];n[s++]=String.fromCharCode((c&31)<<6|f&63)}else if(c>239&&c<365){const f=l[a++],d=l[a++],m=l[a++],p=((c&7)<<18|(f&63)<<12|(d&63)<<6|m&63)-65536;n[s++]=String.fromCharCode(55296+(p>>10)),n[s++]=String.fromCharCode(56320+(p&1023))}else{const f=l[a++],d=l[a++];n[s++]=String.fromCharCode((c&15)<<12|(f&63)<<6|d&63)}}return n.join("")},Rf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(l,n){if(!Array.isArray(l))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let c=0;c<l.length;c+=3){const f=l[c],d=c+1<l.length,m=d?l[c+1]:0,p=c+2<l.length,g=p?l[c+2]:0,S=f>>2,v=(f&3)<<4|m>>4;let b=(m&15)<<2|g>>6,M=g&63;p||(M=64,d||(b=64)),s.push(a[S],a[v],a[b],a[M])}return s.join("")},encodeString(l,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(l):this.encodeByteArray(Hy(l),n)},decodeString(l,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(l):R1(this.decodeStringToByteArray(l,n))},decodeStringToByteArray(l,n){this.init_();const a=n?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let c=0;c<l.length;){const f=a[l.charAt(c++)],m=c<l.length?a[l.charAt(c)]:0;++c;const g=c<l.length?a[l.charAt(c)]:64;++c;const v=c<l.length?a[l.charAt(c)]:64;if(++c,f==null||m==null||g==null||v==null)throw new M1;const b=f<<2|m>>4;if(s.push(b),g!==64){const M=m<<4&240|g>>2;if(s.push(M),v!==64){const L=g<<6&192|v;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let l=0;l<this.ENCODED_VALS.length;l++)this.byteToCharMap_[l]=this.ENCODED_VALS.charAt(l),this.charToByteMap_[this.byteToCharMap_[l]]=l,this.byteToCharMapWebSafe_[l]=this.ENCODED_VALS_WEBSAFE.charAt(l),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[l]]=l,l>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(l)]=l,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(l)]=l)}}};class M1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const By=function(l){const n=Hy(l);return Rf.encodeByteArray(n,!0)},kr=function(l){return By(l).replace(/\./g,"")},af=function(l){try{return Rf.decodeString(l,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};function D1(l){return ky(void 0,l)}function ky(l,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:const a=n;return new Date(a.getTime());case Object:l===void 0&&(l={});break;case Array:l=[];break;default:return n}for(const a in n)!n.hasOwnProperty(a)||!O1(a)||(l[a]=ky(l[a],n[a]));return l}function O1(l){return l!=="__proto__"}function j1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const z1=()=>j1().__FIREBASE_DEFAULTS__,I1=()=>{if(typeof process>"u"||typeof jp>"u")return;const l=jp.__FIREBASE_DEFAULTS__;if(l)return JSON.parse(l)},L1=()=>{if(typeof document>"u")return;let l;try{l=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=l&&af(l[1]);return n&&JSON.parse(n)},qy=()=>{try{return A1()||z1()||I1()||L1()}catch(l){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${l}`);return}},U1=l=>qy()?.emulatorHosts?.[l],H1=l=>{const n=U1(l);if(!n)return;const a=n.lastIndexOf(":");if(a<=0||a+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const s=parseInt(n.substring(a+1),10);return n[0]==="["?[n.substring(1,a-1),s]:[n.substring(0,a),s]},Gy=()=>qy()?.config;class us{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,a)=>{this.resolve=n,this.reject=a})}wrapCallback(n){return(a,s)=>{a?this.reject(a):this.resolve(s),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(a):n(a,s))}}}function Mf(l){try{return(l.startsWith("http://")||l.startsWith("https://")?new URL(l).hostname:l).endsWith(".cloudworkstations.dev")}catch{return!1}}async function B1(l){return(await fetch(l,{credentials:"include"})).ok}function k1(l,n){if(l.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},s=n||"demo-project",c=l.iat||0,f=l.sub||l.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:c,exp:c+3600,auth_time:c,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}},...l};return[kr(JSON.stringify(a)),kr(JSON.stringify(d)),""].join(".")}const Xa={};function q1(){const l={prod:[],emulator:[]};for(const n of Object.keys(Xa))Xa[n]?l.emulator.push(n):l.prod.push(n);return l}function G1(l){let n=document.getElementById(l),a=!1;return n||(n=document.createElement("div"),n.setAttribute("id",l),a=!0),{created:a,element:n}}let zp=!1;function Y1(l,n){if(typeof window>"u"||typeof document>"u"||!Mf(window.location.host)||Xa[l]===n||Xa[l]||zp)return;Xa[l]=n;function a(b){return`__firebase__banner__${b}`}const s="__firebase__banner",f=q1().prod.length>0;function d(){const b=document.getElementById(s);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,M){b.setAttribute("width","24"),b.setAttribute("id",M),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{zp=!0,d()},b}function S(b,M){b.setAttribute("id",M),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=G1(s),M=a("text"),L=document.getElementById(M)||document.createElement("span"),H=a("learnmore"),Q=document.getElementById(H)||document.createElement("a"),ce=a("preprendIcon"),oe=document.getElementById(ce)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const fe=b.element;m(fe),S(Q,H);const ye=g();p(oe,ce),fe.append(oe,L,Q,ye),document.body.appendChild(fe)}f?(L.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}function V1(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Yy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(V1())}function Q1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X1(){return Uy.NODE_ADMIN===!0}function Z1(){try{return typeof indexedDB=="object"}catch{return!1}}function K1(){return new Promise((l,n)=>{try{let a=!0;const s="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(s);c.onsuccess=()=>{c.result.close(),a||self.indexedDB.deleteDatabase(s),l(!0)},c.onupgradeneeded=()=>{a=!1},c.onerror=()=>{n(c.error?.message||"")}}catch(a){n(a)}})}const P1="FirebaseError";class fs extends Error{constructor(n,a,s){super(a),this.code=n,this.customData=s,this.name=P1,Object.setPrototypeOf(this,fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vy.prototype.create)}}class Vy{constructor(n,a,s){this.service=n,this.serviceName=a,this.errors=s}create(n,...a){const s=a[0]||{},c=`${this.service}/${n}`,f=this.errors[n],d=f?F1(f,s):"Error",m=`${this.serviceName}: ${d} (${c}).`;return new fs(c,m,s)}}function F1(l,n){return l.replace(J1,(a,s)=>{const c=n[s];return c!=null?String(c):`<${s}?>`})}const J1=/\{\$([^}]+)}/g;function Wa(l){return JSON.parse(l)}function $e(l){return JSON.stringify(l)}const Qy=function(l){let n={},a={},s={},c="";try{const f=l.split(".");n=Wa(af(f[0])||""),a=Wa(af(f[1])||""),c=f[2],s=a.d||{},delete a.d}catch{}return{header:n,claims:a,data:s,signature:c}},$1=function(l){const n=Qy(l),a=n.claims;return!!a&&typeof a=="object"&&a.hasOwnProperty("iat")},W1=function(l){const n=Qy(l).claims;return typeof n=="object"&&n.admin===!0};function dn(l,n){return Object.prototype.hasOwnProperty.call(l,n)}function Il(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]}function Ip(l){for(const n in l)if(Object.prototype.hasOwnProperty.call(l,n))return!1;return!0}function qr(l,n,a){const s={};for(const c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=n.call(a,l[c],c,l));return s}function Gr(l,n){if(l===n)return!0;const a=Object.keys(l),s=Object.keys(n);for(const c of a){if(!s.includes(c))return!1;const f=l[c],d=n[c];if(Lp(f)&&Lp(d)){if(!Gr(f,d))return!1}else if(f!==d)return!1}for(const c of s)if(!a.includes(c))return!1;return!0}function Lp(l){return l!==null&&typeof l=="object"}function eS(l){const n=[];for(const[a,s]of Object.entries(l))Array.isArray(s)?s.forEach(c=>{n.push(encodeURIComponent(a)+"="+encodeURIComponent(c))}):n.push(encodeURIComponent(a)+"="+encodeURIComponent(s));return n.length?"&"+n.join("&"):""}class tS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,a){a||(a=0);const s=this.W_;if(typeof n=="string")for(let v=0;v<16;v++)s[v]=n.charCodeAt(a)<<24|n.charCodeAt(a+1)<<16|n.charCodeAt(a+2)<<8|n.charCodeAt(a+3),a+=4;else for(let v=0;v<16;v++)s[v]=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3],a+=4;for(let v=16;v<80;v++){const b=s[v-3]^s[v-8]^s[v-14]^s[v-16];s[v]=(b<<1|b>>>31)&4294967295}let c=this.chain_[0],f=this.chain_[1],d=this.chain_[2],m=this.chain_[3],p=this.chain_[4],g,S;for(let v=0;v<80;v++){v<40?v<20?(g=m^f&(d^m),S=1518500249):(g=f^d^m,S=1859775393):v<60?(g=f&d|m&(f|d),S=2400959708):(g=f^d^m,S=3395469782);const b=(c<<5|c>>>27)+g+p+S+s[v]&4294967295;p=m,m=d,d=(f<<30|f>>>2)&4294967295,f=c,c=b}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+f&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(n,a){if(n==null)return;a===void 0&&(a=n.length);const s=a-this.blockSize;let c=0;const f=this.buf_;let d=this.inbuf_;for(;c<a;){if(d===0)for(;c<=s;)this.compress_(n,c),c+=this.blockSize;if(typeof n=="string"){for(;c<a;)if(f[d]=n.charCodeAt(c),++d,++c,d===this.blockSize){this.compress_(f),d=0;break}}else for(;c<a;)if(f[d]=n[c],++d,++c,d===this.blockSize){this.compress_(f),d=0;break}}this.inbuf_=d,this.total_+=a}digest(){const n=[];let a=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let c=this.blockSize-1;c>=56;c--)this.buf_[c]=a&255,a/=256;this.compress_(this.buf_);let s=0;for(let c=0;c<5;c++)for(let f=24;f>=0;f-=8)n[s]=this.chain_[c]>>f&255,++s;return n}}function lc(l,n){return`${l} failed: ${n} argument `}const nS=function(l){const n=[];let a=0;for(let s=0;s<l.length;s++){let c=l.charCodeAt(s);if(c>=55296&&c<=56319){const f=c-55296;s++,U(s<l.length,"Surrogate pair missing trail surrogate.");const d=l.charCodeAt(s)-56320;c=65536+(f<<10)+d}c<128?n[a++]=c:c<2048?(n[a++]=c>>6|192,n[a++]=c&63|128):c<65536?(n[a++]=c>>12|224,n[a++]=c>>6&63|128,n[a++]=c&63|128):(n[a++]=c>>18|240,n[a++]=c>>12&63|128,n[a++]=c>>6&63|128,n[a++]=c&63|128)}return n},ac=function(l){let n=0;for(let a=0;a<l.length;a++){const s=l.charCodeAt(a);s<128?n++:s<2048?n+=2:s>=55296&&s<=56319?(n+=4,a++):n+=3}return n};function Gl(l){return l&&l._delegate?l._delegate:l}class es{constructor(n,a,s){this.name=n,this.instanceFactory=a,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}const Li="[DEFAULT]";class iS{constructor(n,a){this.name=n,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const a=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(a)){const s=new us;if(this.instancesDeferred.set(a,s),this.isInitialized(a)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:a});c&&s.resolve(c)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(n){const a=this.normalizeInstanceIdentifier(n?.identifier),s=n?.optional??!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(s)return null;throw c}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(aS(n))try{this.getOrInitializeService({instanceIdentifier:Li})}catch{}for(const[a,s]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);try{const f=this.getOrInitializeService({instanceIdentifier:c});s.resolve(f)}catch{}}}}clearInstance(n=Li){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...n.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=Li){return this.instances.has(n)}getOptions(n=Li){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:a={}}=n,s=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:s,options:a});for(const[f,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(f);s===m&&d.resolve(c)}return c}onInit(n,a){const s=this.normalizeInstanceIdentifier(a),c=this.onInitCallbacks.get(s)??new Set;c.add(n),this.onInitCallbacks.set(s,c);const f=this.instances.get(s);return f&&n(f,s),()=>{c.delete(n)}}invokeOnInitCallbacks(n,a){const s=this.onInitCallbacks.get(a);if(s)for(const c of s)try{c(n,a)}catch{}}getOrInitializeService({instanceIdentifier:n,options:a={}}){let s=this.instances.get(n);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:lS(n),options:a}),this.instances.set(n,s),this.instancesOptions.set(n,a),this.invokeOnInitCallbacks(s,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,s)}catch{}return s||null}normalizeInstanceIdentifier(n=Li){return this.component?this.component.multipleInstances?n:Li:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lS(l){return l===Li?void 0:l}function aS(l){return l.instantiationMode==="EAGER"}class sS{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const a=this.getProvider(n.name);if(a.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);a.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const a=new iS(n,this);return this.providers.set(n,a),a}getProviders(){return Array.from(this.providers.values())}}var je;(function(l){l[l.DEBUG=0]="DEBUG",l[l.VERBOSE=1]="VERBOSE",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.SILENT=5]="SILENT"})(je||(je={}));const rS={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},cS=je.INFO,oS={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},uS=(l,n,...a)=>{if(n<l.logLevel)return;const s=new Date().toISOString(),c=oS[n];if(c)console[c](`[${s}]  ${l.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class Xy{constructor(n){this.name=n,this._logLevel=cS,this._logHandler=uS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in je))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?rS[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...n),this._logHandler(this,je.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...n),this._logHandler(this,je.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,je.INFO,...n),this._logHandler(this,je.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,je.WARN,...n),this._logHandler(this,je.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...n),this._logHandler(this,je.ERROR,...n)}}const fS=(l,n)=>n.some(a=>l instanceof a);let Up,Hp;function dS(){return Up||(Up=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hS(){return Hp||(Hp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zy=new WeakMap,sf=new WeakMap,Ky=new WeakMap,Vu=new WeakMap,Df=new WeakMap;function mS(l){const n=new Promise((a,s)=>{const c=()=>{l.removeEventListener("success",f),l.removeEventListener("error",d)},f=()=>{a(oi(l.result)),c()},d=()=>{s(l.error),c()};l.addEventListener("success",f),l.addEventListener("error",d)});return n.then(a=>{a instanceof IDBCursor&&Zy.set(a,l)}).catch(()=>{}),Df.set(n,l),n}function gS(l){if(sf.has(l))return;const n=new Promise((a,s)=>{const c=()=>{l.removeEventListener("complete",f),l.removeEventListener("error",d),l.removeEventListener("abort",d)},f=()=>{a(),c()},d=()=>{s(l.error||new DOMException("AbortError","AbortError")),c()};l.addEventListener("complete",f),l.addEventListener("error",d),l.addEventListener("abort",d)});sf.set(l,n)}let rf={get(l,n,a){if(l instanceof IDBTransaction){if(n==="done")return sf.get(l);if(n==="objectStoreNames")return l.objectStoreNames||Ky.get(l);if(n==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return oi(l[n])},set(l,n,a){return l[n]=a,!0},has(l,n){return l instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in l}};function pS(l){rf=l(rf)}function yS(l){return l===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...a){const s=l.call(Qu(this),n,...a);return Ky.set(s,n.sort?n.sort():[n]),oi(s)}:hS().includes(l)?function(...n){return l.apply(Qu(this),n),oi(Zy.get(this))}:function(...n){return oi(l.apply(Qu(this),n))}}function _S(l){return typeof l=="function"?yS(l):(l instanceof IDBTransaction&&gS(l),fS(l,dS())?new Proxy(l,rf):l)}function oi(l){if(l instanceof IDBRequest)return mS(l);if(Vu.has(l))return Vu.get(l);const n=_S(l);return n!==l&&(Vu.set(l,n),Df.set(n,l)),n}const Qu=l=>Df.get(l);function vS(l,n,{blocked:a,upgrade:s,blocking:c,terminated:f}={}){const d=indexedDB.open(l,n),m=oi(d);return s&&d.addEventListener("upgradeneeded",p=>{s(oi(d.result),p.oldVersion,p.newVersion,oi(d.transaction),p)}),a&&d.addEventListener("blocked",p=>a(p.oldVersion,p.newVersion,p)),m.then(p=>{f&&p.addEventListener("close",()=>f()),c&&p.addEventListener("versionchange",g=>c(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const bS=["get","getKey","getAll","getAllKeys","count"],SS=["put","add","delete","clear"],Xu=new Map;function Bp(l,n){if(!(l instanceof IDBDatabase&&!(n in l)&&typeof n=="string"))return;if(Xu.get(n))return Xu.get(n);const a=n.replace(/FromIndex$/,""),s=n!==a,c=SS.includes(a);if(!(a in(s?IDBIndex:IDBObjectStore).prototype)||!(c||bS.includes(a)))return;const f=async function(d,...m){const p=this.transaction(d,c?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(m.shift())),(await Promise.all([g[a](...m),c&&p.done]))[0]};return Xu.set(n,f),f}pS(l=>({...l,get:(n,a,s)=>Bp(n,a)||l.get(n,a,s),has:(n,a)=>!!Bp(n,a)||l.has(n,a)}));class xS{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(ES(a)){const s=a.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(a=>a).join(" ")}}function ES(l){return l.getComponent()?.type==="VERSION"}const cf="@firebase/app",kp="0.14.8";const jn=new Xy("@firebase/app"),CS="@firebase/app-compat",TS="@firebase/analytics-compat",NS="@firebase/analytics",wS="@firebase/app-check-compat",AS="@firebase/app-check",RS="@firebase/auth",MS="@firebase/auth-compat",DS="@firebase/database",OS="@firebase/data-connect",jS="@firebase/database-compat",zS="@firebase/functions",IS="@firebase/functions-compat",LS="@firebase/installations",US="@firebase/installations-compat",HS="@firebase/messaging",BS="@firebase/messaging-compat",kS="@firebase/performance",qS="@firebase/performance-compat",GS="@firebase/remote-config",YS="@firebase/remote-config-compat",VS="@firebase/storage",QS="@firebase/storage-compat",XS="@firebase/firestore",ZS="@firebase/ai",KS="@firebase/firestore-compat",PS="firebase",FS="12.9.0";const of="[DEFAULT]",JS={[cf]:"fire-core",[CS]:"fire-core-compat",[NS]:"fire-analytics",[TS]:"fire-analytics-compat",[AS]:"fire-app-check",[wS]:"fire-app-check-compat",[RS]:"fire-auth",[MS]:"fire-auth-compat",[DS]:"fire-rtdb",[OS]:"fire-data-connect",[jS]:"fire-rtdb-compat",[zS]:"fire-fn",[IS]:"fire-fn-compat",[LS]:"fire-iid",[US]:"fire-iid-compat",[HS]:"fire-fcm",[BS]:"fire-fcm-compat",[kS]:"fire-perf",[qS]:"fire-perf-compat",[GS]:"fire-rc",[YS]:"fire-rc-compat",[VS]:"fire-gcs",[QS]:"fire-gcs-compat",[XS]:"fire-fst",[KS]:"fire-fst-compat",[ZS]:"fire-vertex","fire-js":"fire-js",[PS]:"fire-js-all"};const Yr=new Map,$S=new Map,uf=new Map;function qp(l,n){try{l.container.addComponent(n)}catch(a){jn.debug(`Component ${n.name} failed to register with FirebaseApp ${l.name}`,a)}}function Vr(l){const n=l.name;if(uf.has(n))return jn.debug(`There were multiple attempts to register component ${n}.`),!1;uf.set(n,l);for(const a of Yr.values())qp(a,l);for(const a of $S.values())qp(a,l);return!0}function WS(l,n){const a=l.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),l.container.getProvider(n)}function ex(l){return l==null?!1:l.settings!==void 0}const tx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new Vy("app","Firebase",tx);class nx{constructor(n,a,s){this._isDeleted=!1,this._options={...n},this._config={...a},this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}const ix=FS;function Py(l,n={}){let a=l;typeof n!="object"&&(n={name:n});const s={name:of,automaticDataCollectionEnabled:!0,...n},c=s.name;if(typeof c!="string"||!c)throw ui.create("bad-app-name",{appName:String(c)});if(a||(a=Gy()),!a)throw ui.create("no-options");const f=Yr.get(c);if(f){if(Gr(a,f.options)&&Gr(s,f.config))return f;throw ui.create("duplicate-app",{appName:c})}const d=new sS(c);for(const p of uf.values())d.addComponent(p);const m=new nx(a,s,d);return Yr.set(c,m),m}function lx(l=of){const n=Yr.get(l);if(!n&&l===of&&Gy())return Py();if(!n)throw ui.create("no-app",{appName:l});return n}function Ol(l,n,a){let s=JS[l]??l;a&&(s+=`-${a}`);const c=s.match(/\s|\//),f=n.match(/\s|\//);if(c||f){const d=[`Unable to register library "${s}" with version "${n}":`];c&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),c&&f&&d.push("and"),f&&d.push(`version name "${n}" contains illegal characters (whitespace or "/")`),jn.warn(d.join(" "));return}Vr(new es(`${s}-version`,()=>({library:s,version:n}),"VERSION"))}const ax="firebase-heartbeat-database",sx=1,ts="firebase-heartbeat-store";let Zu=null;function Fy(){return Zu||(Zu=vS(ax,sx,{upgrade:(l,n)=>{switch(n){case 0:try{l.createObjectStore(ts)}catch(a){console.warn(a)}}}}).catch(l=>{throw ui.create("idb-open",{originalErrorMessage:l.message})})),Zu}async function rx(l){try{const a=(await Fy()).transaction(ts),s=await a.objectStore(ts).get(Jy(l));return await a.done,s}catch(n){if(n instanceof fs)jn.warn(n.message);else{const a=ui.create("idb-get",{originalErrorMessage:n?.message});jn.warn(a.message)}}}async function Gp(l,n){try{const s=(await Fy()).transaction(ts,"readwrite");await s.objectStore(ts).put(n,Jy(l)),await s.done}catch(a){if(a instanceof fs)jn.warn(a.message);else{const s=ui.create("idb-set",{originalErrorMessage:a?.message});jn.warn(s.message)}}}function Jy(l){return`${l.name}!${l.options.appId}`}const cx=1024,ox=30;class ux{constructor(n){this.container=n,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new dx(a),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Yp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(c=>c.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>ox){const c=hx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){jn.warn(n)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Yp(),{heartbeatsToSend:a,unsentEntries:s}=fx(this._heartbeatsCache.heartbeats),c=kr(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return jn.warn(n),""}}}function Yp(){return new Date().toISOString().substring(0,10)}function fx(l,n=cx){const a=[];let s=l.slice();for(const c of l){const f=a.find(d=>d.agent===c.agent);if(f){if(f.dates.push(c.date),Vp(a)>n){f.dates.pop();break}}else if(a.push({agent:c.agent,dates:[c.date]}),Vp(a)>n){a.pop();break}s=s.slice(1)}return{heartbeatsToSend:a,unsentEntries:s}}class dx{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z1()?K1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const a=await rx(this.app);return a?.heartbeats?a:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gp(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){if(await this._canUseIndexedDBPromise){const s=await this.read();return Gp(this.app,{lastSentHeartbeatDate:n.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...n.heartbeats]})}else return}}function Vp(l){return kr(JSON.stringify({version:2,heartbeats:l})).length}function hx(l){if(l.length===0)return-1;let n=0,a=l[0].date;for(let s=1;s<l.length;s++)l[s].date<a&&(a=l[s].date,n=s);return n}function mx(l){Vr(new es("platform-logger",n=>new xS(n),"PRIVATE")),Vr(new es("heartbeat",n=>new ux(n),"PRIVATE")),Ol(cf,kp,l),Ol(cf,kp,"esm2020"),Ol("fire-js","")}mx("");var gx="firebase",px="12.9.0";Ol(gx,px,"app");var Qp={};const Xp="@firebase/database",Zp="1.1.0";let $y="";function yx(l){$y=l}class _x{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,a){a==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),$e(a))}get(n){const a=this.domStorage_.getItem(this.prefixedName_(n));return a==null?null:Wa(a)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class vx{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,a){a==null?delete this.cache_[n]:this.cache_[n]=a}get(n){return dn(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const Wy=function(l){try{if(typeof window<"u"&&typeof window[l]<"u"){const n=window[l];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new _x(n)}}catch{}return new vx},Hi=Wy("localStorage"),bx=Wy("sessionStorage");const jl=new Xy("@firebase/database"),Sx=(function(){let l=1;return function(){return l++}})(),e_=function(l){const n=nS(l),a=new tS;a.update(n);const s=a.digest();return Rf.encodeByteArray(s)},ds=function(...l){let n="";for(let a=0;a<l.length;a++){const s=l[a];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?n+=ds.apply(null,s):typeof s=="object"?n+=$e(s):n+=s,n+=" "}return n};let Za=null,Kp=!0;const xx=function(l,n){U(!0,"Can't turn on custom loggers persistently."),jl.logLevel=je.VERBOSE,Za=jl.log.bind(jl)},ot=function(...l){if(Kp===!0&&(Kp=!1,Za===null&&bx.get("logging_enabled")===!0&&xx()),Za){const n=ds.apply(null,l);Za(n)}},hs=function(l){return function(...n){ot(l,...n)}},ff=function(...l){const n="FIREBASE INTERNAL ERROR: "+ds(...l);jl.error(n)},zn=function(...l){const n=`FIREBASE FATAL ERROR: ${ds(...l)}`;throw jl.error(n),new Error(n)},yt=function(...l){const n="FIREBASE WARNING: "+ds(...l);jl.warn(n)},Ex=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&yt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Of=function(l){return typeof l=="number"&&(l!==l||l===Number.POSITIVE_INFINITY||l===Number.NEGATIVE_INFINITY)},Cx=function(l){if(document.readyState==="complete")l();else{let n=!1;const a=function(){if(!document.body){setTimeout(a,Math.floor(10));return}n||(n=!0,l())};document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&a()}),window.attachEvent("onload",a))}},Ll="[MIN_NAME]",Bi="[MAX_NAME]",Gi=function(l,n){if(l===n)return 0;if(l===Ll||n===Bi)return-1;if(n===Ll||l===Bi)return 1;{const a=Pp(l),s=Pp(n);return a!==null?s!==null?a-s===0?l.length-n.length:a-s:-1:s!==null?1:l<n?-1:1}},Tx=function(l,n){return l===n?0:l<n?-1:1},qa=function(l,n){if(n&&l in n)return n[l];throw new Error("Missing required key ("+l+") in object: "+$e(n))},jf=function(l){if(typeof l!="object"||l===null)return $e(l);const n=[];for(const s in l)n.push(s);n.sort();let a="{";for(let s=0;s<n.length;s++)s!==0&&(a+=","),a+=$e(n[s]),a+=":",a+=jf(l[n[s]]);return a+="}",a},t_=function(l,n){const a=l.length;if(a<=n)return[l];const s=[];for(let c=0;c<a;c+=n)c+n>a?s.push(l.substring(c,a)):s.push(l.substring(c,c+n));return s};function ut(l,n){for(const a in l)l.hasOwnProperty(a)&&n(a,l[a])}const n_=function(l){U(!Of(l),"Invalid JSON number");const n=11,a=52,s=(1<<n-1)-1;let c,f,d,m,p;l===0?(f=0,d=0,c=1/l===-1/0?1:0):(c=l<0,l=Math.abs(l),l>=Math.pow(2,1-s)?(m=Math.min(Math.floor(Math.log(l)/Math.LN2),s),f=m+s,d=Math.round(l*Math.pow(2,a-m)-Math.pow(2,a))):(f=0,d=Math.round(l/Math.pow(2,1-s-a))));const g=[];for(p=a;p;p-=1)g.push(d%2?1:0),d=Math.floor(d/2);for(p=n;p;p-=1)g.push(f%2?1:0),f=Math.floor(f/2);g.push(c?1:0),g.reverse();const S=g.join("");let v="";for(p=0;p<64;p+=8){let b=parseInt(S.substr(p,8),2).toString(16);b.length===1&&(b="0"+b),v=v+b}return v.toLowerCase()},Nx=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},wx=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Ax(l,n){let a="Unknown Error";l==="too_big"?a="The data requested exceeds the maximum size that can be accessed with a single request.":l==="permission_denied"?a="Client doesn't have permission to access the desired data.":l==="unavailable"&&(a="The service is unavailable");const s=new Error(l+" at "+n._path.toString()+": "+a);return s.code=l.toUpperCase(),s}const Rx=new RegExp("^-?(0*)\\d{1,10}$"),Mx=-2147483648,Dx=2147483647,Pp=function(l){if(Rx.test(l)){const n=Number(l);if(n>=Mx&&n<=Dx)return n}return null},Yl=function(l){try{l()}catch(n){setTimeout(()=>{const a=n.stack||"";throw yt("Exception was thrown by user callback.",a),n},Math.floor(0))}},Ox=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ka=function(l,n){const a=setTimeout(l,n);return typeof a=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(a):typeof a=="object"&&a.unref&&a.unref(),a};class jx{constructor(n,a){this.appCheckProvider=a,this.appName=n.name,ex(n)&&n.settings.appCheckToken&&(this.serverAppAppCheckToken=n.settings.appCheckToken),this.appCheck=a?.getImmediate({optional:!0}),this.appCheck||a?.get().then(s=>this.appCheck=s)}getToken(n){if(this.serverAppAppCheckToken){if(n)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(n):new Promise((a,s)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(a,s):a(null)},0)})}addTokenChangeListener(n){this.appCheckProvider?.get().then(a=>a.addTokenListener(n))}notifyForInvalidToken(){yt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zx{constructor(n,a,s){this.appName_=n,this.firebaseOptions_=a,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(c=>this.auth_=c)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(a=>a&&a.code==="auth/token-not-initialized"?(ot("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)):new Promise((a,s)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(a,s):a(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(a=>a.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(a=>a.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',yt(n)}}class Br{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}Br.OWNER="owner";const zf="5",i_="v",l_="s",a_="r",s_="f",r_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,c_="ls",o_="p",df="ac",u_="websocket",f_="long_polling";class d_{constructor(n,a,s,c,f=!1,d="",m=!1,p=!1,g=null){this.secure=a,this.namespace=s,this.webSocketOnly=c,this.nodeAdmin=f,this.persistenceKey=d,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hi.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&Hi.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){const n=this.secure?"https://":"http://",a=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${a}`}}function Ix(l){return l.host!==l.internalHost||l.isCustomHost()||l.includeNamespaceInQueryParams}function h_(l,n,a){U(typeof n=="string","typeof type must == string"),U(typeof a=="object","typeof params must == object");let s;if(n===u_)s=(l.secure?"wss://":"ws://")+l.internalHost+"/.ws?";else if(n===f_)s=(l.secure?"https://":"http://")+l.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);Ix(l)&&(a.ns=l.namespace);const c=[];return ut(a,(f,d)=>{c.push(f+"="+d)}),s+c.join("&")}class Lx{constructor(){this.counters_={}}incrementCounter(n,a=1){dn(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=a}get(){return D1(this.counters_)}}const Ku={},Pu={};function If(l){const n=l.toString();return Ku[n]||(Ku[n]=new Lx),Ku[n]}function Ux(l,n){const a=l.toString();return Pu[a]||(Pu[a]=n()),Pu[a]}class Hx{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,a){this.closeAfterResponse=n,this.onClose=a,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,a){for(this.pendingResponses[n]=a;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let c=0;c<s.length;++c)s[c]&&Yl(()=>{this.onMessage_(s[c])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Fp="start",Bx="close",kx="pLPCommand",qx="pRTLPCB",m_="id",g_="pw",p_="ser",Gx="cb",Yx="seg",Vx="ts",Qx="d",Xx="dframe",y_=1870,__=30,Zx=y_-__,Kx=25e3,Px=3e4;class Dl{constructor(n,a,s,c,f,d,m){this.connId=n,this.repoInfo=a,this.applicationId=s,this.appCheckToken=c,this.authToken=f,this.transportSessionId=d,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hs(n),this.stats_=If(a),this.urlFn=p=>(this.appCheckToken&&(p[df]=this.appCheckToken),h_(a,f_,p))}open(n,a){this.curSegmentNum=0,this.onDisconnect_=a,this.myPacketOrderer=new Hx(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Px)),Cx(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Lf((...f)=>{const[d,m,p,g,S]=f;if(this.incrementIncomingBytes_(f),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===Fp)this.id=m,this.password=p;else if(d===Bx)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...f)=>{const[d,m]=f;this.incrementIncomingBytes_(f),this.myPacketOrderer.handleResponse(d,m)},()=>{this.onClosed_()},this.urlFn);const s={};s[Fp]="t",s[p_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[Gx]=this.scriptTagHolder.uniqueCallbackIdentifier),s[i_]=zf,this.transportSessionId&&(s[l_]=this.transportSessionId),this.lastSessionId&&(s[c_]=this.lastSessionId),this.applicationId&&(s[o_]=this.applicationId),this.appCheckToken&&(s[df]=this.appCheckToken),typeof location<"u"&&location.hostname&&r_.test(location.hostname)&&(s[a_]=s_);const c=this.urlFn(s);this.log_("Connecting via long-poll to "+c),this.scriptTagHolder.addTag(c,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Dl.forceAllow_=!0}static forceDisallow(){Dl.forceDisallow_=!0}static isAvailable(){return Dl.forceAllow_?!0:!Dl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Nx()&&!wx()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const a=$e(n);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const s=By(a),c=t_(s,Zx);for(let f=0;f<c.length;f++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,c.length,c[f]),this.curSegmentNum++}addDisconnectPingFrame(n,a){this.myDisconnFrame=document.createElement("iframe");const s={};s[Xx]="t",s[m_]=n,s[g_]=a,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const a=$e(n).length;this.bytesReceived+=a,this.stats_.incrementCounter("bytes_received",a)}}class Lf{constructor(n,a,s,c){this.onDisconnect=s,this.urlFn=c,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Sx(),window[kx+this.uniqueCallbackIdentifier]=n,window[qx+this.uniqueCallbackIdentifier]=a,this.myIFrame=Lf.createIFrame_();let f="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(f='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+f+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(m){ot("frame writing exception"),m.stack&&ot(m.stack),ot(m)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||ot("No IE domain setting required")}catch{const s=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,a){for(this.myID=n,this.myPW=a,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n[m_]=this.myID,n[g_]=this.myPW,n[p_]=this.currentSerial;let a=this.urlFn(n),s="",c=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+__+s.length<=y_;){const d=this.pendingSegs.shift();s=s+"&"+Yx+c+"="+d.seg+"&"+Vx+c+"="+d.ts+"&"+Qx+c+"="+d.d,c++}return a=a+s,this.addLongPollTag_(a,this.currentSerial),!0}else return!1}enqueueSegment(n,a,s){this.pendingSegs.push({seg:n,ts:a,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(n,a){this.outstandingRequests.add(a);const s=()=>{this.outstandingRequests.delete(a),this.newRequest_()},c=setTimeout(s,Math.floor(Kx)),f=()=>{clearTimeout(c),s()};this.addTag(n,f)}addTag(n,a){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=n,s.onload=s.onreadystatechange=function(){const c=s.readyState;(!c||c==="loaded"||c==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),a())},s.onerror=()=>{ot("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}const Fx=16384,Jx=45e3;let Qr=null;typeof MozWebSocket<"u"?Qr=MozWebSocket:typeof WebSocket<"u"&&(Qr=WebSocket);class ln{constructor(n,a,s,c,f,d,m){this.connId=n,this.applicationId=s,this.appCheckToken=c,this.authToken=f,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hs(this.connId),this.stats_=If(a),this.connURL=ln.connectionURL_(a,d,m,c,s),this.nodeAdmin=a.nodeAdmin}static connectionURL_(n,a,s,c,f){const d={};return d[i_]=zf,typeof location<"u"&&location.hostname&&r_.test(location.hostname)&&(d[a_]=s_),a&&(d[l_]=a),s&&(d[c_]=s),c&&(d[df]=c),f&&(d[o_]=f),h_(n,u_,d)}open(n,a){this.onDisconnect=a,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hi.set("previous_websocket_failure",!0);try{let s;X1(),this.mySock=new Qr(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const c=s.message||s.data;c&&this.log_(c),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const c=s.message||s.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){ln.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const a=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(a);s&&s.length>1&&parseFloat(s[1])<4.4&&(n=!0)}return!n&&Qr!==null&&!ln.forceDisallow_}static previouslyFailed(){return Hi.isInMemoryStorage||Hi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hi.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const a=this.frames.join("");this.frames=null;const s=Wa(a);this.onMessage(s)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(U(this.frames===null,"We already have a frame buffer"),n.length<=6){const a=Number(n);if(!isNaN(a))return this.handleNewFrameCount_(a),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;const a=n.data;if(this.bytesReceived+=a.length,this.stats_.incrementCounter("bytes_received",a.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(a);else{const s=this.extractFrameCount_(a);s!==null&&this.appendFrame_(s)}}send(n){this.resetKeepAlive();const a=$e(n);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const s=t_(a,Fx);s.length>1&&this.sendString_(String(s.length));for(let c=0;c<s.length;c++)this.sendString_(s[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Jx))}sendString_(n){try{this.mySock.send(n)}catch(a){this.log_("Exception thrown from WebSocket.send():",a.message||a.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ln.responsesRequiredToBeHealthy=2;ln.healthyTimeout=3e4;class ns{static get ALL_TRANSPORTS(){return[Dl,ln]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){const a=ln&&ln.isAvailable();let s=a&&!ln.previouslyFailed();if(n.webSocketOnly&&(a||yt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ln];else{const c=this.transports_=[];for(const f of ns.ALL_TRANSPORTS)f&&f.isAvailable()&&c.push(f);ns.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ns.globalTransportInitialized_=!1;const $x=6e4,Wx=5e3,eE=10*1024,tE=100*1024,Fu="t",Jp="d",nE="s",$p="r",iE="e",Wp="o",ey="a",ty="n",ny="p",lE="h";class aE{constructor(n,a,s,c,f,d,m,p,g,S){this.id=n,this.repoInfo_=a,this.applicationId_=s,this.appCheckToken_=c,this.authToken_=f,this.onMessage_=d,this.onReady_=m,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=S,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hs("c:"+this.id+":"),this.transportManager_=new ns(a),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(a,s)},Math.floor(0));const c=n.healthyTimeout||0;c>0&&(this.healthyTimeout_=Ka(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>tE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>eE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(c)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return a=>{n===this.conn_?this.onConnectionLost_(a):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return a=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(a):n===this.secondaryConn_?this.onSecondaryMessageReceived_(a):this.log_("message on old connection"))}}sendRequest(n){const a={t:"d",d:n};this.sendData_(a)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(Fu in n){const a=n[Fu];a===ey?this.upgradeIfSecondaryHealthy_():a===$p?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):a===Wp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const a=qa("t",n),s=qa("d",n);if(a==="c")this.onSecondaryControl_(s);else if(a==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+a)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ny,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ey,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ty,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const a=qa("t",n),s=qa("d",n);a==="c"?this.onControl_(s):a==="d"&&this.onDataMessage_(s)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const a=qa(Fu,n);if(Jp in n){const s=n[Jp];if(a===lE){const c={...s};this.repoInfo_.isUsingEmulator&&(c.h=this.repoInfo_.host),this.onHandshake_(c)}else if(a===ty){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let c=0;c<this.pendingDataMessages.length;++c)this.onDataMessage_(this.pendingDataMessages[c]);this.pendingDataMessages=[],this.tryCleanupConnection()}else a===nE?this.onConnectionShutdown_(s):a===$p?this.onReset_(s):a===iE?ff("Server Error: "+s):a===Wp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ff("Unknown control packet command: "+a)}}onHandshake_(n){const a=n.ts,s=n.v,c=n.h;this.sessionId=n.s,this.repoInfo_.host=c,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,a),zf!==s&&yt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,s),Ka(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor($x))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,a){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(a,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ka(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Wx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ny,d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class v_{put(n,a,s,c){}merge(n,a,s,c){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,a,s){}onDisconnectMerge(n,a,s){}onDisconnectCancel(n,a){}reportStats(n){}}class b_{constructor(n){this.allowedEvents_=n,this.listeners_={},U(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...a){if(Array.isArray(this.listeners_[n])){const s=[...this.listeners_[n]];for(let c=0;c<s.length;c++)s[c].callback.apply(s[c].context,a)}}on(n,a,s){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:a,context:s});const c=this.getInitialEvent(n);c&&a.apply(s,c)}off(n,a,s){this.validateEventType_(n);const c=this.listeners_[n]||[];for(let f=0;f<c.length;f++)if(c[f].callback===a&&(!s||s===c[f].context)){c.splice(f,1);return}}validateEventType_(n){U(this.allowedEvents_.find(a=>a===n),"Unknown event: "+n)}}class Xr extends b_{static getInstance(){return new Xr}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Yy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(n){return U(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}const iy=32,ly=768;class Ae{constructor(n,a){if(a===void 0){this.pieces_=n.split("/");let s=0;for(let c=0;c<this.pieces_.length;c++)this.pieces_[c].length>0&&(this.pieces_[s]=this.pieces_[c],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=a}toString(){let n="";for(let a=this.pieceNum_;a<this.pieces_.length;a++)this.pieces_[a]!==""&&(n+="/"+this.pieces_[a]);return n||"/"}}function pe(){return new Ae("")}function ee(l){return l.pieceNum_>=l.pieces_.length?null:l.pieces_[l.pieceNum_]}function hi(l){return l.pieces_.length-l.pieceNum_}function ze(l){let n=l.pieceNum_;return n<l.pieces_.length&&n++,new Ae(l.pieces_,n)}function Uf(l){return l.pieceNum_<l.pieces_.length?l.pieces_[l.pieces_.length-1]:null}function sE(l){let n="";for(let a=l.pieceNum_;a<l.pieces_.length;a++)l.pieces_[a]!==""&&(n+="/"+encodeURIComponent(String(l.pieces_[a])));return n||"/"}function is(l,n=0){return l.pieces_.slice(l.pieceNum_+n)}function S_(l){if(l.pieceNum_>=l.pieces_.length)return null;const n=[];for(let a=l.pieceNum_;a<l.pieces_.length-1;a++)n.push(l.pieces_[a]);return new Ae(n,0)}function ke(l,n){const a=[];for(let s=l.pieceNum_;s<l.pieces_.length;s++)a.push(l.pieces_[s]);if(n instanceof Ae)for(let s=n.pieceNum_;s<n.pieces_.length;s++)a.push(n.pieces_[s]);else{const s=n.split("/");for(let c=0;c<s.length;c++)s[c].length>0&&a.push(s[c])}return new Ae(a,0)}function ae(l){return l.pieceNum_>=l.pieces_.length}function pt(l,n){const a=ee(l),s=ee(n);if(a===null)return n;if(a===s)return pt(ze(l),ze(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+l+")")}function rE(l,n){const a=is(l,0),s=is(n,0);for(let c=0;c<a.length&&c<s.length;c++){const f=Gi(a[c],s[c]);if(f!==0)return f}return a.length===s.length?0:a.length<s.length?-1:1}function Hf(l,n){if(hi(l)!==hi(n))return!1;for(let a=l.pieceNum_,s=n.pieceNum_;a<=l.pieces_.length;a++,s++)if(l.pieces_[a]!==n.pieces_[s])return!1;return!0}function $t(l,n){let a=l.pieceNum_,s=n.pieceNum_;if(hi(l)>hi(n))return!1;for(;a<l.pieces_.length;){if(l.pieces_[a]!==n.pieces_[s])return!1;++a,++s}return!0}class cE{constructor(n,a){this.errorPrefix_=a,this.parts_=is(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=ac(this.parts_[s]);x_(this)}}function oE(l,n){l.parts_.length>0&&(l.byteLength_+=1),l.parts_.push(n),l.byteLength_+=ac(n),x_(l)}function uE(l){const n=l.parts_.pop();l.byteLength_-=ac(n),l.parts_.length>0&&(l.byteLength_-=1)}function x_(l){if(l.byteLength_>ly)throw new Error(l.errorPrefix_+"has a key path longer than "+ly+" bytes ("+l.byteLength_+").");if(l.parts_.length>iy)throw new Error(l.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+iy+") or object contains a cycle "+Ui(l))}function Ui(l){return l.parts_.length===0?"":"in property '"+l.parts_.join(".")+"'"}class Bf extends b_{static getInstance(){return new Bf}constructor(){super(["visible"]);let n,a;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(a="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(a="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(a="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(a="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,a&&document.addEventListener(a,()=>{const s=!document[n];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(n){return U(n==="visible","Unknown event type: "+n),[this.visible_]}}const Ga=1e3,fE=300*1e3,ay=30*1e3,dE=1.3,hE=3e4,mE="server_kill",sy=3;class On extends v_{constructor(n,a,s,c,f,d,m,p){if(super(),this.repoInfo_=n,this.applicationId_=a,this.onDataUpdate_=s,this.onConnectStatus_=c,this.onServerInfoUpdate_=f,this.authTokenProvider_=d,this.appCheckTokenProvider_=m,this.authOverride_=p,this.id=On.nextPersistentConnectionId_++,this.log_=hs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ga,this.maxReconnectDelay_=fE,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bf.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Xr.getInstance().on("online",this.onOnline_,this)}sendRequest(n,a,s){const c=++this.requestNumber_,f={r:c,a:n,b:a};this.log_($e(f)),U(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(f),s&&(this.requestCBHash_[c]=s)}get(n){this.initConnection_();const a=new us,c={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:d=>{const m=d.d;d.s==="ok"?a.resolve(m):a.reject(m)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const f=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(f),a.promise}listen(n,a,s,c){this.initConnection_();const f=n._queryIdentifier,d=n._path.toString();this.log_("Listen called for "+d+" "+f),this.listens.has(d)||this.listens.set(d,new Map),U(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),U(!this.listens.get(d).has(f),"listen() called twice for same path/queryId.");const m={onComplete:c,hashFn:a,query:n,tag:s};this.listens.get(d).set(f,m),this.connected_&&this.sendListen_(m)}sendGet_(n){const a=this.outstandingGets_[n];this.sendRequest("g",a.request,s=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),a.onComplete&&a.onComplete(s)})}sendListen_(n){const a=n.query,s=a._path.toString(),c=a._queryIdentifier;this.log_("Listen on "+s+" for "+c);const f={p:s},d="q";n.tag&&(f.q=a._queryObject,f.t=n.tag),f.h=n.hashFn(),this.sendRequest(d,f,m=>{const p=m.d,g=m.s;On.warnOnListenWarnings_(p,a),(this.listens.get(s)&&this.listens.get(s).get(c))===n&&(this.log_("listen response",m),g!=="ok"&&this.removeListen_(s,c),n.onComplete&&n.onComplete(g,p))})}static warnOnListenWarnings_(n,a){if(n&&typeof n=="object"&&dn(n,"w")){const s=Il(n,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const c='".indexOn": "'+a._queryParams.getIndex().toString()+'"',f=a._path.toString();yt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${f} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||W1(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ay)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,a=$1(n)?"auth":"gauth",s={cred:n};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(a,s,c=>{const f=c.s,d=c.d||"error";this.authToken_===n&&(f==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(f,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const a=n.s,s=n.d||"error";a==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(a,s)})}unlisten(n,a){const s=n._path.toString(),c=n._queryIdentifier;this.log_("Unlisten called for "+s+" "+c),U(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,c)&&this.connected_&&this.sendUnlisten_(s,c,n._queryObject,a)}sendUnlisten_(n,a,s,c){this.log_("Unlisten on "+n+" for "+a);const f={p:n},d="n";c&&(f.q=s,f.t=c),this.sendRequest(d,f)}onDisconnectPut(n,a,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,a,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:a,onComplete:s})}onDisconnectMerge(n,a,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,a,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:a,onComplete:s})}onDisconnectCancel(n,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,a):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:a})}sendOnDisconnect_(n,a,s,c){const f={p:a,d:s};this.log_("onDisconnect "+n,f),this.sendRequest(n,f,d=>{c&&setTimeout(()=>{c(d.s,d.d)},Math.floor(0))})}put(n,a,s,c){this.putInternal("p",n,a,s,c)}merge(n,a,s,c){this.putInternal("m",n,a,s,c)}putInternal(n,a,s,c,f){this.initConnection_();const d={p:a,d:s};f!==void 0&&(d.h=f),this.outstandingPuts_.push({action:n,request:d,onComplete:c}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+a)}sendPut_(n){const a=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,c=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(a,s,f=>{this.log_(a+" response",f),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),c&&c(f.s,f.d)})}reportStats(n){if(this.connected_){const a={c:n};this.log_("reportStats",a),this.sendRequest("s",a,s=>{if(s.s!=="ok"){const f=s.d;this.log_("reportStats","Error sending stats: "+f)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+$e(n));const a=n.r,s=this.requestCBHash_[a];s&&(delete this.requestCBHash_[a],s(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,a){this.log_("handleServerMessage",n,a),n==="d"?this.onDataUpdate_(a.p,a.d,!1,a.t):n==="m"?this.onDataUpdate_(a.p,a.d,!0,a.t):n==="c"?this.onListenRevoked_(a.p,a.q):n==="ac"?this.onAuthRevoked_(a.s,a.d):n==="apc"?this.onAppCheckRevoked_(a.s,a.d):n==="sd"?this.onSecurityDebugPacket_(a):ff("Unrecognized action received from server: "+$e(n)+`
Are you using the latest client?`)}onReady_(n,a){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=a,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){U(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ga,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ga,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>hE&&(this.reconnectDelay_=Ga),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let a=Math.max(0,this.reconnectDelay_-n);a=Math.random()*a,this.log_("Trying to reconnect in "+a+"ms"),this.scheduleConnect_(a),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*dE)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const n=this.onDataMessage_.bind(this),a=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),c=this.id+":"+On.nextConnectionId_++,f=this.lastSessionId;let d=!1,m=null;const p=function(){m?m.close():(d=!0,s())},g=function(v){U(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(v)};this.realtime_={close:p,sendRequest:g};const S=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,b]=await Promise.all([this.authTokenProvider_.getToken(S),this.appCheckTokenProvider_.getToken(S)]);d?ot("getToken() completed but was canceled"):(ot("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=b&&b.token,m=new aE(c,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,a,s,M=>{yt(M+" ("+this.repoInfo_.toString()+")"),this.interrupt(mE)},f))}catch(v){this.log_("Failed to get token: "+v),d||(this.repoInfo_.nodeAdmin&&yt(v),p())}}}interrupt(n){ot("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ot("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ip(this.interruptReasons_)&&(this.reconnectDelay_=Ga,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const a=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:a})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const a=this.outstandingPuts_[n];a&&"h"in a.request&&a.queued&&(a.onComplete&&a.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,a){let s;a?s=a.map(f=>jf(f)).join("$"):s="default";const c=this.removeListen_(n,s);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(n,a){const s=new Ae(n).toString();let c;if(this.listens.has(s)){const f=this.listens.get(s);c=f.get(a),f.delete(a),f.size===0&&this.listens.delete(s)}else c=void 0;return c}onAuthRevoked_(n,a){ot("Auth token revoked: "+n+"/"+a),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sy&&(this.reconnectDelay_=ay,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,a){ot("App check token revoked: "+n+"/"+a),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sy&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const a of n.values())this.sendListen_(a);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let a="js";n["sdk."+a+"."+$y.replace(/\./g,"-")]=1,Yy()?n["framework.cordova"]=1:Q1()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Xr.getInstance().currentlyOnline();return Ip(this.interruptReasons_)&&n}}On.nextPersistentConnectionId_=0;On.nextConnectionId_=0;class te{constructor(n,a){this.name=n,this.node=a}static Wrap(n,a){return new te(n,a)}}class sc{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,a){const s=new te(Ll,n),c=new te(Ll,a);return this.compare(s,c)!==0}minPost(){return te.MIN}}let Ur;class E_ extends sc{static get __EMPTY_NODE(){return Ur}static set __EMPTY_NODE(n){Ur=n}compare(n,a){return Gi(n.name,a.name)}isDefinedOn(n){throw ql("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,a){return!1}minPost(){return te.MIN}maxPost(){return new te(Bi,Ur)}makePost(n,a){return U(typeof n=="string","KeyIndex indexValue must always be a string."),new te(n,Ur)}toString(){return".key"}}const zl=new E_;class Hr{constructor(n,a,s,c,f=null){this.isReverse_=c,this.resultGenerator_=f,this.nodeStack_=[];let d=1;for(;!n.isEmpty();)if(n=n,d=a?s(n.key,a):1,c&&(d*=-1),d<0)this.isReverse_?n=n.left:n=n.right;else if(d===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),a;if(this.resultGenerator_?a=this.resultGenerator_(n.key,n.value):a={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return a}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}class nt{constructor(n,a,s,c,f){this.key=n,this.value=a,this.color=s??nt.RED,this.left=c??Nt.EMPTY_NODE,this.right=f??Nt.EMPTY_NODE}copy(n,a,s,c,f){return new nt(n??this.key,a??this.value,s??this.color,c??this.left,f??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,a,s){let c=this;const f=s(n,c.key);return f<0?c=c.copy(null,null,null,c.left.insert(n,a,s),null):f===0?c=c.copy(null,a,null,null,null):c=c.copy(null,null,null,null,c.right.insert(n,a,s)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return Nt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,a){let s,c;if(s=this,a(n,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(n,a),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),a(n,s.key)===0){if(s.right.isEmpty())return Nt.EMPTY_NODE;c=s.right.min_(),s=s.copy(c.key,c.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(n,a))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,a)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}nt.RED=!0;nt.BLACK=!1;class gE{copy(n,a,s,c,f){return this}insert(n,a,s){return new nt(n,a,null)}remove(n,a){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Nt{constructor(n,a=Nt.EMPTY_NODE){this.comparator_=n,this.root_=a}insert(n,a){return new Nt(this.comparator_,this.root_.insert(n,a,this.comparator_).copy(null,null,nt.BLACK,null,null))}remove(n){return new Nt(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,nt.BLACK,null,null))}get(n){let a,s=this.root_;for(;!s.isEmpty();){if(a=this.comparator_(n,s.key),a===0)return s.value;a<0?s=s.left:a>0&&(s=s.right)}return null}getPredecessorKey(n){let a,s=this.root_,c=null;for(;!s.isEmpty();)if(a=this.comparator_(n,s.key),a===0){if(s.left.isEmpty())return c?c.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else a<0?s=s.left:a>0&&(c=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new Hr(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,a){return new Hr(this.root_,n,this.comparator_,!1,a)}getReverseIteratorFrom(n,a){return new Hr(this.root_,n,this.comparator_,!0,a)}getReverseIterator(n){return new Hr(this.root_,null,this.comparator_,!0,n)}}Nt.EMPTY_NODE=new gE;function pE(l,n){return Gi(l.name,n.name)}function kf(l,n){return Gi(l,n)}let hf;function yE(l){hf=l}const C_=function(l){return typeof l=="number"?"number:"+n_(l):"string:"+l},T_=function(l){if(l.isLeafNode()){const n=l.val();U(typeof n=="string"||typeof n=="number"||typeof n=="object"&&dn(n,".sv"),"Priority must be a string or number.")}else U(l===hf||l.isEmpty(),"priority of unexpected type.");U(l===hf||l.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ry;class tt{static set __childrenNodeConstructor(n){ry=n}static get __childrenNodeConstructor(){return ry}constructor(n,a=tt.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=a,this.lazyHash_=null,U(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),T_(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new tt(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ae(n)?this:ee(n)===".priority"?this.priorityNode_:tt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,a){return null}updateImmediateChild(n,a){return n===".priority"?this.updatePriority(a):a.isEmpty()&&n!==".priority"?this:tt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,a).updatePriority(this.priorityNode_)}updateChild(n,a){const s=ee(n);return s===null?a:a.isEmpty()&&s!==".priority"?this:(U(s!==".priority"||hi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,tt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ze(n),a)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,a){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+C_(this.priorityNode_.val())+":");const a=typeof this.value_;n+=a+":",a==="number"?n+=n_(this.value_):n+=this.value_,this.lazyHash_=e_(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===tt.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof tt.__childrenNodeConstructor?-1:(U(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const a=typeof n.value_,s=typeof this.value_,c=tt.VALUE_TYPE_ORDER.indexOf(a),f=tt.VALUE_TYPE_ORDER.indexOf(s);return U(c>=0,"Unknown leaf type: "+a),U(f>=0,"Unknown leaf type: "+s),c===f?s==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:f-c}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const a=n;return this.value_===a.value_&&this.priorityNode_.equals(a.priorityNode_)}else return!1}}tt.VALUE_TYPE_ORDER=["object","boolean","number","string"];let N_,w_;function _E(l){N_=l}function vE(l){w_=l}class bE extends sc{compare(n,a){const s=n.node.getPriority(),c=a.node.getPriority(),f=s.compareTo(c);return f===0?Gi(n.name,a.name):f}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,a){return!n.getPriority().equals(a.getPriority())}minPost(){return te.MIN}maxPost(){return new te(Bi,new tt("[PRIORITY-POST]",w_))}makePost(n,a){const s=N_(n);return new te(a,new tt("[PRIORITY-POST]",s))}toString(){return".priority"}}const qe=new bE;const SE=Math.log(2);class xE{constructor(n){const a=f=>parseInt(Math.log(f)/SE,10),s=f=>parseInt(Array(f+1).join("1"),2);this.count=a(n+1),this.current_=this.count-1;const c=s(this.count);this.bits_=n+1&c}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Zr=function(l,n,a,s){l.sort(n);const c=function(p,g){const S=g-p;let v,b;if(S===0)return null;if(S===1)return v=l[p],b=a?a(v):v,new nt(b,v.node,nt.BLACK,null,null);{const M=parseInt(S/2,10)+p,L=c(p,M),H=c(M+1,g);return v=l[M],b=a?a(v):v,new nt(b,v.node,nt.BLACK,L,H)}},f=function(p){let g=null,S=null,v=l.length;const b=function(L,H){const Q=v-L,ce=v;v-=L;const oe=c(Q+1,ce),fe=l[Q],ye=a?a(fe):fe;M(new nt(ye,fe.node,H,null,oe))},M=function(L){g?(g.left=L,g=L):(S=L,g=L)};for(let L=0;L<p.count;++L){const H=p.nextBitIsOne(),Q=Math.pow(2,p.count-(L+1));H?b(Q,nt.BLACK):(b(Q,nt.BLACK),b(Q,nt.RED))}return S},d=new xE(l.length),m=f(d);return new Nt(s||n,m)};let Ju;const Rl={};class Dn{static get Default(){return U(Rl&&qe,"ChildrenNode.ts has not been loaded"),Ju=Ju||new Dn({".priority":Rl},{".priority":qe}),Ju}constructor(n,a){this.indexes_=n,this.indexSet_=a}get(n){const a=Il(this.indexes_,n);if(!a)throw new Error("No index defined for "+n);return a instanceof Nt?a:null}hasIndex(n){return dn(this.indexSet_,n.toString())}addIndex(n,a){U(n!==zl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let c=!1;const f=a.getIterator(te.Wrap);let d=f.getNext();for(;d;)c=c||n.isDefinedOn(d.node),s.push(d),d=f.getNext();let m;c?m=Zr(s,n.getCompare()):m=Rl;const p=n.toString(),g={...this.indexSet_};g[p]=n;const S={...this.indexes_};return S[p]=m,new Dn(S,g)}addToIndexes(n,a){const s=qr(this.indexes_,(c,f)=>{const d=Il(this.indexSet_,f);if(U(d,"Missing index implementation for "+f),c===Rl)if(d.isDefinedOn(n.node)){const m=[],p=a.getIterator(te.Wrap);let g=p.getNext();for(;g;)g.name!==n.name&&m.push(g),g=p.getNext();return m.push(n),Zr(m,d.getCompare())}else return Rl;else{const m=a.get(n.name);let p=c;return m&&(p=p.remove(new te(n.name,m))),p.insert(n,n.node)}});return new Dn(s,this.indexSet_)}removeFromIndexes(n,a){const s=qr(this.indexes_,c=>{if(c===Rl)return c;{const f=a.get(n.name);return f?c.remove(new te(n.name,f)):c}});return new Dn(s,this.indexSet_)}}let Ya;class Z{static get EMPTY_NODE(){return Ya||(Ya=new Z(new Nt(kf),null,Dn.Default))}constructor(n,a,s){this.children_=n,this.priorityNode_=a,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&T_(this.priorityNode_),this.children_.isEmpty()&&U(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ya}updatePriority(n){return this.children_.isEmpty()?this:new Z(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{const a=this.children_.get(n);return a===null?Ya:a}}getChild(n){const a=ee(n);return a===null?this:this.getImmediateChild(a).getChild(ze(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,a){if(U(a,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(a);{const s=new te(n,a);let c,f;a.isEmpty()?(c=this.children_.remove(n),f=this.indexMap_.removeFromIndexes(s,this.children_)):(c=this.children_.insert(n,a),f=this.indexMap_.addToIndexes(s,this.children_));const d=c.isEmpty()?Ya:this.priorityNode_;return new Z(c,d,f)}}updateChild(n,a){const s=ee(n);if(s===null)return a;{U(ee(n)!==".priority"||hi(n)===1,".priority must be the last token in a path");const c=this.getImmediateChild(s).updateChild(ze(n),a);return this.updateImmediateChild(s,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const a={};let s=0,c=0,f=!0;if(this.forEachChild(qe,(d,m)=>{a[d]=m.val(n),s++,f&&Z.INTEGER_REGEXP_.test(d)?c=Math.max(c,Number(d)):f=!1}),!n&&f&&c<2*s){const d=[];for(const m in a)d[m]=a[m];return d}else return n&&!this.getPriority().isEmpty()&&(a[".priority"]=this.getPriority().val()),a}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+C_(this.getPriority().val())+":"),this.forEachChild(qe,(a,s)=>{const c=s.hash();c!==""&&(n+=":"+a+":"+c)}),this.lazyHash_=n===""?"":e_(n)}return this.lazyHash_}getPredecessorChildName(n,a,s){const c=this.resolveIndex_(s);if(c){const f=c.getPredecessorKey(new te(n,a));return f?f.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){const a=this.resolveIndex_(n);if(a){const s=a.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(n){const a=this.getFirstChildName(n);return a?new te(a,this.children_.get(a)):null}getLastChildName(n){const a=this.resolveIndex_(n);if(a){const s=a.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(n){const a=this.getLastChildName(n);return a?new te(a,this.children_.get(a)):null}forEachChild(n,a){const s=this.resolveIndex_(n);return s?s.inorderTraversal(c=>a(c.name,c.node)):this.children_.inorderTraversal(a)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,a){const s=this.resolveIndex_(a);if(s)return s.getIteratorFrom(n,c=>c);{const c=this.children_.getIteratorFrom(n.name,te.Wrap);let f=c.peek();for(;f!=null&&a.compare(f,n)<0;)c.getNext(),f=c.peek();return c}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,a){const s=this.resolveIndex_(a);if(s)return s.getReverseIteratorFrom(n,c=>c);{const c=this.children_.getReverseIteratorFrom(n.name,te.Wrap);let f=c.peek();for(;f!=null&&a.compare(f,n)>0;)c.getNext(),f=c.peek();return c}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ms?-1:0}withIndex(n){if(n===zl||this.indexMap_.hasIndex(n))return this;{const a=this.indexMap_.addIndex(n,this.children_);return new Z(this.children_,this.priorityNode_,a)}}isIndexed(n){return n===zl||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const a=n;if(this.getPriority().equals(a.getPriority()))if(this.children_.count()===a.children_.count()){const s=this.getIterator(qe),c=a.getIterator(qe);let f=s.getNext(),d=c.getNext();for(;f&&d;){if(f.name!==d.name||!f.node.equals(d.node))return!1;f=s.getNext(),d=c.getNext()}return f===null&&d===null}else return!1;else return!1}}resolveIndex_(n){return n===zl?null:this.indexMap_.get(n.toString())}}Z.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class EE extends Z{constructor(){super(new Nt(kf),Z.EMPTY_NODE,Dn.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return Z.EMPTY_NODE}isEmpty(){return!1}}const ms=new EE;Object.defineProperties(te,{MIN:{value:new te(Ll,Z.EMPTY_NODE)},MAX:{value:new te(Bi,ms)}});E_.__EMPTY_NODE=Z.EMPTY_NODE;tt.__childrenNodeConstructor=Z;yE(ms);vE(ms);const CE=!0;function Je(l,n=null){if(l===null)return Z.EMPTY_NODE;if(typeof l=="object"&&".priority"in l&&(n=l[".priority"]),U(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof l=="object"&&".value"in l&&l[".value"]!==null&&(l=l[".value"]),typeof l!="object"||".sv"in l){const a=l;return new tt(a,Je(n))}if(!(l instanceof Array)&&CE){const a=[];let s=!1;if(ut(l,(d,m)=>{if(d.substring(0,1)!=="."){const p=Je(m);p.isEmpty()||(s=s||!p.getPriority().isEmpty(),a.push(new te(d,p)))}}),a.length===0)return Z.EMPTY_NODE;const f=Zr(a,pE,d=>d.name,kf);if(s){const d=Zr(a,qe.getCompare());return new Z(f,Je(n),new Dn({".priority":d},{".priority":qe}))}else return new Z(f,Je(n),Dn.Default)}else{let a=Z.EMPTY_NODE;return ut(l,(s,c)=>{if(dn(l,s)&&s.substring(0,1)!=="."){const f=Je(c);(f.isLeafNode()||!f.isEmpty())&&(a=a.updateImmediateChild(s,f))}}),a.updatePriority(Je(n))}}_E(Je);class TE extends sc{constructor(n){super(),this.indexPath_=n,U(!ae(n)&&ee(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,a){const s=this.extractChild(n.node),c=this.extractChild(a.node),f=s.compareTo(c);return f===0?Gi(n.name,a.name):f}makePost(n,a){const s=Je(n),c=Z.EMPTY_NODE.updateChild(this.indexPath_,s);return new te(a,c)}maxPost(){const n=Z.EMPTY_NODE.updateChild(this.indexPath_,ms);return new te(Bi,n)}toString(){return is(this.indexPath_,0).join("/")}}class NE extends sc{compare(n,a){const s=n.node.compareTo(a.node);return s===0?Gi(n.name,a.name):s}isDefinedOn(n){return!0}indexedValueChanged(n,a){return!n.equals(a)}minPost(){return te.MIN}maxPost(){return te.MAX}makePost(n,a){const s=Je(n);return new te(a,s)}toString(){return".value"}}const wE=new NE;function A_(l){return{type:"value",snapshotNode:l}}function Ul(l,n){return{type:"child_added",snapshotNode:n,childName:l}}function ls(l,n){return{type:"child_removed",snapshotNode:n,childName:l}}function as(l,n,a){return{type:"child_changed",snapshotNode:n,childName:l,oldSnap:a}}function AE(l,n){return{type:"child_moved",snapshotNode:n,childName:l}}class qf{constructor(n){this.index_=n}updateChild(n,a,s,c,f,d){U(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=n.getImmediateChild(a);return m.getChild(c).equals(s.getChild(c))&&m.isEmpty()===s.isEmpty()||(d!=null&&(s.isEmpty()?n.hasChild(a)?d.trackChildChange(ls(a,m)):U(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?d.trackChildChange(Ul(a,s)):d.trackChildChange(as(a,s,m))),n.isLeafNode()&&s.isEmpty())?n:n.updateImmediateChild(a,s).withIndex(this.index_)}updateFullNode(n,a,s){return s!=null&&(n.isLeafNode()||n.forEachChild(qe,(c,f)=>{a.hasChild(c)||s.trackChildChange(ls(c,f))}),a.isLeafNode()||a.forEachChild(qe,(c,f)=>{if(n.hasChild(c)){const d=n.getImmediateChild(c);d.equals(f)||s.trackChildChange(as(c,f,d))}else s.trackChildChange(Ul(c,f))})),a.withIndex(this.index_)}updatePriority(n,a){return n.isEmpty()?Z.EMPTY_NODE:n.updatePriority(a)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ss{constructor(n){this.indexedFilter_=new qf(n.getIndex()),this.index_=n.getIndex(),this.startPost_=ss.getStartPost_(n),this.endPost_=ss.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const a=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,s=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return a&&s}updateChild(n,a,s,c,f,d){return this.matches(new te(a,s))||(s=Z.EMPTY_NODE),this.indexedFilter_.updateChild(n,a,s,c,f,d)}updateFullNode(n,a,s){a.isLeafNode()&&(a=Z.EMPTY_NODE);let c=a.withIndex(this.index_);c=c.updatePriority(Z.EMPTY_NODE);const f=this;return a.forEachChild(qe,(d,m)=>{f.matches(new te(d,m))||(c=c.updateImmediateChild(d,Z.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,c,s)}updatePriority(n,a){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const a=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),a)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const a=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),a)}else return n.getIndex().maxPost()}}class RE{constructor(n){this.withinDirectionalStart=a=>this.reverse_?this.withinEndPost(a):this.withinStartPost(a),this.withinDirectionalEnd=a=>this.reverse_?this.withinStartPost(a):this.withinEndPost(a),this.withinStartPost=a=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),a);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=a=>{const s=this.index_.compare(a,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new ss(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,a,s,c,f,d){return this.rangedFilter_.matches(new te(a,s))||(s=Z.EMPTY_NODE),n.getImmediateChild(a).equals(s)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,a,s,c,f,d):this.fullLimitUpdateChild_(n,a,s,f,d)}updateFullNode(n,a,s){let c;if(a.isLeafNode()||a.isEmpty())c=Z.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<a.numChildren()&&a.isIndexed(this.index_)){c=Z.EMPTY_NODE.withIndex(this.index_);let f;this.reverse_?f=a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):f=a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;f.hasNext()&&d<this.limit_;){const m=f.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))c=c.updateImmediateChild(m.name,m.node),d++;else break;else continue}}else{c=a.withIndex(this.index_),c=c.updatePriority(Z.EMPTY_NODE);let f;this.reverse_?f=c.getReverseIterator(this.index_):f=c.getIterator(this.index_);let d=0;for(;f.hasNext();){const m=f.getNext();d<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?d++:c=c.updateImmediateChild(m.name,Z.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,c,s)}updatePriority(n,a){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,a,s,c,f){let d;if(this.reverse_){const v=this.index_.getCompare();d=(b,M)=>v(M,b)}else d=this.index_.getCompare();const m=n;U(m.numChildren()===this.limit_,"");const p=new te(a,s),g=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),S=this.rangedFilter_.matches(p);if(m.hasChild(a)){const v=m.getImmediateChild(a);let b=c.getChildAfterChild(this.index_,g,this.reverse_);for(;b!=null&&(b.name===a||m.hasChild(b.name));)b=c.getChildAfterChild(this.index_,b,this.reverse_);const M=b==null?1:d(b,p);if(S&&!s.isEmpty()&&M>=0)return f?.trackChildChange(as(a,s,v)),m.updateImmediateChild(a,s);{f?.trackChildChange(ls(a,v));const H=m.updateImmediateChild(a,Z.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(f?.trackChildChange(Ul(b.name,b.node)),H.updateImmediateChild(b.name,b.node)):H}}else return s.isEmpty()?n:S&&d(g,p)>=0?(f!=null&&(f.trackChildChange(ls(g.name,g.node)),f.trackChildChange(Ul(a,s))),m.updateImmediateChild(a,s).updateImmediateChild(g.name,Z.EMPTY_NODE)):n}}class Gf{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=qe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return U(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return U(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ll}hasEnd(){return this.endSet_}getIndexEndValue(){return U(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return U(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Bi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return U(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===qe}copy(){const n=new Gf;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function ME(l){return l.loadsAllData()?new qf(l.getIndex()):l.hasLimit()?new RE(l):new ss(l)}function cy(l){const n={};if(l.isDefault())return n;let a;if(l.index_===qe?a="$priority":l.index_===wE?a="$value":l.index_===zl?a="$key":(U(l.index_ instanceof TE,"Unrecognized index type!"),a=l.index_.toString()),n.orderBy=$e(a),l.startSet_){const s=l.startAfterSet_?"startAfter":"startAt";n[s]=$e(l.indexStartValue_),l.startNameSet_&&(n[s]+=","+$e(l.indexStartName_))}if(l.endSet_){const s=l.endBeforeSet_?"endBefore":"endAt";n[s]=$e(l.indexEndValue_),l.endNameSet_&&(n[s]+=","+$e(l.indexEndName_))}return l.limitSet_&&(l.isViewFromLeft()?n.limitToFirst=l.limit_:n.limitToLast=l.limit_),n}function oy(l){const n={};if(l.startSet_&&(n.sp=l.indexStartValue_,l.startNameSet_&&(n.sn=l.indexStartName_),n.sin=!l.startAfterSet_),l.endSet_&&(n.ep=l.indexEndValue_,l.endNameSet_&&(n.en=l.indexEndName_),n.ein=!l.endBeforeSet_),l.limitSet_){n.l=l.limit_;let a=l.viewFrom_;a===""&&(l.isViewFromLeft()?a="l":a="r"),n.vf=a}return l.index_!==qe&&(n.i=l.index_.toString()),n}class Kr extends v_{reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,a){return a!==void 0?"tag$"+a:(U(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}constructor(n,a,s,c){super(),this.repoInfo_=n,this.onDataUpdate_=a,this.authTokenProvider_=s,this.appCheckTokenProvider_=c,this.log_=hs("p:rest:"),this.listens_={}}listen(n,a,s,c){const f=n._path.toString();this.log_("Listen called for "+f+" "+n._queryIdentifier);const d=Kr.getListenId_(n,s),m={};this.listens_[d]=m;const p=cy(n._queryParams);this.restRequest_(f+".json",p,(g,S)=>{let v=S;if(g===404&&(v=null,g=null),g===null&&this.onDataUpdate_(f,v,!1,s),Il(this.listens_,d)===m){let b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",c(b,null)}})}unlisten(n,a){const s=Kr.getListenId_(n,a);delete this.listens_[s]}get(n){const a=cy(n._queryParams),s=n._path.toString(),c=new us;return this.restRequest_(s+".json",a,(f,d)=>{let m=d;f===404&&(m=null,f=null),f===null?(this.onDataUpdate_(s,m,!1,null),c.resolve(m)):c.reject(new Error(m))}),c.promise}refreshAuthToken(n){}restRequest_(n,a={},s){return a.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([c,f])=>{c&&c.accessToken&&(a.auth=c.accessToken),f&&f.token&&(a.ac=f.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+eS(a);this.log_("Sending REST request for "+d);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(s&&m.readyState===4){this.log_("REST Response for "+d+" received. status:",m.status,"response:",m.responseText);let p=null;if(m.status>=200&&m.status<300){try{p=Wa(m.responseText)}catch{yt("Failed to parse JSON response for "+d+": "+m.responseText)}s(null,p)}else m.status!==401&&m.status!==404&&yt("Got unsuccessful REST response for "+d+" Status: "+m.status),s(m.status);s=null}},m.open("GET",d,!0),m.send()})}}class DE{constructor(){this.rootNode_=Z.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,a){this.rootNode_=this.rootNode_.updateChild(n,a)}}function Pr(){return{value:null,children:new Map}}function R_(l,n,a){if(ae(n))l.value=a,l.children.clear();else if(l.value!==null)l.value=l.value.updateChild(n,a);else{const s=ee(n);l.children.has(s)||l.children.set(s,Pr());const c=l.children.get(s);n=ze(n),R_(c,n,a)}}function mf(l,n,a){l.value!==null?a(n,l.value):OE(l,(s,c)=>{const f=new Ae(n.toString()+"/"+s);mf(c,f,a)})}function OE(l,n){l.children.forEach((a,s)=>{n(s,a)})}class jE{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),a={...n};return this.last_&&ut(this.last_,(s,c)=>{a[s]=a[s]-c}),this.last_=n,a}}const uy=10*1e3,zE=30*1e3,IE=300*1e3;class LE{constructor(n,a){this.server_=a,this.statsToReport_={},this.statsListener_=new jE(n);const s=uy+(zE-uy)*Math.random();Ka(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const n=this.statsListener_.get(),a={};let s=!1;ut(n,(c,f)=>{f>0&&dn(this.statsToReport_,c)&&(a[c]=f,s=!0)}),s&&this.server_.reportStats(a),Ka(this.reportStats_.bind(this),Math.floor(Math.random()*2*IE))}}var an;(function(l){l[l.OVERWRITE=0]="OVERWRITE",l[l.MERGE=1]="MERGE",l[l.ACK_USER_WRITE=2]="ACK_USER_WRITE",l[l.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(an||(an={}));function Yf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Vf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Qf(l){return{fromUser:!1,fromServer:!0,queryId:l,tagged:!0}}class Fr{constructor(n,a,s){this.path=n,this.affectedTree=a,this.revert=s,this.type=an.ACK_USER_WRITE,this.source=Yf()}operationForChild(n){if(ae(this.path)){if(this.affectedTree.value!=null)return U(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const a=this.affectedTree.subtree(new Ae(n));return new Fr(pe(),a,this.revert)}}else return U(ee(this.path)===n,"operationForChild called for unrelated child."),new Fr(ze(this.path),this.affectedTree,this.revert)}}class rs{constructor(n,a){this.source=n,this.path=a,this.type=an.LISTEN_COMPLETE}operationForChild(n){return ae(this.path)?new rs(this.source,pe()):new rs(this.source,ze(this.path))}}class ki{constructor(n,a,s){this.source=n,this.path=a,this.snap=s,this.type=an.OVERWRITE}operationForChild(n){return ae(this.path)?new ki(this.source,pe(),this.snap.getImmediateChild(n)):new ki(this.source,ze(this.path),this.snap)}}class Hl{constructor(n,a,s){this.source=n,this.path=a,this.children=s,this.type=an.MERGE}operationForChild(n){if(ae(this.path)){const a=this.children.subtree(new Ae(n));return a.isEmpty()?null:a.value?new ki(this.source,pe(),a.value):new Hl(this.source,pe(),a)}else return U(ee(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new Hl(this.source,ze(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class mi{constructor(n,a,s){this.node_=n,this.fullyInitialized_=a,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(ae(n))return this.isFullyInitialized()&&!this.filtered_;const a=ee(n);return this.isCompleteForChild(a)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class UE{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function HE(l,n,a,s){const c=[],f=[];return n.forEach(d=>{d.type==="child_changed"&&l.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&f.push(AE(d.childName,d.snapshotNode))}),Va(l,c,"child_removed",n,s,a),Va(l,c,"child_added",n,s,a),Va(l,c,"child_moved",f,s,a),Va(l,c,"child_changed",n,s,a),Va(l,c,"value",n,s,a),c}function Va(l,n,a,s,c,f){const d=s.filter(m=>m.type===a);d.sort((m,p)=>kE(l,m,p)),d.forEach(m=>{const p=BE(l,m,f);c.forEach(g=>{g.respondsTo(m.type)&&n.push(g.createEvent(p,l.query_))})})}function BE(l,n,a){return n.type==="value"||n.type==="child_removed"||(n.prevName=a.getPredecessorChildName(n.childName,n.snapshotNode,l.index_)),n}function kE(l,n,a){if(n.childName==null||a.childName==null)throw ql("Should only compare child_ events.");const s=new te(n.childName,n.snapshotNode),c=new te(a.childName,a.snapshotNode);return l.index_.compare(s,c)}function rc(l,n){return{eventCache:l,serverCache:n}}function Pa(l,n,a,s){return rc(new mi(n,a,s),l.serverCache)}function M_(l,n,a,s){return rc(l.eventCache,new mi(n,a,s))}function Jr(l){return l.eventCache.isFullyInitialized()?l.eventCache.getNode():null}function qi(l){return l.serverCache.isFullyInitialized()?l.serverCache.getNode():null}let $u;const qE=()=>($u||($u=new Nt(Tx)),$u);class Oe{static fromObject(n){let a=new Oe(null);return ut(n,(s,c)=>{a=a.set(new Ae(s),c)}),a}constructor(n,a=qE()){this.value=n,this.children=a}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,a){if(this.value!=null&&a(this.value))return{path:pe(),value:this.value};if(ae(n))return null;{const s=ee(n),c=this.children.get(s);if(c!==null){const f=c.findRootMostMatchingPathAndValue(ze(n),a);return f!=null?{path:ke(new Ae(s),f.path),value:f.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(ae(n))return this;{const a=ee(n),s=this.children.get(a);return s!==null?s.subtree(ze(n)):new Oe(null)}}set(n,a){if(ae(n))return new Oe(a,this.children);{const s=ee(n),f=(this.children.get(s)||new Oe(null)).set(ze(n),a),d=this.children.insert(s,f);return new Oe(this.value,d)}}remove(n){if(ae(n))return this.children.isEmpty()?new Oe(null):new Oe(null,this.children);{const a=ee(n),s=this.children.get(a);if(s){const c=s.remove(ze(n));let f;return c.isEmpty()?f=this.children.remove(a):f=this.children.insert(a,c),this.value===null&&f.isEmpty()?new Oe(null):new Oe(this.value,f)}else return this}}get(n){if(ae(n))return this.value;{const a=ee(n),s=this.children.get(a);return s?s.get(ze(n)):null}}setTree(n,a){if(ae(n))return a;{const s=ee(n),f=(this.children.get(s)||new Oe(null)).setTree(ze(n),a);let d;return f.isEmpty()?d=this.children.remove(s):d=this.children.insert(s,f),new Oe(this.value,d)}}fold(n){return this.fold_(pe(),n)}fold_(n,a){const s={};return this.children.inorderTraversal((c,f)=>{s[c]=f.fold_(ke(n,c),a)}),a(n,this.value,s)}findOnPath(n,a){return this.findOnPath_(n,pe(),a)}findOnPath_(n,a,s){const c=this.value?s(a,this.value):!1;if(c)return c;if(ae(n))return null;{const f=ee(n),d=this.children.get(f);return d?d.findOnPath_(ze(n),ke(a,f),s):null}}foreachOnPath(n,a){return this.foreachOnPath_(n,pe(),a)}foreachOnPath_(n,a,s){if(ae(n))return this;{this.value&&s(a,this.value);const c=ee(n),f=this.children.get(c);return f?f.foreachOnPath_(ze(n),ke(a,c),s):new Oe(null)}}foreach(n){this.foreach_(pe(),n)}foreach_(n,a){this.children.inorderTraversal((s,c)=>{c.foreach_(ke(n,s),a)}),this.value&&a(n,this.value)}foreachChild(n){this.children.inorderTraversal((a,s)=>{s.value&&n(a,s.value)})}}class sn{constructor(n){this.writeTree_=n}static empty(){return new sn(new Oe(null))}}function Fa(l,n,a){if(ae(n))return new sn(new Oe(a));{const s=l.writeTree_.findRootMostValueAndPath(n);if(s!=null){const c=s.path;let f=s.value;const d=pt(c,n);return f=f.updateChild(d,a),new sn(l.writeTree_.set(c,f))}else{const c=new Oe(a),f=l.writeTree_.setTree(n,c);return new sn(f)}}}function gf(l,n,a){let s=l;return ut(a,(c,f)=>{s=Fa(s,ke(n,c),f)}),s}function fy(l,n){if(ae(n))return sn.empty();{const a=l.writeTree_.setTree(n,new Oe(null));return new sn(a)}}function pf(l,n){return Yi(l,n)!=null}function Yi(l,n){const a=l.writeTree_.findRootMostValueAndPath(n);return a!=null?l.writeTree_.get(a.path).getChild(pt(a.path,n)):null}function dy(l){const n=[],a=l.writeTree_.value;return a!=null?a.isLeafNode()||a.forEachChild(qe,(s,c)=>{n.push(new te(s,c))}):l.writeTree_.children.inorderTraversal((s,c)=>{c.value!=null&&n.push(new te(s,c.value))}),n}function fi(l,n){if(ae(n))return l;{const a=Yi(l,n);return a!=null?new sn(new Oe(a)):new sn(l.writeTree_.subtree(n))}}function yf(l){return l.writeTree_.isEmpty()}function Bl(l,n){return D_(pe(),l.writeTree_,n)}function D_(l,n,a){if(n.value!=null)return a.updateChild(l,n.value);{let s=null;return n.children.inorderTraversal((c,f)=>{c===".priority"?(U(f.value!==null,"Priority writes must always be leaf nodes"),s=f.value):a=D_(ke(l,c),f,a)}),!a.getChild(l).isEmpty()&&s!==null&&(a=a.updateChild(ke(l,".priority"),s)),a}}function cc(l,n){return I_(n,l)}function GE(l,n,a,s,c){U(s>l.lastWriteId,"Stacking an older write on top of newer ones"),c===void 0&&(c=!0),l.allWrites.push({path:n,snap:a,writeId:s,visible:c}),c&&(l.visibleWrites=Fa(l.visibleWrites,n,a)),l.lastWriteId=s}function YE(l,n,a,s){U(s>l.lastWriteId,"Stacking an older merge on top of newer ones"),l.allWrites.push({path:n,children:a,writeId:s,visible:!0}),l.visibleWrites=gf(l.visibleWrites,n,a),l.lastWriteId=s}function VE(l,n){for(let a=0;a<l.allWrites.length;a++){const s=l.allWrites[a];if(s.writeId===n)return s}return null}function QE(l,n){const a=l.allWrites.findIndex(m=>m.writeId===n);U(a>=0,"removeWrite called with nonexistent writeId.");const s=l.allWrites[a];l.allWrites.splice(a,1);let c=s.visible,f=!1,d=l.allWrites.length-1;for(;c&&d>=0;){const m=l.allWrites[d];m.visible&&(d>=a&&XE(m,s.path)?c=!1:$t(s.path,m.path)&&(f=!0)),d--}if(c){if(f)return ZE(l),!0;if(s.snap)l.visibleWrites=fy(l.visibleWrites,s.path);else{const m=s.children;ut(m,p=>{l.visibleWrites=fy(l.visibleWrites,ke(s.path,p))})}return!0}else return!1}function XE(l,n){if(l.snap)return $t(l.path,n);for(const a in l.children)if(l.children.hasOwnProperty(a)&&$t(ke(l.path,a),n))return!0;return!1}function ZE(l){l.visibleWrites=O_(l.allWrites,KE,pe()),l.allWrites.length>0?l.lastWriteId=l.allWrites[l.allWrites.length-1].writeId:l.lastWriteId=-1}function KE(l){return l.visible}function O_(l,n,a){let s=sn.empty();for(let c=0;c<l.length;++c){const f=l[c];if(n(f)){const d=f.path;let m;if(f.snap)$t(a,d)?(m=pt(a,d),s=Fa(s,m,f.snap)):$t(d,a)&&(m=pt(d,a),s=Fa(s,pe(),f.snap.getChild(m)));else if(f.children){if($t(a,d))m=pt(a,d),s=gf(s,m,f.children);else if($t(d,a))if(m=pt(d,a),ae(m))s=gf(s,pe(),f.children);else{const p=Il(f.children,ee(m));if(p){const g=p.getChild(ze(m));s=Fa(s,pe(),g)}}}else throw ql("WriteRecord should have .snap or .children")}}return s}function j_(l,n,a,s,c){if(!s&&!c){const f=Yi(l.visibleWrites,n);if(f!=null)return f;{const d=fi(l.visibleWrites,n);if(yf(d))return a;if(a==null&&!pf(d,pe()))return null;{const m=a||Z.EMPTY_NODE;return Bl(d,m)}}}else{const f=fi(l.visibleWrites,n);if(!c&&yf(f))return a;if(!c&&a==null&&!pf(f,pe()))return null;{const d=function(g){return(g.visible||c)&&(!s||!~s.indexOf(g.writeId))&&($t(g.path,n)||$t(n,g.path))},m=O_(l.allWrites,d,n),p=a||Z.EMPTY_NODE;return Bl(m,p)}}}function PE(l,n,a){let s=Z.EMPTY_NODE;const c=Yi(l.visibleWrites,n);if(c)return c.isLeafNode()||c.forEachChild(qe,(f,d)=>{s=s.updateImmediateChild(f,d)}),s;if(a){const f=fi(l.visibleWrites,n);return a.forEachChild(qe,(d,m)=>{const p=Bl(fi(f,new Ae(d)),m);s=s.updateImmediateChild(d,p)}),dy(f).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}else{const f=fi(l.visibleWrites,n);return dy(f).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}}function FE(l,n,a,s,c){U(s||c,"Either existingEventSnap or existingServerSnap must exist");const f=ke(n,a);if(pf(l.visibleWrites,f))return null;{const d=fi(l.visibleWrites,f);return yf(d)?c.getChild(a):Bl(d,c.getChild(a))}}function JE(l,n,a,s){const c=ke(n,a),f=Yi(l.visibleWrites,c);if(f!=null)return f;if(s.isCompleteForChild(a)){const d=fi(l.visibleWrites,c);return Bl(d,s.getNode().getImmediateChild(a))}else return null}function $E(l,n){return Yi(l.visibleWrites,n)}function WE(l,n,a,s,c,f,d){let m;const p=fi(l.visibleWrites,n),g=Yi(p,pe());if(g!=null)m=g;else if(a!=null)m=Bl(p,a);else return[];if(m=m.withIndex(d),!m.isEmpty()&&!m.isLeafNode()){const S=[],v=d.getCompare(),b=f?m.getReverseIteratorFrom(s,d):m.getIteratorFrom(s,d);let M=b.getNext();for(;M&&S.length<c;)v(M,s)!==0&&S.push(M),M=b.getNext();return S}else return[]}function eC(){return{visibleWrites:sn.empty(),allWrites:[],lastWriteId:-1}}function $r(l,n,a,s){return j_(l.writeTree,l.treePath,n,a,s)}function Xf(l,n){return PE(l.writeTree,l.treePath,n)}function hy(l,n,a,s){return FE(l.writeTree,l.treePath,n,a,s)}function Wr(l,n){return $E(l.writeTree,ke(l.treePath,n))}function tC(l,n,a,s,c,f){return WE(l.writeTree,l.treePath,n,a,s,c,f)}function Zf(l,n,a){return JE(l.writeTree,l.treePath,n,a)}function z_(l,n){return I_(ke(l.treePath,n),l.writeTree)}function I_(l,n){return{treePath:l,writeTree:n}}class nC{constructor(){this.changeMap=new Map}trackChildChange(n){const a=n.type,s=n.childName;U(a==="child_added"||a==="child_changed"||a==="child_removed","Only child changes supported for tracking"),U(s!==".priority","Only non-priority child changes can be tracked.");const c=this.changeMap.get(s);if(c){const f=c.type;if(a==="child_added"&&f==="child_removed")this.changeMap.set(s,as(s,n.snapshotNode,c.snapshotNode));else if(a==="child_removed"&&f==="child_added")this.changeMap.delete(s);else if(a==="child_removed"&&f==="child_changed")this.changeMap.set(s,ls(s,c.oldSnap));else if(a==="child_changed"&&f==="child_added")this.changeMap.set(s,Ul(s,n.snapshotNode));else if(a==="child_changed"&&f==="child_changed")this.changeMap.set(s,as(s,n.snapshotNode,c.oldSnap));else throw ql("Illegal combination of changes: "+n+" occurred after "+c)}else this.changeMap.set(s,n)}getChanges(){return Array.from(this.changeMap.values())}}class iC{getCompleteChild(n){return null}getChildAfterChild(n,a,s){return null}}const L_=new iC;class Kf{constructor(n,a,s=null){this.writes_=n,this.viewCache_=a,this.optCompleteServerCache_=s}getCompleteChild(n){const a=this.viewCache_.eventCache;if(a.isCompleteForChild(n))return a.getNode().getImmediateChild(n);{const s=this.optCompleteServerCache_!=null?new mi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zf(this.writes_,n,s)}}getChildAfterChild(n,a,s){const c=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:qi(this.viewCache_),f=tC(this.writes_,c,a,1,s,n);return f.length===0?null:f[0]}}function lC(l){return{filter:l}}function aC(l,n){U(n.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),U(n.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed")}function sC(l,n,a,s,c){const f=new nC;let d,m;if(a.type===an.OVERWRITE){const g=a;g.source.fromUser?d=_f(l,n,g.path,g.snap,s,c,f):(U(g.source.fromServer,"Unknown source."),m=g.source.tagged||n.serverCache.isFiltered()&&!ae(g.path),d=ec(l,n,g.path,g.snap,s,c,m,f))}else if(a.type===an.MERGE){const g=a;g.source.fromUser?d=cC(l,n,g.path,g.children,s,c,f):(U(g.source.fromServer,"Unknown source."),m=g.source.tagged||n.serverCache.isFiltered(),d=vf(l,n,g.path,g.children,s,c,m,f))}else if(a.type===an.ACK_USER_WRITE){const g=a;g.revert?d=fC(l,n,g.path,s,c,f):d=oC(l,n,g.path,g.affectedTree,s,c,f)}else if(a.type===an.LISTEN_COMPLETE)d=uC(l,n,a.path,s,f);else throw ql("Unknown operation type: "+a.type);const p=f.getChanges();return rC(n,d,p),{viewCache:d,changes:p}}function rC(l,n,a){const s=n.eventCache;if(s.isFullyInitialized()){const c=s.getNode().isLeafNode()||s.getNode().isEmpty(),f=Jr(l);(a.length>0||!l.eventCache.isFullyInitialized()||c&&!s.getNode().equals(f)||!s.getNode().getPriority().equals(f.getPriority()))&&a.push(A_(Jr(n)))}}function U_(l,n,a,s,c,f){const d=n.eventCache;if(Wr(s,a)!=null)return n;{let m,p;if(ae(a))if(U(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const g=qi(n),S=g instanceof Z?g:Z.EMPTY_NODE,v=Xf(s,S);m=l.filter.updateFullNode(n.eventCache.getNode(),v,f)}else{const g=$r(s,qi(n));m=l.filter.updateFullNode(n.eventCache.getNode(),g,f)}else{const g=ee(a);if(g===".priority"){U(hi(a)===1,"Can't have a priority with additional path components");const S=d.getNode();p=n.serverCache.getNode();const v=hy(s,a,S,p);v!=null?m=l.filter.updatePriority(S,v):m=d.getNode()}else{const S=ze(a);let v;if(d.isCompleteForChild(g)){p=n.serverCache.getNode();const b=hy(s,a,d.getNode(),p);b!=null?v=d.getNode().getImmediateChild(g).updateChild(S,b):v=d.getNode().getImmediateChild(g)}else v=Zf(s,g,n.serverCache);v!=null?m=l.filter.updateChild(d.getNode(),g,v,S,c,f):m=d.getNode()}}return Pa(n,m,d.isFullyInitialized()||ae(a),l.filter.filtersNodes())}}function ec(l,n,a,s,c,f,d,m){const p=n.serverCache;let g;const S=d?l.filter:l.filter.getIndexedFilter();if(ae(a))g=S.updateFullNode(p.getNode(),s,null);else if(S.filtersNodes()&&!p.isFiltered()){const M=p.getNode().updateChild(a,s);g=S.updateFullNode(p.getNode(),M,null)}else{const M=ee(a);if(!p.isCompleteForPath(a)&&hi(a)>1)return n;const L=ze(a),Q=p.getNode().getImmediateChild(M).updateChild(L,s);M===".priority"?g=S.updatePriority(p.getNode(),Q):g=S.updateChild(p.getNode(),M,Q,L,L_,null)}const v=M_(n,g,p.isFullyInitialized()||ae(a),S.filtersNodes()),b=new Kf(c,v,f);return U_(l,v,a,c,b,m)}function _f(l,n,a,s,c,f,d){const m=n.eventCache;let p,g;const S=new Kf(c,n,f);if(ae(a))g=l.filter.updateFullNode(n.eventCache.getNode(),s,d),p=Pa(n,g,!0,l.filter.filtersNodes());else{const v=ee(a);if(v===".priority")g=l.filter.updatePriority(n.eventCache.getNode(),s),p=Pa(n,g,m.isFullyInitialized(),m.isFiltered());else{const b=ze(a),M=m.getNode().getImmediateChild(v);let L;if(ae(b))L=s;else{const H=S.getCompleteChild(v);H!=null?Uf(b)===".priority"&&H.getChild(S_(b)).isEmpty()?L=H:L=H.updateChild(b,s):L=Z.EMPTY_NODE}if(M.equals(L))p=n;else{const H=l.filter.updateChild(m.getNode(),v,L,b,S,d);p=Pa(n,H,m.isFullyInitialized(),l.filter.filtersNodes())}}}return p}function my(l,n){return l.eventCache.isCompleteForChild(n)}function cC(l,n,a,s,c,f,d){let m=n;return s.foreach((p,g)=>{const S=ke(a,p);my(n,ee(S))&&(m=_f(l,m,S,g,c,f,d))}),s.foreach((p,g)=>{const S=ke(a,p);my(n,ee(S))||(m=_f(l,m,S,g,c,f,d))}),m}function gy(l,n,a){return a.foreach((s,c)=>{n=n.updateChild(s,c)}),n}function vf(l,n,a,s,c,f,d,m){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let p=n,g;ae(a)?g=s:g=new Oe(null).setTree(a,s);const S=n.serverCache.getNode();return g.children.inorderTraversal((v,b)=>{if(S.hasChild(v)){const M=n.serverCache.getNode().getImmediateChild(v),L=gy(l,M,b);p=ec(l,p,new Ae(v),L,c,f,d,m)}}),g.children.inorderTraversal((v,b)=>{const M=!n.serverCache.isCompleteForChild(v)&&b.value===null;if(!S.hasChild(v)&&!M){const L=n.serverCache.getNode().getImmediateChild(v),H=gy(l,L,b);p=ec(l,p,new Ae(v),H,c,f,d,m)}}),p}function oC(l,n,a,s,c,f,d){if(Wr(c,a)!=null)return n;const m=n.serverCache.isFiltered(),p=n.serverCache;if(s.value!=null){if(ae(a)&&p.isFullyInitialized()||p.isCompleteForPath(a))return ec(l,n,a,p.getNode().getChild(a),c,f,m,d);if(ae(a)){let g=new Oe(null);return p.getNode().forEachChild(zl,(S,v)=>{g=g.set(new Ae(S),v)}),vf(l,n,a,g,c,f,m,d)}else return n}else{let g=new Oe(null);return s.foreach((S,v)=>{const b=ke(a,S);p.isCompleteForPath(b)&&(g=g.set(S,p.getNode().getChild(b)))}),vf(l,n,a,g,c,f,m,d)}}function uC(l,n,a,s,c){const f=n.serverCache,d=M_(n,f.getNode(),f.isFullyInitialized()||ae(a),f.isFiltered());return U_(l,d,a,s,L_,c)}function fC(l,n,a,s,c,f){let d;if(Wr(s,a)!=null)return n;{const m=new Kf(s,n,c),p=n.eventCache.getNode();let g;if(ae(a)||ee(a)===".priority"){let S;if(n.serverCache.isFullyInitialized())S=$r(s,qi(n));else{const v=n.serverCache.getNode();U(v instanceof Z,"serverChildren would be complete if leaf node"),S=Xf(s,v)}S=S,g=l.filter.updateFullNode(p,S,f)}else{const S=ee(a);let v=Zf(s,S,n.serverCache);v==null&&n.serverCache.isCompleteForChild(S)&&(v=p.getImmediateChild(S)),v!=null?g=l.filter.updateChild(p,S,v,ze(a),m,f):n.eventCache.getNode().hasChild(S)?g=l.filter.updateChild(p,S,Z.EMPTY_NODE,ze(a),m,f):g=p,g.isEmpty()&&n.serverCache.isFullyInitialized()&&(d=$r(s,qi(n)),d.isLeafNode()&&(g=l.filter.updateFullNode(g,d,f)))}return d=n.serverCache.isFullyInitialized()||Wr(s,pe())!=null,Pa(n,g,d,l.filter.filtersNodes())}}class dC{constructor(n,a){this.query_=n,this.eventRegistrations_=[];const s=this.query_._queryParams,c=new qf(s.getIndex()),f=ME(s);this.processor_=lC(f);const d=a.serverCache,m=a.eventCache,p=c.updateFullNode(Z.EMPTY_NODE,d.getNode(),null),g=f.updateFullNode(Z.EMPTY_NODE,m.getNode(),null),S=new mi(p,d.isFullyInitialized(),c.filtersNodes()),v=new mi(g,m.isFullyInitialized(),f.filtersNodes());this.viewCache_=rc(v,S),this.eventGenerator_=new UE(this.query_)}get query(){return this.query_}}function hC(l){return l.viewCache_.serverCache.getNode()}function mC(l){return Jr(l.viewCache_)}function gC(l,n){const a=qi(l.viewCache_);return a&&(l.query._queryParams.loadsAllData()||!ae(n)&&!a.getImmediateChild(ee(n)).isEmpty())?a.getChild(n):null}function py(l){return l.eventRegistrations_.length===0}function pC(l,n){l.eventRegistrations_.push(n)}function yy(l,n,a){const s=[];if(a){U(n==null,"A cancel should cancel all event registrations.");const c=l.query._path;l.eventRegistrations_.forEach(f=>{const d=f.createCancelEvent(a,c);d&&s.push(d)})}if(n){let c=[];for(let f=0;f<l.eventRegistrations_.length;++f){const d=l.eventRegistrations_[f];if(!d.matches(n))c.push(d);else if(n.hasAnyCallback()){c=c.concat(l.eventRegistrations_.slice(f+1));break}}l.eventRegistrations_=c}else l.eventRegistrations_=[];return s}function _y(l,n,a,s){n.type===an.MERGE&&n.source.queryId!==null&&(U(qi(l.viewCache_),"We should always have a full cache before handling merges"),U(Jr(l.viewCache_),"Missing event cache, even though we have a server cache"));const c=l.viewCache_,f=sC(l.processor_,c,n,a,s);return aC(l.processor_,f.viewCache),U(f.viewCache.serverCache.isFullyInitialized()||!c.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),l.viewCache_=f.viewCache,H_(l,f.changes,f.viewCache.eventCache.getNode(),null)}function yC(l,n){const a=l.viewCache_.eventCache,s=[];return a.getNode().isLeafNode()||a.getNode().forEachChild(qe,(f,d)=>{s.push(Ul(f,d))}),a.isFullyInitialized()&&s.push(A_(a.getNode())),H_(l,s,a.getNode(),n)}function H_(l,n,a,s){const c=s?[s]:l.eventRegistrations_;return HE(l.eventGenerator_,n,a,c)}let tc;class B_{constructor(){this.views=new Map}}function _C(l){U(!tc,"__referenceConstructor has already been defined"),tc=l}function vC(){return U(tc,"Reference.ts has not been loaded"),tc}function bC(l){return l.views.size===0}function Pf(l,n,a,s){const c=n.source.queryId;if(c!==null){const f=l.views.get(c);return U(f!=null,"SyncTree gave us an op for an invalid query."),_y(f,n,a,s)}else{let f=[];for(const d of l.views.values())f=f.concat(_y(d,n,a,s));return f}}function k_(l,n,a,s,c){const f=n._queryIdentifier,d=l.views.get(f);if(!d){let m=$r(a,c?s:null),p=!1;m?p=!0:s instanceof Z?(m=Xf(a,s),p=!1):(m=Z.EMPTY_NODE,p=!1);const g=rc(new mi(m,p,!1),new mi(s,c,!1));return new dC(n,g)}return d}function SC(l,n,a,s,c,f){const d=k_(l,n,s,c,f);return l.views.has(n._queryIdentifier)||l.views.set(n._queryIdentifier,d),pC(d,a),yC(d,a)}function xC(l,n,a,s){const c=n._queryIdentifier,f=[];let d=[];const m=gi(l);if(c==="default")for(const[p,g]of l.views.entries())d=d.concat(yy(g,a,s)),py(g)&&(l.views.delete(p),g.query._queryParams.loadsAllData()||f.push(g.query));else{const p=l.views.get(c);p&&(d=d.concat(yy(p,a,s)),py(p)&&(l.views.delete(c),p.query._queryParams.loadsAllData()||f.push(p.query)))}return m&&!gi(l)&&f.push(new(vC())(n._repo,n._path)),{removed:f,events:d}}function q_(l){const n=[];for(const a of l.views.values())a.query._queryParams.loadsAllData()||n.push(a);return n}function di(l,n){let a=null;for(const s of l.views.values())a=a||gC(s,n);return a}function G_(l,n){if(n._queryParams.loadsAllData())return oc(l);{const s=n._queryIdentifier;return l.views.get(s)}}function Y_(l,n){return G_(l,n)!=null}function gi(l){return oc(l)!=null}function oc(l){for(const n of l.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let nc;function EC(l){U(!nc,"__referenceConstructor has already been defined"),nc=l}function CC(){return U(nc,"Reference.ts has not been loaded"),nc}let TC=1;class vy{constructor(n){this.listenProvider_=n,this.syncPointTree_=new Oe(null),this.pendingWriteTree_=eC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function V_(l,n,a,s,c){return GE(l.pendingWriteTree_,n,a,s,c),c?Vl(l,new ki(Yf(),n,a)):[]}function NC(l,n,a,s){YE(l.pendingWriteTree_,n,a,s);const c=Oe.fromObject(a);return Vl(l,new Hl(Yf(),n,c))}function ci(l,n,a=!1){const s=VE(l.pendingWriteTree_,n);if(QE(l.pendingWriteTree_,n)){let f=new Oe(null);return s.snap!=null?f=f.set(pe(),!0):ut(s.children,d=>{f=f.set(new Ae(d),!0)}),Vl(l,new Fr(s.path,f,a))}else return[]}function gs(l,n,a){return Vl(l,new ki(Vf(),n,a))}function wC(l,n,a){const s=Oe.fromObject(a);return Vl(l,new Hl(Vf(),n,s))}function AC(l,n){return Vl(l,new rs(Vf(),n))}function RC(l,n,a){const s=Jf(l,a);if(s){const c=$f(s),f=c.path,d=c.queryId,m=pt(f,n),p=new rs(Qf(d),m);return Wf(l,f,p)}else return[]}function ic(l,n,a,s,c=!1){const f=n._path,d=l.syncPointTree_.get(f);let m=[];if(d&&(n._queryIdentifier==="default"||Y_(d,n))){const p=xC(d,n,a,s);bC(d)&&(l.syncPointTree_=l.syncPointTree_.remove(f));const g=p.removed;if(m=p.events,!c){const S=g.findIndex(b=>b._queryParams.loadsAllData())!==-1,v=l.syncPointTree_.findOnPath(f,(b,M)=>gi(M));if(S&&!v){const b=l.syncPointTree_.subtree(f);if(!b.isEmpty()){const M=OC(b);for(let L=0;L<M.length;++L){const H=M[L],Q=H.query,ce=K_(l,H);l.listenProvider_.startListening(Ja(Q),cs(l,Q),ce.hashFn,ce.onComplete)}}}!v&&g.length>0&&!s&&(S?l.listenProvider_.stopListening(Ja(n),null):g.forEach(b=>{const M=l.queryToTagMap.get(uc(b));l.listenProvider_.stopListening(Ja(b),M)}))}jC(l,g)}return m}function Q_(l,n,a,s){const c=Jf(l,s);if(c!=null){const f=$f(c),d=f.path,m=f.queryId,p=pt(d,n),g=new ki(Qf(m),p,a);return Wf(l,d,g)}else return[]}function MC(l,n,a,s){const c=Jf(l,s);if(c){const f=$f(c),d=f.path,m=f.queryId,p=pt(d,n),g=Oe.fromObject(a),S=new Hl(Qf(m),p,g);return Wf(l,d,S)}else return[]}function bf(l,n,a,s=!1){const c=n._path;let f=null,d=!1;l.syncPointTree_.foreachOnPath(c,(b,M)=>{const L=pt(b,c);f=f||di(M,L),d=d||gi(M)});let m=l.syncPointTree_.get(c);m?(d=d||gi(m),f=f||di(m,pe())):(m=new B_,l.syncPointTree_=l.syncPointTree_.set(c,m));let p;f!=null?p=!0:(p=!1,f=Z.EMPTY_NODE,l.syncPointTree_.subtree(c).foreachChild((M,L)=>{const H=di(L,pe());H&&(f=f.updateImmediateChild(M,H))}));const g=Y_(m,n);if(!g&&!n._queryParams.loadsAllData()){const b=uc(n);U(!l.queryToTagMap.has(b),"View does not exist, but we have a tag");const M=zC();l.queryToTagMap.set(b,M),l.tagToQueryMap.set(M,b)}const S=cc(l.pendingWriteTree_,c);let v=SC(m,n,a,S,f,p);if(!g&&!d&&!s){const b=G_(m,n);v=v.concat(IC(l,n,b))}return v}function Ff(l,n,a){const c=l.pendingWriteTree_,f=l.syncPointTree_.findOnPath(n,(d,m)=>{const p=pt(d,n),g=di(m,p);if(g)return g});return j_(c,n,f,a,!0)}function DC(l,n){const a=n._path;let s=null;l.syncPointTree_.foreachOnPath(a,(g,S)=>{const v=pt(g,a);s=s||di(S,v)});let c=l.syncPointTree_.get(a);c?s=s||di(c,pe()):(c=new B_,l.syncPointTree_=l.syncPointTree_.set(a,c));const f=s!=null,d=f?new mi(s,!0,!1):null,m=cc(l.pendingWriteTree_,n._path),p=k_(c,n,m,f?d.getNode():Z.EMPTY_NODE,f);return mC(p)}function Vl(l,n){return X_(n,l.syncPointTree_,null,cc(l.pendingWriteTree_,pe()))}function X_(l,n,a,s){if(ae(l.path))return Z_(l,n,a,s);{const c=n.get(pe());a==null&&c!=null&&(a=di(c,pe()));let f=[];const d=ee(l.path),m=l.operationForChild(d),p=n.children.get(d);if(p&&m){const g=a?a.getImmediateChild(d):null,S=z_(s,d);f=f.concat(X_(m,p,g,S))}return c&&(f=f.concat(Pf(c,l,s,a))),f}}function Z_(l,n,a,s){const c=n.get(pe());a==null&&c!=null&&(a=di(c,pe()));let f=[];return n.children.inorderTraversal((d,m)=>{const p=a?a.getImmediateChild(d):null,g=z_(s,d),S=l.operationForChild(d);S&&(f=f.concat(Z_(S,m,p,g)))}),c&&(f=f.concat(Pf(c,l,s,a))),f}function K_(l,n){const a=n.query,s=cs(l,a);return{hashFn:()=>(hC(n)||Z.EMPTY_NODE).hash(),onComplete:c=>{if(c==="ok")return s?RC(l,a._path,s):AC(l,a._path);{const f=Ax(c,a);return ic(l,a,null,f)}}}}function cs(l,n){const a=uc(n);return l.queryToTagMap.get(a)}function uc(l){return l._path.toString()+"$"+l._queryIdentifier}function Jf(l,n){return l.tagToQueryMap.get(n)}function $f(l){const n=l.indexOf("$");return U(n!==-1&&n<l.length-1,"Bad queryKey."),{queryId:l.substr(n+1),path:new Ae(l.substr(0,n))}}function Wf(l,n,a){const s=l.syncPointTree_.get(n);U(s,"Missing sync point for query tag that we're tracking");const c=cc(l.pendingWriteTree_,n);return Pf(s,a,c,null)}function OC(l){return l.fold((n,a,s)=>{if(a&&gi(a))return[oc(a)];{let c=[];return a&&(c=q_(a)),ut(s,(f,d)=>{c=c.concat(d)}),c}})}function Ja(l){return l._queryParams.loadsAllData()&&!l._queryParams.isDefault()?new(CC())(l._repo,l._path):l}function jC(l,n){for(let a=0;a<n.length;++a){const s=n[a];if(!s._queryParams.loadsAllData()){const c=uc(s),f=l.queryToTagMap.get(c);l.queryToTagMap.delete(c),l.tagToQueryMap.delete(f)}}}function zC(){return TC++}function IC(l,n,a){const s=n._path,c=cs(l,n),f=K_(l,a),d=l.listenProvider_.startListening(Ja(n),c,f.hashFn,f.onComplete),m=l.syncPointTree_.subtree(s);if(c)U(!gi(m.value),"If we're adding a query, it shouldn't be shadowed");else{const p=m.fold((g,S,v)=>{if(!ae(g)&&S&&gi(S))return[oc(S).query];{let b=[];return S&&(b=b.concat(q_(S).map(M=>M.query))),ut(v,(M,L)=>{b=b.concat(L)}),b}});for(let g=0;g<p.length;++g){const S=p[g];l.listenProvider_.stopListening(Ja(S),cs(l,S))}}return d}class ed{constructor(n){this.node_=n}getImmediateChild(n){const a=this.node_.getImmediateChild(n);return new ed(a)}node(){return this.node_}}class td{constructor(n,a){this.syncTree_=n,this.path_=a}getImmediateChild(n){const a=ke(this.path_,n);return new td(this.syncTree_,a)}node(){return Ff(this.syncTree_,this.path_)}}const LC=function(l){return l=l||{},l.timestamp=l.timestamp||new Date().getTime(),l},by=function(l,n,a){if(!l||typeof l!="object")return l;if(U(".sv"in l,"Unexpected leaf node or priority contents"),typeof l[".sv"]=="string")return UC(l[".sv"],n,a);if(typeof l[".sv"]=="object")return HC(l[".sv"],n);U(!1,"Unexpected server value: "+JSON.stringify(l,null,2))},UC=function(l,n,a){if(l==="timestamp")return a.timestamp;U(!1,"Unexpected server value: "+l)},HC=function(l,n,a){l.hasOwnProperty("increment")||U(!1,"Unexpected server value: "+JSON.stringify(l,null,2));const s=l.increment;typeof s!="number"&&U(!1,"Unexpected increment value: "+s);const c=n.node();if(U(c!==null&&typeof c<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!c.isLeafNode())return s;const d=c.getValue();return typeof d!="number"?s:d+s},P_=function(l,n,a,s){return nd(n,new td(a,l),s)},F_=function(l,n,a){return nd(l,new ed(n),a)};function nd(l,n,a){const s=l.getPriority().val(),c=by(s,n.getImmediateChild(".priority"),a);let f;if(l.isLeafNode()){const d=l,m=by(d.getValue(),n,a);return m!==d.getValue()||c!==d.getPriority().val()?new tt(m,Je(c)):l}else{const d=l;return f=d,c!==d.getPriority().val()&&(f=f.updatePriority(new tt(c))),d.forEachChild(qe,(m,p)=>{const g=nd(p,n.getImmediateChild(m),a);g!==p&&(f=f.updateImmediateChild(m,g))}),f}}class id{constructor(n="",a=null,s={children:{},childCount:0}){this.name=n,this.parent=a,this.node=s}}function ld(l,n){let a=n instanceof Ae?n:new Ae(n),s=l,c=ee(a);for(;c!==null;){const f=Il(s.node.children,c)||{children:{},childCount:0};s=new id(c,s,f),a=ze(a),c=ee(a)}return s}function Ql(l){return l.node.value}function J_(l,n){l.node.value=n,Sf(l)}function $_(l){return l.node.childCount>0}function BC(l){return Ql(l)===void 0&&!$_(l)}function fc(l,n){ut(l.node.children,(a,s)=>{n(new id(a,l,s))})}function W_(l,n,a,s){a&&n(l),fc(l,c=>{W_(c,n,!0)})}function kC(l,n,a){let s=l.parent;for(;s!==null;){if(n(s))return!0;s=s.parent}return!1}function ps(l){return new Ae(l.parent===null?l.name:ps(l.parent)+"/"+l.name)}function Sf(l){l.parent!==null&&qC(l.parent,l.name,l)}function qC(l,n,a){const s=BC(a),c=dn(l.node.children,n);s&&c?(delete l.node.children[n],l.node.childCount--,Sf(l)):!s&&!c&&(l.node.children[n]=a.node,l.node.childCount++,Sf(l))}const GC=/[\[\].#$\/\u0000-\u001F\u007F]/,YC=/[\[\].#$\u0000-\u001F\u007F]/,Wu=10*1024*1024,ad=function(l){return typeof l=="string"&&l.length!==0&&!GC.test(l)},ev=function(l){return typeof l=="string"&&l.length!==0&&!YC.test(l)},VC=function(l){return l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),ev(l)},QC=function(l){return l===null||typeof l=="string"||typeof l=="number"&&!Of(l)||l&&typeof l=="object"&&dn(l,".sv")},XC=function(l,n,a,s){dc(lc(l,"value"),n,a)},dc=function(l,n,a){const s=a instanceof Ae?new cE(a,l):a;if(n===void 0)throw new Error(l+"contains undefined "+Ui(s));if(typeof n=="function")throw new Error(l+"contains a function "+Ui(s)+" with contents = "+n.toString());if(Of(n))throw new Error(l+"contains "+n.toString()+" "+Ui(s));if(typeof n=="string"&&n.length>Wu/3&&ac(n)>Wu)throw new Error(l+"contains a string greater than "+Wu+" utf8 bytes "+Ui(s)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let c=!1,f=!1;if(ut(n,(d,m)=>{if(d===".value")c=!0;else if(d!==".priority"&&d!==".sv"&&(f=!0,!ad(d)))throw new Error(l+" contains an invalid key ("+d+") "+Ui(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);oE(s,d),dc(l,m,s),uE(s)}),c&&f)throw new Error(l+' contains ".value" child '+Ui(s)+" in addition to actual children.")}},ZC=function(l,n){let a,s;for(a=0;a<n.length;a++){s=n[a];const f=is(s);for(let d=0;d<f.length;d++)if(!(f[d]===".priority"&&d===f.length-1)){if(!ad(f[d]))throw new Error(l+"contains an invalid key ("+f[d]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}n.sort(rE);let c=null;for(a=0;a<n.length;a++){if(s=n[a],c!==null&&$t(c,s))throw new Error(l+"contains a path "+c.toString()+" that is ancestor of another path "+s.toString());c=s}},KC=function(l,n,a,s){const c=lc(l,"values");if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(c+" must be an object containing the children to replace.");const f=[];ut(n,(d,m)=>{const p=new Ae(d);if(dc(c,m,ke(a,p)),Uf(p)===".priority"&&!QC(m))throw new Error(c+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");f.push(p)}),ZC(c,f)},tv=function(l,n,a,s){if(!ev(a))throw new Error(lc(l,n)+'was an invalid path = "'+a+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},PC=function(l,n,a,s){a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),tv(l,n,a)},nv=function(l,n){if(ee(n)===".info")throw new Error(l+" failed = Can't modify data under /.info/")},FC=function(l,n){const a=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!ad(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||a.length!==0&&!VC(a))throw new Error(lc(l,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class JC{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function hc(l,n){let a=null;for(let s=0;s<n.length;s++){const c=n[s],f=c.getPath();a!==null&&!Hf(f,a.path)&&(l.eventLists_.push(a),a=null),a===null&&(a={events:[],path:f}),a.events.push(c)}a&&l.eventLists_.push(a)}function iv(l,n,a){hc(l,a),lv(l,s=>Hf(s,n))}function Wt(l,n,a){hc(l,a),lv(l,s=>$t(s,n)||$t(n,s))}function lv(l,n){l.recursionDepth_++;let a=!0;for(let s=0;s<l.eventLists_.length;s++){const c=l.eventLists_[s];if(c){const f=c.path;n(f)?($C(l.eventLists_[s]),l.eventLists_[s]=null):a=!1}}a&&(l.eventLists_=[]),l.recursionDepth_--}function $C(l){for(let n=0;n<l.events.length;n++){const a=l.events[n];if(a!==null){l.events[n]=null;const s=a.getEventRunner();Za&&ot("event: "+a.toString()),Yl(s)}}}const WC="repo_interrupt",eT=25;class tT{constructor(n,a,s,c){this.repoInfo_=n,this.forceRestClient_=a,this.authTokenProvider_=s,this.appCheckProvider_=c,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new JC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pr(),this.transactionQueueTree_=new id,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nT(l,n,a){if(l.stats_=If(l.repoInfo_),l.forceRestClient_||Ox())l.server_=new Kr(l.repoInfo_,(s,c,f,d)=>{Sy(l,s,c,f,d)},l.authTokenProvider_,l.appCheckProvider_),setTimeout(()=>xy(l,!0),0);else{if(typeof a<"u"&&a!==null){if(typeof a!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$e(a)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}l.persistentConnection_=new On(l.repoInfo_,n,(s,c,f,d)=>{Sy(l,s,c,f,d)},s=>{xy(l,s)},s=>{lT(l,s)},l.authTokenProvider_,l.appCheckProvider_,a),l.server_=l.persistentConnection_}l.authTokenProvider_.addTokenChangeListener(s=>{l.server_.refreshAuthToken(s)}),l.appCheckProvider_.addTokenChangeListener(s=>{l.server_.refreshAppCheckToken(s.token)}),l.statsReporter_=Ux(l.repoInfo_,()=>new LE(l.stats_,l.server_)),l.infoData_=new DE,l.infoSyncTree_=new vy({startListening:(s,c,f,d)=>{let m=[];const p=l.infoData_.getNode(s._path);return p.isEmpty()||(m=gs(l.infoSyncTree_,s._path,p),setTimeout(()=>{d("ok")},0)),m},stopListening:()=>{}}),sd(l,"connected",!1),l.serverSyncTree_=new vy({startListening:(s,c,f,d)=>(l.server_.listen(s,f,c,(m,p)=>{const g=d(m,p);Wt(l.eventQueue_,s._path,g)}),[]),stopListening:(s,c)=>{l.server_.unlisten(s,c)}})}function iT(l){const a=l.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+a}function mc(l){return LC({timestamp:iT(l)})}function Sy(l,n,a,s,c){l.dataUpdateCount++;const f=new Ae(n);a=l.interceptServerDataCallback_?l.interceptServerDataCallback_(n,a):a;let d=[];if(c)if(s){const p=qr(a,g=>Je(g));d=MC(l.serverSyncTree_,f,p,c)}else{const p=Je(a);d=Q_(l.serverSyncTree_,f,p,c)}else if(s){const p=qr(a,g=>Je(g));d=wC(l.serverSyncTree_,f,p)}else{const p=Je(a);d=gs(l.serverSyncTree_,f,p)}let m=f;d.length>0&&(m=kl(l,f)),Wt(l.eventQueue_,m,d)}function xy(l,n){sd(l,"connected",n),n===!1&&cT(l)}function lT(l,n){ut(n,(a,s)=>{sd(l,a,s)})}function sd(l,n,a){const s=new Ae("/.info/"+n),c=Je(a);l.infoData_.updateSnapshot(s,c);const f=gs(l.infoSyncTree_,s,c);Wt(l.eventQueue_,s,f)}function rd(l){return l.nextWriteId_++}function aT(l,n,a){const s=DC(l.serverSyncTree_,n);return s!=null?Promise.resolve(s):l.server_.get(n).then(c=>{const f=Je(c).withIndex(n._queryParams.getIndex());bf(l.serverSyncTree_,n,a,!0);let d;if(n._queryParams.loadsAllData())d=gs(l.serverSyncTree_,n._path,f);else{const m=cs(l.serverSyncTree_,n);d=Q_(l.serverSyncTree_,n._path,f,m)}return Wt(l.eventQueue_,n._path,d),ic(l.serverSyncTree_,n,a,null,!0),f},c=>(ys(l,"get for query "+$e(n)+" failed: "+c),Promise.reject(new Error(c))))}function sT(l,n,a,s,c){ys(l,"set",{path:n.toString(),value:a,priority:s});const f=mc(l),d=Je(a,s),m=Ff(l.serverSyncTree_,n),p=F_(d,m,f),g=rd(l),S=V_(l.serverSyncTree_,n,p,g,!0);hc(l.eventQueue_,S),l.server_.put(n.toString(),d.val(!0),(b,M)=>{const L=b==="ok";L||yt("set at "+n+" failed: "+b);const H=ci(l.serverSyncTree_,g,!L);Wt(l.eventQueue_,n,H),xf(l,c,b,M)});const v=od(l,n);kl(l,v),Wt(l.eventQueue_,v,[])}function rT(l,n,a,s){ys(l,"update",{path:n.toString(),value:a});let c=!0;const f=mc(l),d={};if(ut(a,(m,p)=>{c=!1,d[m]=P_(ke(n,m),Je(p),l.serverSyncTree_,f)}),c)ot("update() called with empty data.  Don't do anything."),xf(l,s,"ok",void 0);else{const m=rd(l),p=NC(l.serverSyncTree_,n,d,m);hc(l.eventQueue_,p),l.server_.merge(n.toString(),a,(g,S)=>{const v=g==="ok";v||yt("update at "+n+" failed: "+g);const b=ci(l.serverSyncTree_,m,!v),M=b.length>0?kl(l,n):n;Wt(l.eventQueue_,M,b),xf(l,s,g,S)}),ut(a,g=>{const S=od(l,ke(n,g));kl(l,S)}),Wt(l.eventQueue_,n,[])}}function cT(l){ys(l,"onDisconnectEvents");const n=mc(l),a=Pr();mf(l.onDisconnect_,pe(),(c,f)=>{const d=P_(c,f,l.serverSyncTree_,n);R_(a,c,d)});let s=[];mf(a,pe(),(c,f)=>{s=s.concat(gs(l.serverSyncTree_,c,f));const d=od(l,c);kl(l,d)}),l.onDisconnect_=Pr(),Wt(l.eventQueue_,pe(),s)}function oT(l,n,a){let s;ee(n._path)===".info"?s=bf(l.infoSyncTree_,n,a):s=bf(l.serverSyncTree_,n,a),iv(l.eventQueue_,n._path,s)}function av(l,n,a){let s;ee(n._path)===".info"?s=ic(l.infoSyncTree_,n,a):s=ic(l.serverSyncTree_,n,a),iv(l.eventQueue_,n._path,s)}function uT(l){l.persistentConnection_&&l.persistentConnection_.interrupt(WC)}function ys(l,...n){let a="";l.persistentConnection_&&(a=l.persistentConnection_.id+":"),ot(a,...n)}function xf(l,n,a,s){n&&Yl(()=>{if(a==="ok")n(null);else{const c=(a||"error").toUpperCase();let f=c;s&&(f+=": "+s);const d=new Error(f);d.code=c,n(d)}})}function sv(l,n,a){return Ff(l.serverSyncTree_,n,a)||Z.EMPTY_NODE}function cd(l,n=l.transactionQueueTree_){if(n||gc(l,n),Ql(n)){const a=cv(l,n);U(a.length>0,"Sending zero length transaction queue"),a.every(c=>c.status===0)&&fT(l,ps(n),a)}else $_(n)&&fc(n,a=>{cd(l,a)})}function fT(l,n,a){const s=a.map(g=>g.currentWriteId),c=sv(l,n,s);let f=c;const d=c.hash();for(let g=0;g<a.length;g++){const S=a[g];U(S.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),S.status=1,S.retryCount++;const v=pt(n,S.path);f=f.updateChild(v,S.currentOutputSnapshotRaw)}const m=f.val(!0),p=n;l.server_.put(p.toString(),m,g=>{ys(l,"transaction put response",{path:p.toString(),status:g});let S=[];if(g==="ok"){const v=[];for(let b=0;b<a.length;b++)a[b].status=2,S=S.concat(ci(l.serverSyncTree_,a[b].currentWriteId)),a[b].onComplete&&v.push(()=>a[b].onComplete(null,!0,a[b].currentOutputSnapshotResolved)),a[b].unwatcher();gc(l,ld(l.transactionQueueTree_,n)),cd(l,l.transactionQueueTree_),Wt(l.eventQueue_,n,S);for(let b=0;b<v.length;b++)Yl(v[b])}else{if(g==="datastale")for(let v=0;v<a.length;v++)a[v].status===3?a[v].status=4:a[v].status=0;else{yt("transaction at "+p.toString()+" failed: "+g);for(let v=0;v<a.length;v++)a[v].status=4,a[v].abortReason=g}kl(l,n)}},d)}function kl(l,n){const a=rv(l,n),s=ps(a),c=cv(l,a);return dT(l,c,s),s}function dT(l,n,a){if(n.length===0)return;const s=[];let c=[];const d=n.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<n.length;m++){const p=n[m],g=pt(a,p.path);let S=!1,v;if(U(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)S=!0,v=p.abortReason,c=c.concat(ci(l.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=eT)S=!0,v="maxretry",c=c.concat(ci(l.serverSyncTree_,p.currentWriteId,!0));else{const b=sv(l,p.path,d);p.currentInputSnapshot=b;const M=n[m].update(b.val());if(M!==void 0){dc("transaction failed: Data returned ",M,p.path);let L=Je(M);typeof M=="object"&&M!=null&&dn(M,".priority")||(L=L.updatePriority(b.getPriority()));const Q=p.currentWriteId,ce=mc(l),oe=F_(L,b,ce);p.currentOutputSnapshotRaw=L,p.currentOutputSnapshotResolved=oe,p.currentWriteId=rd(l),d.splice(d.indexOf(Q),1),c=c.concat(V_(l.serverSyncTree_,p.path,oe,p.currentWriteId,p.applyLocally)),c=c.concat(ci(l.serverSyncTree_,Q,!0))}else S=!0,v="nodata",c=c.concat(ci(l.serverSyncTree_,p.currentWriteId,!0))}Wt(l.eventQueue_,a,c),c=[],S&&(n[m].status=2,(function(b){setTimeout(b,Math.floor(0))})(n[m].unwatcher),n[m].onComplete&&(v==="nodata"?s.push(()=>n[m].onComplete(null,!1,n[m].currentInputSnapshot)):s.push(()=>n[m].onComplete(new Error(v),!1,null))))}gc(l,l.transactionQueueTree_);for(let m=0;m<s.length;m++)Yl(s[m]);cd(l,l.transactionQueueTree_)}function rv(l,n){let a,s=l.transactionQueueTree_;for(a=ee(n);a!==null&&Ql(s)===void 0;)s=ld(s,a),n=ze(n),a=ee(n);return s}function cv(l,n){const a=[];return ov(l,n,a),a.sort((s,c)=>s.order-c.order),a}function ov(l,n,a){const s=Ql(n);if(s)for(let c=0;c<s.length;c++)a.push(s[c]);fc(n,c=>{ov(l,c,a)})}function gc(l,n){const a=Ql(n);if(a){let s=0;for(let c=0;c<a.length;c++)a[c].status!==2&&(a[s]=a[c],s++);a.length=s,J_(n,a.length>0?a:void 0)}fc(n,s=>{gc(l,s)})}function od(l,n){const a=ps(rv(l,n)),s=ld(l.transactionQueueTree_,n);return kC(s,c=>{ef(l,c)}),ef(l,s),W_(s,c=>{ef(l,c)}),a}function ef(l,n){const a=Ql(n);if(a){const s=[];let c=[],f=-1;for(let d=0;d<a.length;d++)a[d].status===3||(a[d].status===1?(U(f===d-1,"All SENT items should be at beginning of queue."),f=d,a[d].status=3,a[d].abortReason="set"):(U(a[d].status===0,"Unexpected transaction status in abort"),a[d].unwatcher(),c=c.concat(ci(l.serverSyncTree_,a[d].currentWriteId,!0)),a[d].onComplete&&s.push(a[d].onComplete.bind(null,new Error("set"),!1,null))));f===-1?J_(n,void 0):a.length=f+1,Wt(l.eventQueue_,ps(n),c);for(let d=0;d<s.length;d++)Yl(s[d])}}function hT(l){let n="";const a=l.split("/");for(let s=0;s<a.length;s++)if(a[s].length>0){let c=a[s];try{c=decodeURIComponent(c.replace(/\+/g," "))}catch{}n+="/"+c}return n}function mT(l){const n={};l.charAt(0)==="?"&&(l=l.substring(1));for(const a of l.split("&")){if(a.length===0)continue;const s=a.split("=");s.length===2?n[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):yt(`Invalid query segment '${a}' in query '${l}'`)}return n}const Ey=function(l,n){const a=gT(l),s=a.namespace;a.domain==="firebase.com"&&zn(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&a.domain!=="localhost"&&zn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.secure||Ex();const c=a.scheme==="ws"||a.scheme==="wss";return{repoInfo:new d_(a.host,a.secure,s,c,n,"",s!==a.subdomain),path:new Ae(a.pathString)}},gT=function(l){let n="",a="",s="",c="",f="",d=!0,m="https",p=443;if(typeof l=="string"){let g=l.indexOf("//");g>=0&&(m=l.substring(0,g-1),l=l.substring(g+2));let S=l.indexOf("/");S===-1&&(S=l.length);let v=l.indexOf("?");v===-1&&(v=l.length),n=l.substring(0,Math.min(S,v)),S<v&&(c=hT(l.substring(S,v)));const b=mT(l.substring(Math.min(l.length,v)));g=n.indexOf(":"),g>=0?(d=m==="https"||m==="wss",p=parseInt(n.substring(g+1),10)):g=n.length;const M=n.slice(0,g);if(M.toLowerCase()==="localhost")a="localhost";else if(M.split(".").length<=2)a=M;else{const L=n.indexOf(".");s=n.substring(0,L).toLowerCase(),a=n.substring(L+1),f=s}"ns"in b&&(f=b.ns)}return{host:n,port:p,domain:a,subdomain:s,secure:d,scheme:m,pathString:c,namespace:f}};class pT{constructor(n,a,s,c){this.eventType=n,this.eventRegistration=a,this.snapshot=s,this.prevName=c}getPath(){const n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+$e(this.snapshot.exportVal())}}class yT{constructor(n,a,s){this.eventRegistration=n,this.error=a,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class uv{constructor(n,a){this.snapshotCallback=n,this.cancelCallback=a}onValue(n,a){this.snapshotCallback.call(null,n,a)}onCancel(n){return U(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class ud{constructor(n,a,s,c){this._repo=n,this._path=a,this._queryParams=s,this._orderByCalled=c}get key(){return ae(this._path)?null:Uf(this._path)}get ref(){return new In(this._repo,this._path)}get _queryIdentifier(){const n=oy(this._queryParams),a=jf(n);return a==="{}"?"default":a}get _queryObject(){return oy(this._queryParams)}isEqual(n){if(n=Gl(n),!(n instanceof ud))return!1;const a=this._repo===n._repo,s=Hf(this._path,n._path),c=this._queryIdentifier===n._queryIdentifier;return a&&s&&c}toJSON(){return this.toString()}toString(){return this._repo.toString()+sE(this._path)}}class In extends ud{constructor(n,a){super(n,a,new Gf,!1)}get parent(){const n=S_(this._path);return n===null?null:new In(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}}class os{constructor(n,a,s){this._node=n,this.ref=a,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const a=new Ae(n),s=Ef(this.ref,n);return new os(this._node.getChild(a),s,qe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,c)=>n(new os(c,Ef(this.ref,s),qe)))}hasChild(n){const a=new Ae(n);return!this._node.getChild(a).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Bt(l,n){return l=Gl(l),l._checkNotDeleted("ref"),n!==void 0?Ef(l._root,n):l._root}function Ef(l,n){return l=Gl(l),ee(l._path)===null?PC("child","path",n):tv("child","path",n),new In(l._repo,ke(l._path,n))}function fv(l){return nv("remove",l._path),dv(l,null)}function dv(l,n){l=Gl(l),nv("set",l._path),XC("set",n,l._path);const a=new us;return sT(l._repo,l._path,n,null,a.wrapCallback(()=>{})),a.promise}function pi(l,n){KC("update",n,l._path);const a=new us;return rT(l._repo,l._path,n,a.wrapCallback(()=>{})),a.promise}function Vi(l){l=Gl(l);const n=new uv(()=>{}),a=new pc(n);return aT(l._repo,l,a).then(s=>new os(s,new In(l._repo,l._path),l._queryParams.getIndex()))}class pc{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,a){const s=a._queryParams.getIndex();return new pT("value",this,new os(n.snapshotNode,new In(a._repo,a._path),s))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,a){return this.callbackContext.hasCancelCallback?new yT(this,n,a):null}matches(n){return n instanceof pc?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function _T(l,n,a,s,c){const f=new uv(a,void 0),d=new pc(f);return oT(l._repo,l,d),()=>av(l._repo,l,d)}function hv(l,n,a,s){return _T(l,"value",n)}function mv(l,n,a){av(l._repo,l,null)}_C(In);EC(In);const vT="FIREBASE_DATABASE_EMULATOR_HOST",Cf={};let bT=!1;function ST(l,n,a,s){const c=n.lastIndexOf(":"),f=n.substring(0,c),d=Mf(f);l.repoInfo_=new d_(n,d,l.repoInfo_.namespace,l.repoInfo_.webSocketOnly,l.repoInfo_.nodeAdmin,l.repoInfo_.persistenceKey,l.repoInfo_.includeNamespaceInQueryParams,!0,a),s&&(l.authTokenProvider_=s)}function xT(l,n,a,s,c){let f=s||l.options.databaseURL;f===void 0&&(l.options.projectId||zn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ot("Using default host for project ",l.options.projectId),f=`${l.options.projectId}-default-rtdb.firebaseio.com`);let d=Ey(f,c),m=d.repoInfo,p;typeof process<"u"&&Qp&&(p=Qp[vT]),p?(f=`http://${p}?ns=${m.namespace}`,d=Ey(f,c),m=d.repoInfo):d.repoInfo.secure;const g=new zx(l.name,l.options,n);FC("Invalid Firebase Database URL",d),ae(d.path)||zn("Database URL must point to the root of a Firebase Database (not including a child path).");const S=CT(m,l,g,new jx(l,a));return new TT(S,l)}function ET(l,n){const a=Cf[n];(!a||a[l.key]!==l)&&zn(`Database ${n}(${l.repoInfo_}) has already been deleted.`),uT(l),delete a[l.key]}function CT(l,n,a,s){let c=Cf[n.name];c||(c={},Cf[n.name]=c);let f=c[l.toURLString()];return f&&zn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),f=new tT(l,bT,a,s),c[l.toURLString()]=f,f}class TT{constructor(n,a){this._repoInternal=n,this.app=a,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(nT(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new In(this._repo,pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ET(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&zn("Cannot call "+n+" on a deleted database.")}}function NT(l=lx(),n){const a=WS(l,"database").getImmediate({identifier:n});if(!a._instanceStarted){const s=H1("database");s&&wT(a,...s)}return a}function wT(l,n,a,s={}){l=Gl(l),l._checkNotDeleted("useEmulator");const c=`${n}:${a}`,f=l._repoInternal;if(l._instanceStarted){if(c===l._repoInternal.repoInfo_.host&&Gr(s,f.repoInfo_.emulatorOptions))return;zn("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(f.repoInfo_.nodeAdmin)s.mockUserToken&&zn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new Br(Br.OWNER);else if(s.mockUserToken){const m=typeof s.mockUserToken=="string"?s.mockUserToken:k1(s.mockUserToken,l.app.options.projectId);d=new Br(m)}Mf(n)&&(B1(n),Y1("Database",!0)),ST(f,c,s,d)}function AT(l){yx(ix),Vr(new es("database",(n,{instanceIdentifier:a})=>{const s=n.getProvider("app").getImmediate(),c=n.getProvider("auth-internal"),f=n.getProvider("app-check-internal");return xT(s,c,f,a)},"PUBLIC").setMultipleInstances(!0)),Ol(Xp,Zp,l),Ol(Xp,Zp,"esm2020")}On.prototype.simpleListen=function(l,n){this.sendRequest("q",{p:l},n)};On.prototype.echo=function(l,n){this.sendRequest("echo",{d:l},n)};AT();const RT={apiKey:"AIzaSyAEOAwPVqYO-BbsBYQC6o7CfJvHdGfYKss",authDomain:"relife-bbd8c.firebaseapp.com",databaseURL:"https://relife-bbd8c-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"relife-bbd8c",storageBucket:"relife-bbd8c.firebasestorage.app",messagingSenderId:"144008353106",appId:"1:144008353106:web:cc629a581daf2e2ed1168b"},MT=Py(RT),kt=NT(MT),DT=()=>Math.random().toString().slice(2,8),gv=()=>"player_"+Math.random().toString(36).slice(2,11),OT=async(l,n)=>{const a=DT(),s=gv(),c={id:a,hostId:s,players:[{id:s,name:l,characterId:n,ready:!0}],status:"waiting",gameState:null,createdAt:Date.now()};return await dv(Bt(kt,`rooms/${a}`),c),{roomId:a,playerId:s}},jT=async(l,n,a)=>{const s=Bt(kt,`rooms/${l}`),c=await Vi(s);if(!c.exists())return{success:!1,error:""};const f=c.val();if(f.status!=="waiting")return{success:!1,error:""};if(f.players.length>=4)return{success:!1,error:""};if(f.players.some(p=>p.characterId===a))return{success:!1,error:""};const d=gv(),m={id:d,name:n,characterId:a,ready:!1};return await pi(s,{players:[...f.players,m]}),{success:!0,playerId:d}},zT=async(l,n)=>{const a=Bt(kt,`rooms/${l}`),s=await Vi(a);if(!s.exists())return;const c=s.val(),f=c.players.filter(d=>d.id!==n);f.length===0?await fv(a):c.hostId===n?await pi(a,{players:f,hostId:f[0].id}):await pi(a,{players:f})},IT=async(l,n,a)=>{const s=Bt(kt,`rooms/${l}`),c=await Vi(s);if(!c.exists())return;const d=c.val().players.map(m=>m.id===n?{...m,ready:a}:m);await pi(s,{players:d})},LT=async(l,n,a)=>{const s=Bt(kt,`rooms/${l}`),c=await Vi(s);if(!c.exists())return{success:!1,error:""};const f=c.val();if(f.players.some(m=>m.id!==n&&m.characterId===a))return{success:!1,error:""};const d=f.players.map(m=>m.id===n?{...m,characterId:a}:m);return await pi(s,{players:d}),{success:!0}},UT=async(l,n,a)=>{const s=Bt(kt,`rooms/${l}`),c=await Vi(s);if(!c.exists())return{success:!1,error:""};const f=c.val();return f.hostId!==n?{success:!1,error:""}:f.players.length<2?{success:!1,error:" 2 "}:f.players.every(d=>d.ready)?(await pi(s,{status:"playing",gameState:a}),{success:!0}):{success:!1,error:""}},HT=async(l,n)=>{const a=Bt(kt,`rooms/${l}`);await pi(a,{gameState:n})},tf=(l,n)=>{const a=Bt(kt,`rooms/${l}`);return hv(a,s=>{s.exists()?n(s.val()):n(null)}),()=>mv(a)},BT=async l=>(await Vi(Bt(kt,`rooms/${l}`))).exists(),kT=1440*60*1e3,qT=360*60*1e3,GT=async()=>{const l=Bt(kt,"rooms"),n=await Vi(l);if(!n.exists())return{deleted:0,total:0};const a=Date.now(),s=n.val(),c=Object.entries(s);let f=0;for(const[d,m]of c){const p=a-(m.createdAt||0);(p>kT||m.status==="playing"&&p>qT||m.status==="finished"&&p>3600*1e3)&&(await fv(Bt(kt,`rooms/${d}`)),f++)}return console.log(`[Room Cleanup]  ${f}/${c.length} `),{deleted:f,total:c.length}},$a="relife_session",Cy=(l,n,a)=>{const s={roomId:l,playerId:n,playerName:a,timestamp:Date.now()};localStorage.setItem($a,JSON.stringify(s))},Ty=()=>{try{const l=localStorage.getItem($a);if(!l)return null;const n=JSON.parse(l),a=1440*60*1e3;return Date.now()-n.timestamp>a?(localStorage.removeItem($a),null):n}catch{return localStorage.removeItem($a),null}},Ml=()=>{localStorage.removeItem($a)},yc=Ry((l,n)=>{let a=null;return{roomId:null,playerId:null,room:null,isOnlineMode:!1,isReconnecting:!1,error:null,createNewRoom:async(s,c)=>{try{const{roomId:f,playerId:d}=await OT(s,c);Cy(f,d,s),a=tf(f,m=>{l({room:m})}),l({roomId:f,playerId:d,isOnlineMode:!0,error:null})}catch{l({error:""})}},joinExistingRoom:async(s,c,f)=>{try{const d=await jT(s,c,f);return d.success?(Cy(s,d.playerId,c),a=tf(s,m=>{l({room:m})}),l({roomId:s,playerId:d.playerId,isOnlineMode:!0,error:null}),!0):(l({error:d.error||""}),!1)}catch{return l({error:""}),!1}},leaveCurrentRoom:async()=>{const{roomId:s,playerId:c}=n();!s||!c||(a&&(a(),a=null),await zT(s,c),Ml(),l({roomId:null,playerId:null,room:null,isOnlineMode:!1,error:null}))},tryReconnect:async()=>{const s=Ty();if(!s)return!1;l({isReconnecting:!0,error:null});try{return await BT(s.roomId)?new Promise(f=>{a=tf(s.roomId,d=>{if(!d){Ml(),l({isReconnecting:!1,error:""}),f(!1);return}if(!d.players.some(p=>p.id===s.playerId)){Ml(),a&&(a(),a=null),l({isReconnecting:!1,error:""}),f(!1);return}l({roomId:s.roomId,playerId:s.playerId,room:d,isOnlineMode:!0,isReconnecting:!1,error:null}),f(!0)})}):(Ml(),l({isReconnecting:!1,error:""}),!1)}catch{return Ml(),l({isReconnecting:!1,error:""}),!1}},hasStoredSession:()=>Ty()!==null,toggleReady:async()=>{const{roomId:s,playerId:c,room:f}=n();if(!s||!c||!f)return;const d=f.players.find(m=>m.id===c);d&&await IT(s,c,!d.ready)},changeCharacter:async s=>{const{roomId:c,playerId:f}=n();if(!c||!f)return!1;const d=await LT(c,f,s);return d.success?!0:(l({error:d.error||""}),!1)},startOnlineGame:async()=>{const{roomId:s,playerId:c,room:f}=n();if(!s||!c||!f)return!1;const d=f.players.map(v=>v.name),m=f.players.map(v=>v.characterId),p=Iy(d,m),g=lf(p),S=await UT(s,c,g);return S.success?!0:(l({error:S.error||""}),!1)},syncGameState:async s=>{const{roomId:c}=n();c&&await HT(c,s)},getCurrentPlayer:()=>{const{room:s,playerId:c}=n();return!s||!c?null:s.players.find(f=>f.id===c)||null},isHost:()=>{const{room:s,playerId:c}=n();return!s||!c?!1:s.hostId===c},canStartGame:()=>{const{room:s}=n();return s?s.players.length>=2&&s.players.every(c=>c.ready):!1},resetRoom:()=>{a&&(a(),a=null),Ml(),l({roomId:null,playerId:null,room:null,isOnlineMode:!1,isReconnecting:!1,error:null})}}}),YT=({onOnlineClick:l})=>{const{startGame:n}=Ht(),[a,s]=De.useState(["1","2","3","4"]),[c,f]=De.useState([Jt[0].id,Jt[1].id,Jt[2].id,Jt[3].id]),d=(S,v)=>{const b=[...a];b[S]=v,s(b)},m=(S,v)=>{const b=[...c];b[S]=v,f(b)},p=()=>{n(a,c)},g=new Set(c).size!==c.length;return _.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 max-w-2xl w-full",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("img",{src:"/Relife/logo.png",alt:"ReLife ",className:"h-20 mx-auto mb-4"}),_.jsx("p",{className:"text-gray-400",children:""})]}),_.jsxs("div",{className:"space-y-4 mb-8",children:[_.jsx("h2",{className:"text-xl font-bold text-white",children:""}),[0,1,2,3].map(S=>_.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[_.jsxs("div",{className:"flex-1 w-full sm:w-auto",children:[_.jsxs("label",{className:"block text-gray-400 text-sm mb-1",children:[" ",S+1]}),_.jsx("input",{type:"text",value:a[S],onChange:v=>d(S,v.target.value),className:"w-full bg-gray-600 text-white rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500"})]}),_.jsxs("div",{className:"flex-1 w-full sm:w-auto",children:[_.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:""}),_.jsx("select",{value:c[S],onChange:v=>m(S,v.target.value),className:"w-full bg-gray-600 text-white rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500",children:Jt.map(v=>_.jsxs("option",{value:v.id,children:[v.name," ($",v.initialMoney.toLocaleString(),")"]},v.id))})]}),_.jsx("div",{className:"text-xs text-gray-400 w-full sm:w-32",children:(()=>{const v=Jt.find(b=>b.id===c[S]);return v?_.jsxs(_.Fragment,{children:[_.jsxs("div",{children:[":",v.initialStats.intelligence]}),_.jsxs("div",{children:[":",v.initialStats.stamina]}),_.jsxs("div",{children:[":",v.initialStats.charisma]})]}):null})()})]},S)),g&&_.jsx("div",{className:"text-red-400 text-sm",children:" "})]}),_.jsxs("div",{className:"space-y-3",children:[_.jsx("button",{onClick:p,disabled:g,className:`w-full py-4 rounded-lg font-bold text-xl transition-colors ${g?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-yellow-500 hover:bg-yellow-400 text-black"}`,children:""}),l&&_.jsx("button",{onClick:l,className:"w-full py-4 rounded-lg font-bold text-xl bg-blue-600 hover:bg-blue-500 text-white transition-colors",children:""})]}),_.jsxs("div",{className:"mt-8 text-gray-400 text-sm",children:[_.jsx("h3",{className:"font-bold text-white mb-2",children:""}),_.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[_.jsx("li",{children:""}),_.jsx("li",{children:""}),_.jsx("li",{children:""}),_.jsx("li",{children:" 10 "})]})]})]})})},Tf=l=>{if(l===void 0)return null;if(l===null)return l;if(Array.isArray(l))return l.filter(n=>n!==void 0).map(Tf);if(typeof l=="object"){const n={};for(const[a,s]of Object.entries(l))s!==void 0&&(n[a]=Tf(s));return n}return l},VT=()=>{const{roomId:l,playerId:n,room:a}=yc(),s=De.useRef(!1),c=De.useRef(""),f=l&&a?.status==="playing",d=De.useCallback(async()=>{if(!l||s.current)return;const g=Ht.getState(),S={playerCount:g.playerCount??4,maxTurns:g.maxTurns??10,players:g.players||[],currentPlayerIndex:g.currentPlayerIndex??0,turn:g.turn??1,phase:g.phase||"setup",deck:g.deck||[],discardPile:g.discardPile||[],currentEvent:g.currentEvent??null,eventLog:g.eventLog||[],selectedCardIndex:g.selectedCardIndex??null,showEventModal:g.showEventModal??!1},v=JSON.stringify(S);if(v===c.current)return;c.current=v;const b=Bt(kt,`rooms/${l}`);await pi(b,{gameState:Tf(S)})},[l]);De.useEffect(()=>{if(!f)return;const g=Bt(kt,`rooms/${l}`);return hv(g,v=>{if(!v.exists())return;const M=v.val().gameState;if(!M)return;const L=JSON.stringify(M);L!==c.current&&(s.current=!0,c.current=L,Ht.setState({playerCount:M.playerCount,maxTurns:M.maxTurns,players:M.players,currentPlayerIndex:M.currentPlayerIndex,turn:M.turn,phase:M.phase,deck:M.deck,discardPile:M.discardPile,currentEvent:M.currentEvent,eventLog:M.eventLog,selectedCardIndex:M.selectedCardIndex,showEventModal:M.showEventModal}),setTimeout(()=>{s.current=!1},100))}),()=>{mv(g)}},[f,l]);const m=De.useCallback(()=>!a||!n||!a.players.find(v=>v.id===n)?-1:a.players.findIndex(v=>v.id===n),[a,n]),p=De.useCallback(()=>{if(!f)return!0;const g=m(),S=Ht.getState().currentPlayerIndex;return g===S},[f,m]);return{isOnlineGame:!!f,syncToFirebase:d,isMyTurn:p,getMyPlayerIndex:m,playerId:n}},pv=l=>{const[n,a]=De.useState([]),s=De.useRef(null),c=De.useRef(Date.now()),f=De.useRef(0);return De.useEffect(()=>{if(Date.now()-c.current<1500){s.current=l;return}if(s.current===null){s.current=l;return}const m=l-s.current;if(m!==0){const p={id:f.current++,value:m,timestamp:Date.now()};a(g=>[...g,p]),setTimeout(()=>{a(g=>g.filter(S=>S.id!==p.id))},1e3)}s.current=l},[l]),n},yv=({changes:l,isMoney:n=!1})=>_.jsx(_.Fragment,{children:l.map(a=>_.jsxs("span",{className:`
            absolute left-1/2 -translate-x-1/2
            font-bold text-lg pointer-events-none
            animate-float-up
            ${a.value>0?"text-green-400":"text-red-400"}
          `,style:{top:"-8px"},children:[a.value>0?"+":"",n?`$${a.value.toLocaleString()}`:a.value]},a.id))}),Ny=({player:l,isCurrentPlayer:n,isCompact:a=!1})=>{if(!l)return null;const s=n?"border-yellow-400":"border-gray-600",c=n?"bg-gray-800":"bg-gray-900";return a?_.jsxs("div",{className:`${c} ${s} border-2 rounded-lg p-2 text-sm`,children:[_.jsxs("div",{className:"flex justify-between items-center mb-1",children:[_.jsx("span",{className:"font-bold text-white",children:l.name}),_.jsx(wy,{value:l.money,size:"small"})]}),_.jsxs("div",{className:"flex gap-2 text-xs",children:[_.jsxs("span",{className:"text-blue-400",children:["",l.stats.intelligence]}),_.jsxs("span",{className:"text-red-400",children:["",l.stats.stamina]}),_.jsxs("span",{className:"text-pink-400",children:["",l.stats.charisma]})]}),_.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[Tp(l)," |  ",l.hand.length]})]}):_.jsxs("div",{className:`${c} ${s} border-2 rounded-lg p-4`,children:[_.jsxs("div",{className:"flex justify-between items-start mb-3",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-bold text-white",children:l.name}),_.jsx("p",{className:"text-sm text-gray-400",children:l.character.name})]}),n&&_.jsx("span",{className:"bg-yellow-500 text-black text-xs px-2 py-1 rounded",children:""})]}),_.jsx("div",{className:"mb-3",children:_.jsx(wy,{value:l.money,size:"large"})}),_.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[_.jsx(nf,{label:"",value:l.stats.intelligence,color:"blue"}),_.jsx(nf,{label:"",value:l.stats.stamina,color:"red"}),_.jsx(nf,{label:"",value:l.stats.charisma,color:"pink"})]}),_.jsxs("div",{className:"border-t border-gray-700 pt-3",children:[_.jsxs("div",{className:"flex justify-between text-sm",children:[_.jsx("span",{className:"text-gray-400",children:""}),_.jsx("span",{className:"text-white",children:Tp(l)})]}),l.job&&_.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[_.jsx("span",{className:"text-gray-400",children:""}),_.jsxs("span",{className:"text-green-400",children:[l.performance,"/9"]})]}),_.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[_.jsx("span",{className:"text-gray-400",children:""}),_.jsxs("span",{className:"text-white",children:[l.hand.length,"/10"]})]})]})]})},nf=({label:l,value:n,color:a})=>{const s=pv(n),c={blue:"bg-blue-900 text-blue-300",red:"bg-red-900 text-red-300",pink:"bg-pink-900 text-pink-300"};return _.jsxs("div",{className:`${c[a]} rounded px-2 py-1 text-center relative`,children:[_.jsx("div",{className:"text-xs",children:l}),_.jsx("div",{className:"text-lg font-bold",children:n}),_.jsx(yv,{changes:s})]})},wy=({value:l,size:n})=>{const a=pv(l),s={small:"text-yellow-400",large:"text-yellow-400 text-2xl font-bold"};return _.jsxs("span",{className:`${s[n]} relative inline-block`,children:["$",l.toLocaleString(),_.jsx(yv,{changes:a,isMoney:!0})]})},QT=({card:l,isSelected:n=!1,onClick:a,disabled:s=!1,size:c="medium"})=>{const f={study:{bg:"bg-blue-900",border:"border-blue-500",text:"text-blue-300"},work:{bg:"bg-green-900",border:"border-green-500",text:"text-green-300"},explore:{bg:"bg-yellow-900",border:"border-yellow-500",text:"text-yellow-300"},function:{bg:"bg-purple-900",border:"border-purple-500",text:"text-purple-300"}},d={study:"",work:"",explore:"",function:""},m={small:"w-20 h-28 text-xs",medium:"w-28 h-40 text-sm",large:"w-36 h-52 text-base"},p=f[l.type];return _.jsxs("div",{onClick:s?void 0:a,className:`
        ${m[c]}
        ${p.bg}
        ${n?"border-yellow-400 border-4 -translate-y-4 scale-110 shadow-lg shadow-yellow-400/30":`${p.border} border-2`}
        ${s?"opacity-50 cursor-not-allowed":"cursor-pointer hover:-translate-y-3 hover:scale-110 hover:shadow-xl hover:shadow-black/50"}
        rounded-lg p-2 flex flex-col transition-all duration-200 ease-out
      `,children:[_.jsx("div",{className:`${p.text} text-xs mb-1`,children:d[l.type]}),_.jsx("div",{className:"text-white font-bold flex-grow flex items-center justify-center text-center",children:l.name}),_.jsx("div",{className:"text-gray-300 text-xs mt-1 text-center",children:l.description}),l.cost&&_.jsxs("div",{className:"mt-1 text-yellow-400 text-xs text-center",children:["$",l.cost]})]})},XT=({cards:l,canPlay:n})=>{const{selectedCardIndex:a,selectCard:s,canCurrentPlayerPlayCard:c}=Ht(),[f,d]=De.useState(null);return l.length===0?_.jsx("div",{className:"text-gray-500 text-center py-8",children:""}):_.jsx("div",{className:"flex flex-wrap gap-2 justify-center py-4",children:l.map((m,p)=>{const g=c(p),S=!n||!g.canPlay,v=f===p,b=a===p;return _.jsxs("div",{className:"relative transition-all duration-200",style:{zIndex:b?20:v?10:1},onMouseEnter:()=>d(p),onMouseLeave:()=>d(null),children:[_.jsx(QT,{card:m,isSelected:b,onClick:()=>s(b?null:p),disabled:S,size:"medium"}),S&&g.reason&&b&&_.jsx("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-red-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap z-30",children:g.reason})]},m.id)})})},ZT=({event:l,onConfirm:n})=>_.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:_.jsxs("div",{className:"bg-gray-800 border-2 border-yellow-500 rounded-xl p-6 max-w-md mx-4 animate-bounce-in",children:[_.jsxs("div",{className:"text-center mb-4",children:[_.jsx("div",{className:"text-yellow-400 text-sm mb-1",children:""}),_.jsx("h2",{className:"text-2xl font-bold text-white",children:l.name})]}),_.jsx("div",{className:"bg-gray-900 rounded-lg p-4 mb-6",children:_.jsx("p",{className:"text-gray-200 text-center leading-relaxed",children:l.description})}),_.jsx("div",{className:"text-center mb-6",children:_.jsx(KT,{event:l})}),_.jsx("button",{onClick:n,className:"w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-3 px-6 rounded-lg transition-colors",children:""})]})}),KT=({event:l})=>{const{effect:n,target:a}=l;let s="";switch(a.type){case"all":s="";break;case"richest":s=` ${a.count} `;break;case"poorest":s=` ${a.count} `;break;case"has_job":s="";break;default:s=""}let c="";switch(n.type){case"money_change":c=` ${n.value>0?"+":""}$${n.value}`;break;case"stat_change":c=`${{intelligence:"",stamina:"",charisma:""}[n.stat]} ${n.value>0?"+":""}${n.value}`;break;case"draw_cards":c=` ${n.count} `;break;case"special":c="";break}return _.jsxs("div",{className:"text-sm",children:[_.jsx("span",{className:"text-gray-400",children:""}),_.jsx("span",{className:"text-white ml-2",children:s}),c&&n.type!=="special"&&_.jsxs(_.Fragment,{children:[_.jsx("br",{}),_.jsx("span",{className:"text-gray-400",children:""}),_.jsx("span",{className:`ml-2 ${n.type==="money_change"||n.type==="stat_change"?(n.type==="money_change",n.value>0?"text-green-400":"text-red-400"):"text-white"}`,children:c})]})]})},PT=({disabled:l=!1})=>{const{phase:n,players:a,currentPlayerIndex:s,selectedCardIndex:c,pendingStatChoice:f,pendingExplore:d,pendingTargetPlayer:m,pendingFunctionCard:p,lastMessage:g,playSelectedCard:S,chooseStat:v,chooseExploreLocation:b,chooseTargetPlayer:M,useInvalidCard:L,passReaction:H,cancelPendingAction:Q,endPlayerTurn:ce,nextPhase:oe}=Ht(),fe={steal:"",sabotage:""};if(p){const{card:ye,sourcePlayerIndex:Pe,respondingPlayerIndex:be}=p,P=a[Pe],Se=a[be],de=Se.hand.map((ht,it)=>({card:ht,index:it})).filter(({card:ht})=>ht.effect.type==="special"&&ht.effect.handler==="invalid");return _.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[_.jsxs("div",{className:"text-yellow-400 text-center mb-2",children:[" ",P.name," ",ye.name,""]}),_.jsxs("div",{className:"text-white text-center mb-3",children:[Se.name,""]}),_.jsxs("div",{className:"flex justify-center gap-3 flex-wrap",children:[de.map(({card:ht,index:it})=>_.jsxs("button",{onClick:()=>L(it),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded",children:["",ht.name,""]},it)),_.jsx("button",{onClick:H,className:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded",children:""})]})]})}if(f)return _.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[_.jsx("div",{className:"text-white text-center mb-3",children:""}),_.jsxs("div",{className:"flex justify-center gap-3 flex-wrap",children:[_.jsxs("button",{onClick:()=>v("intelligence"),className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded",children:[" +",f.value]}),_.jsxs("button",{onClick:()=>v("stamina"),className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded",children:[" +",f.value]}),_.jsxs("button",{onClick:()=>v("charisma"),className:"bg-pink-600 hover:bg-pink-500 text-white px-4 py-2 rounded",children:[" +",f.value]}),_.jsx("button",{onClick:Q,className:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded",children:""})]})]});if(d)return _.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[_.jsx("div",{className:"text-white text-center mb-3",children:""}),_.jsxs("div",{className:"flex justify-center gap-3 flex-wrap",children:[Oy.map(ye=>_.jsx("button",{onClick:()=>b(ye.id),className:"bg-yellow-600 hover:bg-yellow-500 text-white px-4 py-2 rounded",children:ye.name},ye.id)),_.jsx("button",{onClick:Q,className:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded",children:""})]})]});if(m){const ye=a.filter((be,P)=>P!==s),Pe=fe[m.action]||m.action;return _.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[_.jsxs("div",{className:"text-white text-center mb-3",children:["",Pe,""]}),_.jsxs("div",{className:"flex justify-center gap-3 flex-wrap",children:[ye.map(be=>_.jsxs("button",{onClick:()=>M(be.id),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded",children:[be.name,m.action==="steal"&&_.jsxs("span",{className:"text-xs ml-1",children:["(",be.hand.length," )"]})]},be.id)),_.jsx("button",{onClick:Q,className:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded",children:""})]})]})}return l?_.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[g&&_.jsx("div",{className:"text-yellow-400 text-center mb-3 text-sm",children:g}),_.jsx("div",{className:"text-gray-500 text-center",children:"..."})]}):_.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[g&&_.jsx("div",{className:"text-yellow-400 text-center mb-3 text-sm",children:g}),_.jsxs("div",{className:"flex justify-center gap-3",children:[n==="action"&&_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:S,disabled:c===null,className:`px-4 py-2 rounded font-bold ${c!==null?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:""}),_.jsx("button",{onClick:ce,className:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded",children:""})]}),n==="salary"&&_.jsx("button",{onClick:oe,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded font-bold",children:" "}),n==="draw"&&_.jsx("button",{onClick:oe,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded font-bold",children:" "})]})]})},FT=({disabled:l=!1})=>{const{phase:n,getCurrentPlayer:a,getAvailableJobsForCurrentPlayer:s,applyJob:c,tryPromote:f}=Ht(),d=a();if(!d)return null;const m=s(),p=wf(d),g=r1(),S={intelligence:{name:"",color:"text-blue-400",bg:"bg-blue-900/30"},stamina:{name:"",color:"text-red-400",bg:"bg-red-900/30"},charisma:{name:"",color:"text-pink-400",bg:"bg-pink-900/30"}};return n!=="action"?_.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[_.jsx("h3",{className:"text-white font-bold mb-2",children:""}),_.jsx("div",{className:"text-gray-400 text-sm",children:""})]}):_.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[_.jsx("h3",{className:"text-white font-bold mb-3",children:""}),d.job?_.jsxs("div",{className:"mb-4 p-3 bg-gray-700 rounded",children:[_.jsx("div",{className:"text-sm text-gray-400",children:""}),_.jsx("div",{className:"text-white font-bold",children:d.job.levels[d.jobLevel].name}),_.jsx("div",{className:"text-xs text-gray-400 mt-1",children:d.job.skill}),_.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:[": ",d.performance,"/9"]}),p&&!l&&_.jsx("button",{onClick:f,className:"mt-2 bg-green-600 hover:bg-green-500 text-white text-sm px-3 py-1 rounded w-full",children:""})]}):_.jsx("div",{className:"mb-4 text-gray-400 text-sm",children:""}),!d.job&&_.jsxs("div",{children:[_.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:[" (",m.length,")"]}),m.length>0?_.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:m.map(v=>{const b=S[v.category];return _.jsxs("button",{onClick:()=>c(v.id),disabled:l,className:`w-full text-left p-2 ${b.bg} ${l?"opacity-50 cursor-not-allowed":"hover:brightness-125"} rounded transition-all`,children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-white font-bold",children:v.levels[0].name}),_.jsx("span",{className:`text-xs ${b.color}`,children:b.name})]}),_.jsxs("div",{className:"text-xs text-gray-400",children:[": $",v.levels[0].salary[0].toLocaleString()]})]},v.id)})}):_.jsx("div",{className:"text-gray-500 text-sm",children:""})]}),_.jsxs("details",{className:"mt-4",children:[_.jsx("summary",{className:"text-gray-400 text-xs cursor-pointer hover:text-gray-300",children:""}),_.jsx("div",{className:"mt-2 space-y-3 text-xs max-h-64 overflow-y-auto",children:["intelligence","stamina","charisma"].map(v=>{const b=S[v];return _.jsxs("div",{children:[_.jsx("div",{className:`${b.color} font-bold mb-1`,children:b.name}),_.jsx("div",{className:"space-y-1",children:g[v].map(M=>{const L=M.levels[0].requiredStats,H=m.some(Q=>Q.id===M.id);return _.jsxs("div",{className:`p-2 rounded ${H?b.bg:"bg-gray-900"}`,children:[_.jsxs("div",{className:"flex justify-between",children:[_.jsx("span",{className:H?"text-white":"text-gray-500",children:M.name}),_.jsxs("span",{className:"text-gray-500",children:["$",M.levels[0].salary[0].toLocaleString()]})]}),_.jsxs("div",{className:"text-gray-500",children:[L.intelligence?`${L.intelligence} `:"",L.stamina?`${L.stamina} `:"",L.charisma?`${L.charisma}`:""]})]},M.id)})})]},v)})})]})]})},Ay=()=>{const{players:l,currentPlayerIndex:n,turn:a,phase:s,currentEvent:c,showEventModal:f,confirmEvent:d}=Ht(),{room:m}=yc(),{isOnlineGame:p,syncToFirebase:g,isMyTurn:S,getMyPlayerIndex:v}=VT();if(De.useEffect(()=>{if(!p)return;const oe=Ht.subscribe(()=>{g()});return()=>oe()},[p,g]),!l||l.length===0||s==="setup")return _.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:_.jsx("div",{className:"text-white text-xl",children:"..."})});const b=l[n],M=p?v():n,L=l[M]||b,H=S(),Q=p?L:b;if(!b)return _.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:_.jsx("div",{className:"text-white text-xl",children:"..."})});const ce={event:"",salary:"",action:"",draw:"",end_turn:""};return _.jsxs("div",{className:"min-h-screen bg-gray-900 p-4",children:[_.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 mb-4 flex justify-between items-center",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("img",{src:"/Relife/logo.png",alt:"ReLife",className:"h-8"}),_.jsxs("div",{className:"text-white",children:[_.jsxs("span",{className:"text-yellow-400 font-bold",children:[" ",a," "]}),_.jsx("span",{className:"text-gray-400 mx-2",children:"|"}),_.jsx("span",{children:ce[s]||s})]})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[p&&_.jsxs("div",{className:"text-blue-400 text-sm",children:[" ",m&&` (: ${m.id})`]}),_.jsxs("div",{className:"text-gray-400 text-sm",children:[": ",Ht.getState().deck?.length??0," "]})]})]}),p&&_.jsx("div",{className:`rounded-lg p-3 mb-4 text-center ${H?"bg-green-900/50 border border-green-500":"bg-gray-800"}`,children:H?_.jsx("span",{className:"text-green-400 font-bold",children:" "}):_.jsxs("span",{className:"text-gray-400",children:[" ",_.jsx("span",{className:"text-yellow-400 font-bold",children:b?.name})," ..."]})}),_.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[_.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[_.jsx("h2",{className:"text-gray-400 text-sm font-bold",children:p?"":""}),l.map((oe,fe)=>{const ye=p&&fe===M,Pe=fe===n;return!p&&Pe?null:_.jsxs("div",{className:"relative",children:[ye&&_.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full z-10",children:""}),_.jsx(Ny,{player:oe,isCurrentPlayer:Pe,isCompact:!0})]},oe.id)})]}),_.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[_.jsxs("div",{className:"relative",children:[p&&H&&_.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-0.5 rounded-full z-10",children:""}),p&&!H&&_.jsx("div",{className:"absolute -top-2 -right-2 bg-gray-600 text-white text-xs px-2 py-0.5 rounded-full z-10",children:""}),_.jsx(Ny,{player:p?L:b,isCurrentPlayer:p?H:!0})]}),_.jsx(PT,{disabled:p&&!H}),_.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[_.jsx("h3",{className:"text-white font-bold mb-3",children:p?`${L?.name} `:`${b.name} `}),_.jsx(XT,{cards:Q?.hand||[],canPlay:s==="action"&&H}),p&&!H&&s==="action"&&_.jsx("div",{className:"text-gray-500 text-sm mt-2 text-center",children:""})]})]}),_.jsxs("div",{className:"lg:col-span-1",children:[_.jsx(FT,{disabled:p&&!H}),_.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mt-4",children:[_.jsx("h3",{className:"text-white font-bold mb-2",children:""}),_.jsx("div",{className:"max-h-48 overflow-y-auto text-sm space-y-1",children:(Ht.getState().eventLog||[]).slice(-10).map((oe,fe)=>_.jsx("div",{className:"text-gray-400",children:oe},fe))})]})]})]}),f&&c&&_.jsx(ZT,{event:c,onConfirm:d})]})},JT=()=>{const{getGameResult:l,resetGame:n}=Ht(),a=l();if(!a)return null;const s=["","","",""];return _.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-800 rounded-xl p-8 max-w-2xl w-full",children:[_.jsxs("div",{className:"text-center mb-8",children:[_.jsx("img",{src:"/Relife/logo.png",alt:"ReLife",className:"h-16 mx-auto mb-4"}),_.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:""}),_.jsx("p",{className:"text-gray-400",children:""})]}),_.jsx("div",{className:"space-y-4 mb-8",children:a.rankings.map((c,f)=>_.jsxs("div",{className:`rounded-lg p-4 ${f===0?"bg-yellow-900/50 border-2 border-yellow-500":"bg-gray-700"}`,children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"text-3xl",children:s[f]||`#${c.rank}`}),_.jsxs("div",{children:[_.jsx("div",{className:"text-white font-bold text-lg",children:c.player.name}),_.jsx("div",{className:"text-gray-400 text-sm",children:c.player.character.name})]})]}),_.jsxs("div",{className:"text-right",children:[_.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:c.score.total.toLocaleString()}),_.jsx("div",{className:"text-gray-400 text-xs",children:""})]})]}),_.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600 grid grid-cols-3 gap-4 text-sm",children:[_.jsxs("div",{children:[_.jsx("div",{className:"text-gray-400",children:""}),_.jsxs("div",{className:"text-white",children:["$",c.score.money.toLocaleString()]})]}),_.jsxs("div",{children:[_.jsx("div",{className:"text-gray-400",children:""}),_.jsx("div",{className:"text-white",children:c.score.stats.toLocaleString()})]}),_.jsxs("div",{children:[_.jsx("div",{className:"text-gray-400",children:""}),_.jsx("div",{className:"text-white",children:c.score.jobBonus.toLocaleString()})]})]}),_.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-600 flex gap-4 text-xs text-gray-400",children:[_.jsxs("span",{children:[": ",c.player.stats.intelligence]}),_.jsxs("span",{children:[": ",c.player.stats.stamina]}),_.jsxs("span",{children:[": ",c.player.stats.charisma]}),_.jsxs("span",{children:[": ",c.player.job?c.player.job.levels[c.player.jobLevel].name:""]})]})]},c.player.id))}),_.jsx("button",{onClick:n,className:"w-full bg-yellow-500 hover:bg-yellow-400 text-black font-bold py-4 rounded-lg transition-colors",children:""})]})})},$T=({onStartGame:l,onBack:n})=>{const{roomId:a,room:s,error:c,createNewRoom:f,joinExistingRoom:d,leaveCurrentRoom:m,toggleReady:p,changeCharacter:g,startOnlineGame:S,getCurrentPlayer:v,isHost:b,canStartGame:M}=yc(),[L,H]=De.useState("menu"),[Q,ce]=De.useState(""),[oe,fe]=De.useState(Jt[0].id),[ye,Pe]=De.useState(""),[be,P]=De.useState(!1);if(De.useEffect(()=>{GT().catch(console.error)},[]),a&&s){const Se=v(),de=async()=>{P(!0),await S()&&l(),P(!1)},ht=async()=>{await m(),H("menu")},it=s.players.filter(he=>he.id!==Se?.id).map(he=>he.characterId);return _.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[_.jsxs("div",{className:"text-center mb-6",children:[_.jsx("h2",{className:"text-white text-xl font-bold mb-2",children:""}),_.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:_.jsx("span",{className:"text-yellow-400 text-3xl font-mono tracking-widest",children:a})}),_.jsx("p",{className:"text-gray-400 text-sm mt-2",children:""})]}),_.jsxs("div",{className:"mb-6",children:[_.jsxs("h3",{className:"text-white font-bold mb-3",children:[" (",s.players.length,"/4)"]}),_.jsxs("div",{className:"space-y-2",children:[s.players.map(he=>{const ft=Jt.find(O=>O.id===he.characterId),_t=he.id===Se?.id,wt=he.id===s.hostId;return _.jsxs("div",{className:`p-3 rounded-lg flex items-center justify-between ${_t?"bg-blue-900/50 border border-blue-500":"bg-gray-700"}`,children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsxs("span",{className:"text-white font-bold",children:[he.name,_t&&_.jsx("span",{className:"text-blue-400 text-sm ml-1",children:"()"}),wt&&_.jsx("span",{className:"text-yellow-400 text-sm ml-1",children:""})]}),_.jsx("span",{className:"text-gray-400 text-sm",children:ft?.name})]}),_.jsx("div",{children:he.ready?_.jsx("span",{className:"text-green-400 text-sm",children:" "}):_.jsx("span",{className:"text-gray-500 text-sm",children:"..."})})]},he.id)}),Array.from({length:4-s.players.length}).map((he,ft)=>_.jsx("div",{className:"p-3 rounded-lg bg-gray-700/50 border border-dashed border-gray-600",children:_.jsx("span",{className:"text-gray-500",children:"..."})},`empty-${ft}`))]})]}),Se&&_.jsxs("div",{className:"mb-6",children:[_.jsx("h3",{className:"text-white font-bold mb-3",children:""}),_.jsx("div",{className:"grid grid-cols-2 gap-2",children:Jt.map(he=>{const ft=it.includes(he.id),_t=Se.characterId===he.id;return _.jsxs("button",{onClick:()=>!ft&&g(he.id),disabled:ft||Se.ready,className:`p-2 rounded text-left text-sm ${_t?"bg-blue-600 text-white":ft?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-700 text-white hover:bg-gray-600"}`,children:[_.jsx("div",{className:"font-bold",children:he.name}),_.jsxs("div",{className:"text-xs opacity-75",children:["$",he.initialMoney.toLocaleString(),ft&&" ()"]})]},he.id)})})]}),c&&_.jsx("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-500 rounded text-red-300 text-sm",children:c}),_.jsxs("div",{className:"space-y-2",children:[b()?_.jsx("button",{onClick:de,disabled:!M()||be,className:`w-full py-3 rounded-lg font-bold ${M()?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:be?"...":M()?"":""}):_.jsx("button",{onClick:p,className:`w-full py-3 rounded-lg font-bold ${Se?.ready?"bg-gray-600 hover:bg-gray-500 text-white":"bg-green-600 hover:bg-green-500 text-white"}`,children:Se?.ready?"":""}),_.jsx("button",{onClick:ht,className:"w-full py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300",children:""})]})]})})}if(L==="menu")return _.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-sm",children:[_.jsx("h2",{className:"text-white text-2xl font-bold text-center mb-6",children:""}),_.jsxs("div",{className:"space-y-3",children:[_.jsx("button",{onClick:()=>H("create"),className:"w-full py-3 rounded-lg bg-blue-600 hover:bg-blue-500 text-white font-bold",children:""}),_.jsx("button",{onClick:()=>H("join"),className:"w-full py-3 rounded-lg bg-green-600 hover:bg-green-500 text-white font-bold",children:""}),_.jsx("button",{onClick:n,className:"w-full py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300",children:""})]})]})});if(L==="create"){const Se=async()=>{Q.trim()&&(P(!0),await f(Q.trim(),oe),P(!1))};return _.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-sm",children:[_.jsx("h2",{className:"text-white text-xl font-bold text-center mb-6",children:""}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:""}),_.jsx("input",{type:"text",value:Q,onChange:de=>ce(de.target.value),placeholder:"",className:"w-full p-3 rounded bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:outline-none",maxLength:10})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:""}),_.jsx("select",{value:oe,onChange:de=>fe(de.target.value),className:"w-full p-3 rounded bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:outline-none",children:Jt.map(de=>_.jsxs("option",{value:de.id,children:[de.name," ($",de.initialMoney.toLocaleString(),")"]},de.id))})]}),c&&_.jsx("div",{className:"p-3 bg-red-900/50 border border-red-500 rounded text-red-300 text-sm",children:c}),_.jsx("button",{onClick:Se,disabled:!Q.trim()||be,className:"w-full py-3 rounded-lg bg-blue-600 hover:bg-blue-500 text-white font-bold disabled:bg-gray-600 disabled:cursor-not-allowed",children:be?"...":""}),_.jsx("button",{onClick:()=>H("menu"),className:"w-full py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300",children:""})]})]})})}if(L==="join"){const Se=async()=>{!Q.trim()||!ye.trim()||(P(!0),await d(ye.trim(),Q.trim(),oe),P(!1))};return _.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-sm",children:[_.jsx("h2",{className:"text-white text-xl font-bold text-center mb-6",children:""}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:""}),_.jsx("input",{type:"text",value:ye,onChange:de=>Pe(de.target.value),placeholder:" 6 ",className:"w-full p-3 rounded bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:outline-none text-center text-xl tracking-widest",maxLength:6})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:""}),_.jsx("input",{type:"text",value:Q,onChange:de=>ce(de.target.value),placeholder:"",className:"w-full p-3 rounded bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:outline-none",maxLength:10})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:""}),_.jsx("select",{value:oe,onChange:de=>fe(de.target.value),className:"w-full p-3 rounded bg-gray-700 text-white border border-gray-600 focus:border-blue-500 focus:outline-none",children:Jt.map(de=>_.jsxs("option",{value:de.id,children:[de.name," ($",de.initialMoney.toLocaleString(),")"]},de.id))})]}),c&&_.jsx("div",{className:"p-3 bg-red-900/50 border border-red-500 rounded text-red-300 text-sm",children:c}),_.jsx("button",{onClick:Se,disabled:!Q.trim()||!ye.trim()||be,className:"w-full py-3 rounded-lg bg-green-600 hover:bg-green-500 text-white font-bold disabled:bg-gray-600 disabled:cursor-not-allowed",children:be?"...":""}),_.jsx("button",{onClick:()=>H("menu"),className:"w-full py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300",children:""})]})]})})}return null};function WT(){const{phase:l}=Ht(),{room:n,isReconnecting:a,error:s,hasStoredSession:c,tryReconnect:f,resetRoom:d}=yc(),[m,p]=De.useState(!1),[g,S]=De.useState(!1),[v,b]=De.useState(!1);De.useEffect(()=>{v||(c()&&S(!0),b(!0))},[c,v]);const M=async()=>{S(!1),await f()&&p(!0)},L=()=>{S(!1),d()};return g?_.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full text-center",children:[_.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:""}),_.jsx("p",{className:"text-gray-300 mb-6",children:""}),_.jsxs("div",{className:"flex gap-3 justify-center",children:[_.jsx("button",{onClick:M,className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded font-bold",children:""}),_.jsx("button",{onClick:L,className:"bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded",children:""})]})]})}):a?_.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full text-center",children:[_.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"..."}),_.jsx("div",{className:"animate-pulse text-gray-400",children:""})]})}):s&&v&&!m?_.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:_.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full text-center",children:[_.jsx("h2",{className:"text-xl font-bold text-red-400 mb-4",children:""}),_.jsx("p",{className:"text-gray-300 mb-6",children:s}),_.jsx("button",{onClick:()=>{d()},className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded font-bold",children:""})]})}):m&&(!n||n.status==="waiting")?_.jsx($T,{onStartGame:()=>p(!1),onBack:()=>p(!1)}):n&&n.status==="playing"?_.jsx(Ay,{}):l==="setup"?_.jsx(YT,{onOnlineClick:()=>p(!0)}):l==="game_over"?_.jsx(JT,{}):_.jsx(Ay,{})}Jb.createRoot(document.getElementById("root")).render(_.jsx(De.StrictMode,{children:_.jsx(WT,{})}));
